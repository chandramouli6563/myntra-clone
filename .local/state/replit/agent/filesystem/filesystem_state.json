{"file_contents":{"next js/myntra-clone/README.md":{"content":"This is a [Next.js](https://nextjs.org) project bootstrapped with [`create-next-app`](https://nextjs.org/docs/app/api-reference/cli/create-next-app).\n\n## Getting Started\n\nFirst, run the development server:\n\n```bash\nnpm run dev\n# or\nyarn dev\n# or\npnpm dev\n# or\nbun dev\n```\n\nOpen [http://localhost:3000](http://localhost:3000) with your browser to see the result.\n\nYou can start editing the page by modifying `app/page.tsx`. The page auto-updates as you edit the file.\n\nThis project uses [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts) to automatically optimize and load [Geist](https://vercel.com/font), a new font family for Vercel.\n\n## Learn More\n\nTo learn more about Next.js, take a look at the following resources:\n\n- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.\n- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.\n\nYou can check out [the Next.js GitHub repository](https://github.com/vercel/next.js) - your feedback and contributions are welcome!\n\n## Deploy on Vercel\n\nThe easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.\n\nCheck out our [Next.js deployment documentation](https://nextjs.org/docs/app/building-your-application/deploying) for more details.\n","size_bytes":1450},"next js/myntra-clone/next.config.ts":{"content":"import type { NextConfig } from \"next\";\n\nconst nextConfig: NextConfig = {\n\timages: {\n\t\tremotePatterns: [\n\t\t\t{ protocol: 'https', hostname: 'images.unsplash.com' },\n\t\t\t{ protocol: 'https', hostname: 'cdn.jsdelivr.net' },\n\t\t],\n\t},\n};\n\nexport default nextConfig;\n","size_bytes":260},"next js/myntra-mobile/app.config.ts":{"content":"import { ExpoConfig } from 'expo/config';\n\nconst defineConfig = (): ExpoConfig => ({\n  name: 'myntra-mobile',\n  slug: 'myntra-mobile',\n  scheme: 'myntra',\n  extra: {\n    eas: {\n      projectId: 'local',\n    },\n    apiBaseUrl: 'http://192.168.1.8:3000',\n  },\n});\n\nexport default defineConfig;\n\n\n","size_bytes":294},"next js/myntra-mobile/babel.config.js":{"content":"module.exports = function (api) {\n  api.cache(true);\n  return {\n    presets: ['babel-preset-expo'],\n    plugins: [\n      'nativewind/babel',\n      ['module:react-native-dotenv', {\n        moduleName: '@env',\n        path: '.env',\n      }]\n    ],\n  };\n};\n","size_bytes":254},"next js/myntra-mobile/app/+html.tsx":{"content":"import { ScrollViewStyleReset } from 'expo-router/html';\n\n// This file is web-only and used to configure the root HTML for every\n// web page during static rendering.\n// The contents of this function only run in Node.js environments and\n// do not have access to the DOM or browser APIs.\nexport default function Root({ children }: { children: React.ReactNode }) {\n  return (\n    <html lang=\"en\">\n      <head>\n        <meta charSet=\"utf-8\" />\n        <meta httpEquiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\" />\n\n        {/* \n          Disable body scrolling on web. This makes ScrollView components work closer to how they do on native. \n          However, body scrolling is often nice to have for mobile web. If you want to enable it, remove this line.\n        */}\n        <ScrollViewStyleReset />\n\n        {/* Using raw CSS styles as an escape-hatch to ensure the background color never flickers in dark-mode. */}\n        <style dangerouslySetInnerHTML={{ __html: responsiveBackground }} />\n        {/* Add any additional <head> elements that you want globally available on web... */}\n      </head>\n      <body>{children}</body>\n    </html>\n  );\n}\n\nconst responsiveBackground = `\nbody {\n  background-color: #fff;\n}\n@media (prefers-color-scheme: dark) {\n  body {\n    background-color: #000;\n  }\n}`;\n","size_bytes":1389},"next js/myntra-mobile/app/+not-found.tsx":{"content":"import { Link, Stack } from 'expo-router';\nimport { StyleSheet } from 'react-native';\n\nimport { Text, View } from '@/components/Themed';\n\nexport default function NotFoundScreen() {\n  return (\n    <>\n      <Stack.Screen options={{ title: 'Oops!' }} />\n      <View style={styles.container}>\n        <Text style={styles.title}>This screen doesn't exist.</Text>\n\n        <Link href=\"/\" style={styles.link}>\n          <Text style={styles.linkText}>Go to home screen!</Text>\n        </Link>\n      </View>\n    </>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 20,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  link: {\n    marginTop: 15,\n    paddingVertical: 15,\n  },\n  linkText: {\n    fontSize: 14,\n    color: '#2e78b7',\n  },\n});\n","size_bytes":836},"next js/myntra-mobile/app/_layout.tsx":{"content":"import '../global.css';\nimport FontAwesome from '@expo/vector-icons/FontAwesome';\nimport { DarkTheme, DefaultTheme, ThemeProvider } from '@react-navigation/native';\nimport { useFonts } from 'expo-font';\nimport { Stack } from 'expo-router';\nimport * as SplashScreen from 'expo-splash-screen';\nimport { useEffect } from 'react';\n\nimport { useColorScheme } from '@/components/useColorScheme';\nimport { AuthProvider } from '@/src/contexts/AuthContext';\n\nexport {\n  ErrorBoundary,\n} from 'expo-router';\n\nexport const unstable_settings = {\n  initialRouteName: '(tabs)',\n};\n\nSplashScreen.preventAutoHideAsync();\n\nexport default function RootLayout() {\n  const [loaded, error] = useFonts({\n    SpaceMono: require('../assets/fonts/SpaceMono-Regular.ttf'),\n    ...FontAwesome.font,\n  });\n\n  useEffect(() => {\n    if (error) throw error;\n  }, [error]);\n\n  useEffect(() => {\n    if (loaded) {\n      SplashScreen.hideAsync();\n    }\n  }, [loaded]);\n\n  if (!loaded) {\n    return null;\n  }\n\n  return <RootLayoutNav />;\n}\n\nfunction RootLayoutNav() {\n  const colorScheme = useColorScheme();\n\n  return (\n    <AuthProvider>\n      <ThemeProvider value={colorScheme === 'dark' ? DarkTheme : DefaultTheme}>\n        <Stack>\n          <Stack.Screen name=\"(tabs)\" options={{ headerShown: false }} />\n          <Stack.Screen name=\"modal\" options={{ presentation: 'modal' }} />\n          <Stack.Screen name=\"login\" options={{ headerShown: false }} />\n          <Stack.Screen name=\"signup\" options={{ headerShown: false }} />\n          <Stack.Screen name=\"product/[id]\" options={{ headerShown: false }} />\n          <Stack.Screen name=\"checkout\" options={{ headerShown: false }} />\n          <Stack.Screen name=\"orders/[id]\" options={{ headerShown: false }} />\n        </Stack>\n      </ThemeProvider>\n    </AuthProvider>\n  );\n}\n","size_bytes":1799},"next js/myntra-mobile/app/login.tsx":{"content":"import React, { useState } from 'react';\nimport { View, Text, TextInput, TouchableOpacity, Alert, ScrollView, ActivityIndicator } from 'react-native';\nimport { useRouter } from 'expo-router';\nimport { useAuth } from '@/src/contexts/AuthContext';\n\nexport default function LoginScreen() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { login } = useAuth();\n  const router = useRouter();\n\n  const handleLogin = async () => {\n    if (!email || !password) {\n      Alert.alert('Error', 'Please enter both email and password');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      await login(email, password);\n      Alert.alert('Success', 'Logged in successfully');\n      router.replace('/(tabs)');\n    } catch (error: any) {\n      Alert.alert('Error', error.response?.data?.message || 'Login failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <ScrollView className=\"flex-1 bg-white\">\n      <View className=\"flex-1 px-6 pt-16 pb-8\">\n        <Text className=\"text-3xl font-bold text-secondary mb-2\">Welcome Back</Text>\n        <Text className=\"text-gray-600 mb-8\">Login to your account</Text>\n\n        <View className=\"mb-6\">\n          <Text className=\"text-sm font-medium text-gray-700 mb-2\">Email</Text>\n          <TextInput\n            className=\"border border-gray-300 rounded-lg px-4 py-3 text-base\"\n            placeholder=\"Enter your email\"\n            autoCapitalize=\"none\"\n            keyboardType=\"email-address\"\n            value={email}\n            onChangeText={setEmail}\n          />\n        </View>\n\n        <View className=\"mb-6\">\n          <Text className=\"text-sm font-medium text-gray-700 mb-2\">Password</Text>\n          <TextInput\n            className=\"border border-gray-300 rounded-lg px-4 py-3 text-base\"\n            placeholder=\"Enter your password\"\n            secureTextEntry\n            value={password}\n            onChangeText={setPassword}\n          />\n        </View>\n\n        <TouchableOpacity\n          className=\"bg-primary rounded-lg py-4 mb-4\"\n          onPress={handleLogin}\n          disabled={loading}\n        >\n          {loading ? (\n            <ActivityIndicator color=\"white\" />\n          ) : (\n            <Text className=\"text-white text-center font-semibold text-base\">Login</Text>\n          )}\n        </TouchableOpacity>\n\n        <View className=\"flex-row justify-center items-center mt-4\">\n          <Text className=\"text-gray-600\">Don't have an account? </Text>\n          <TouchableOpacity onPress={() => router.push('/signup')}>\n            <Text className=\"text-primary font-semibold\">Sign Up</Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n    </ScrollView>\n  );\n}\n\n\n","size_bytes":2770},"next js/myntra-mobile/app/modal.tsx":{"content":"import { StatusBar } from 'expo-status-bar';\nimport { Platform, StyleSheet } from 'react-native';\n\nimport EditScreenInfo from '@/components/EditScreenInfo';\nimport { Text, View } from '@/components/Themed';\n\nexport default function ModalScreen() {\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Modal</Text>\n      <View style={styles.separator} lightColor=\"#eee\" darkColor=\"rgba(255,255,255,0.1)\" />\n      <EditScreenInfo path=\"app/modal.tsx\" />\n\n      {/* Use a light status bar on iOS to account for the black space above the modal */}\n      <StatusBar style={Platform.OS === 'ios' ? 'light' : 'auto'} />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n});\n","size_bytes":923},"next js/myntra-mobile/app/signup.tsx":{"content":"import React, { useState } from 'react';\nimport { View, Text, TextInput, TouchableOpacity, Alert, ScrollView, ActivityIndicator } from 'react-native';\nimport { useRouter } from 'expo-router';\nimport { useAuth } from '@/src/contexts/AuthContext';\n\nexport default function SignupScreen() {\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [phone, setPhone] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { signup } = useAuth();\n  const router = useRouter();\n\n  const handleSignup = async () => {\n    if (!name || !email || !phone || !password) {\n      Alert.alert('Error', 'All fields are required');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      await signup(name, email, password, phone);\n      Alert.alert('Success', 'Account created successfully');\n      router.replace('/(tabs)');\n    } catch (error: any) {\n      Alert.alert('Error', error.response?.data?.message || 'Signup failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <ScrollView className=\"flex-1 bg-white\">\n      <View className=\"flex-1 px-6 pt-16 pb-8\">\n        <Text className=\"text-3xl font-bold text-secondary mb-2\">Create Account</Text>\n        <Text className=\"text-gray-600 mb-8\">Sign up to get started</Text>\n\n        <View className=\"mb-4\">\n          <Text className=\"text-sm font-medium text-gray-700 mb-2\">Full Name</Text>\n          <TextInput\n            className=\"border border-gray-300 rounded-lg px-4 py-3 text-base\"\n            placeholder=\"Enter your name\"\n            value={name}\n            onChangeText={setName}\n          />\n        </View>\n\n        <View className=\"mb-4\">\n          <Text className=\"text-sm font-medium text-gray-700 mb-2\">Email</Text>\n          <TextInput\n            className=\"border border-gray-300 rounded-lg px-4 py-3 text-base\"\n            placeholder=\"Enter your email\"\n            autoCapitalize=\"none\"\n            keyboardType=\"email-address\"\n            value={email}\n            onChangeText={setEmail}\n          />\n        </View>\n\n        <View className=\"mb-4\">\n          <Text className=\"text-sm font-medium text-gray-700 mb-2\">Phone Number</Text>\n          <TextInput\n            className=\"border border-gray-300 rounded-lg px-4 py-3 text-base\"\n            placeholder=\"Enter your phone number\"\n            keyboardType=\"phone-pad\"\n            value={phone}\n            onChangeText={setPhone}\n          />\n        </View>\n\n        <View className=\"mb-6\">\n          <Text className=\"text-sm font-medium text-gray-700 mb-2\">Password</Text>\n          <TextInput\n            className=\"border border-gray-300 rounded-lg px-4 py-3 text-base\"\n            placeholder=\"Create a password\"\n            secureTextEntry\n            value={password}\n            onChangeText={setPassword}\n          />\n        </View>\n\n        <TouchableOpacity\n          className=\"bg-primary rounded-lg py-4 mb-4\"\n          onPress={handleSignup}\n          disabled={loading}\n        >\n          {loading ? (\n            <ActivityIndicator color=\"white\" />\n          ) : (\n            <Text className=\"text-white text-center font-semibold text-base\">Sign Up</Text>\n          )}\n        </TouchableOpacity>\n\n        <View className=\"flex-row justify-center items-center mt-4\">\n          <Text className=\"text-gray-600\">Already have an account? </Text>\n          <TouchableOpacity onPress={() => router.push('/login')}>\n            <Text className=\"text-primary font-semibold\">Login</Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n    </ScrollView>\n  );\n}\n","size_bytes":3627},"next js/myntra-mobile/components/EditScreenInfo.tsx":{"content":"import React from 'react';\nimport { StyleSheet } from 'react-native';\n\nimport { ExternalLink } from './ExternalLink';\nimport { MonoText } from './StyledText';\nimport { Text, View } from './Themed';\n\nimport Colors from '@/constants/Colors';\n\nexport default function EditScreenInfo({ path }: { path: string }) {\n  return (\n    <View>\n      <View style={styles.getStartedContainer}>\n        <Text\n          style={styles.getStartedText}\n          lightColor=\"rgba(0,0,0,0.8)\"\n          darkColor=\"rgba(255,255,255,0.8)\">\n          Open up the code for this screen:\n        </Text>\n\n        <View\n          style={[styles.codeHighlightContainer, styles.homeScreenFilename]}\n          darkColor=\"rgba(255,255,255,0.05)\"\n          lightColor=\"rgba(0,0,0,0.05)\">\n          <MonoText>{path}</MonoText>\n        </View>\n\n        <Text\n          style={styles.getStartedText}\n          lightColor=\"rgba(0,0,0,0.8)\"\n          darkColor=\"rgba(255,255,255,0.8)\">\n          Change any of the text, save the file, and your app will automatically update.\n        </Text>\n      </View>\n\n      <View style={styles.helpContainer}>\n        <ExternalLink\n          style={styles.helpLink}\n          href=\"https://docs.expo.io/get-started/create-a-new-app/#opening-the-app-on-your-phonetablet\">\n          <Text style={styles.helpLinkText} lightColor={Colors.light.tint}>\n            Tap here if your app doesn't automatically update after making changes\n          </Text>\n        </ExternalLink>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  getStartedContainer: {\n    alignItems: 'center',\n    marginHorizontal: 50,\n  },\n  homeScreenFilename: {\n    marginVertical: 7,\n  },\n  codeHighlightContainer: {\n    borderRadius: 3,\n    paddingHorizontal: 4,\n  },\n  getStartedText: {\n    fontSize: 17,\n    lineHeight: 24,\n    textAlign: 'center',\n  },\n  helpContainer: {\n    marginTop: 15,\n    marginHorizontal: 20,\n    alignItems: 'center',\n  },\n  helpLink: {\n    paddingVertical: 15,\n  },\n  helpLinkText: {\n    textAlign: 'center',\n  },\n});\n","size_bytes":2035},"next js/myntra-mobile/components/ExternalLink.tsx":{"content":"import { Link } from 'expo-router';\nimport * as WebBrowser from 'expo-web-browser';\nimport React from 'react';\nimport { Platform } from 'react-native';\n\nexport function ExternalLink(\n  props: Omit<React.ComponentProps<typeof Link>, 'href'> & { href: string }\n) {\n  return (\n    <Link\n      target=\"_blank\"\n      {...props}\n      // @ts-expect-error: External URLs are not typed.\n      href={props.href}\n      onPress={(e) => {\n        if (Platform.OS !== 'web') {\n          // Prevent the default behavior of linking to the default browser on native.\n          e.preventDefault();\n          // Open the link in an in-app browser.\n          WebBrowser.openBrowserAsync(props.href as string);\n        }\n      }}\n    />\n  );\n}\n","size_bytes":724},"next js/myntra-mobile/components/StyledText.tsx":{"content":"import { Text, TextProps } from './Themed';\n\nexport function MonoText(props: TextProps) {\n  return <Text {...props} style={[props.style, { fontFamily: 'SpaceMono' }]} />;\n}\n","size_bytes":173},"next js/myntra-mobile/components/Themed.tsx":{"content":"/**\n * Learn more about Light and Dark modes:\n * https://docs.expo.io/guides/color-schemes/\n */\n\nimport { Text as DefaultText, View as DefaultView } from 'react-native';\n\nimport Colors from '@/constants/Colors';\nimport { useColorScheme } from './useColorScheme';\n\ntype ThemeProps = {\n  lightColor?: string;\n  darkColor?: string;\n};\n\nexport type TextProps = ThemeProps & DefaultText['props'];\nexport type ViewProps = ThemeProps & DefaultView['props'];\n\nexport function useThemeColor(\n  props: { light?: string; dark?: string },\n  colorName: keyof typeof Colors.light & keyof typeof Colors.dark\n) {\n  const theme = useColorScheme() ?? 'light';\n  const colorFromProps = props[theme];\n\n  if (colorFromProps) {\n    return colorFromProps;\n  } else {\n    return Colors[theme][colorName];\n  }\n}\n\nexport function Text(props: TextProps) {\n  const { style, lightColor, darkColor, ...otherProps } = props;\n  const color = useThemeColor({ light: lightColor, dark: darkColor }, 'text');\n\n  return <DefaultText style={[{ color }, style]} {...otherProps} />;\n}\n\nexport function View(props: ViewProps) {\n  const { style, lightColor, darkColor, ...otherProps } = props;\n  const backgroundColor = useThemeColor({ light: lightColor, dark: darkColor }, 'background');\n\n  return <DefaultView style={[{ backgroundColor }, style]} {...otherProps} />;\n}\n","size_bytes":1329},"next js/myntra-mobile/components/useClientOnlyValue.ts":{"content":"// This function is web-only as native doesn't currently support server (or build-time) rendering.\nexport function useClientOnlyValue<S, C>(server: S, client: C): S | C {\n  return client;\n}\n","size_bytes":190},"next js/myntra-mobile/components/useClientOnlyValue.web.ts":{"content":"import React from 'react';\n\n// `useEffect` is not invoked during server rendering, meaning\n// we can use this to determine if we're on the server or not.\nexport function useClientOnlyValue<S, C>(server: S, client: C): S | C {\n  const [value, setValue] = React.useState<S | C>(server);\n  React.useEffect(() => {\n    setValue(client);\n  }, [client]);\n\n  return value;\n}\n","size_bytes":368},"next js/myntra-mobile/components/useColorScheme.ts":{"content":"export { useColorScheme } from 'react-native';\n","size_bytes":47},"next js/myntra-mobile/components/useColorScheme.web.ts":{"content":"// NOTE: The default React Native styling doesn't support server rendering.\n// Server rendered styles should not change between the first render of the HTML\n// and the first render on the client. Typically, web developers will use CSS media queries\n// to render different styles on the client and server, these aren't directly supported in React Native\n// but can be achieved using a styling library like Nativewind.\nexport function useColorScheme() {\n  return 'light';\n}\n","size_bytes":472},"next js/myntra-mobile/constants/Colors.ts":{"content":"const tintColorLight = '#2f95dc';\nconst tintColorDark = '#fff';\n\nexport default {\n  light: {\n    text: '#000',\n    background: '#fff',\n    tint: tintColorLight,\n    tabIconDefault: '#ccc',\n    tabIconSelected: tintColorLight,\n  },\n  dark: {\n    text: '#fff',\n    background: '#000',\n    tint: tintColorDark,\n    tabIconDefault: '#ccc',\n    tabIconSelected: tintColorDark,\n  },\n};\n","size_bytes":380},"next js/myntra-clone/src/app/globals.css":{"content":"@import \"tailwindcss\";\n\n:root {\n  --background: #0f0f10;\n  --foreground: #ffffff;\n  --brand: #0B7FB3;\n  --accent: #26a541;\n  --muted: #1a1b1f;\n  --card: #131417;\n}\n\n@theme inline {\n  --color-background: var(--background);\n  --color-foreground: var(--foreground);\n  --font-sans: var(--font-geist-sans);\n  --font-mono: var(--font-geist-mono);\n}\n\n@media (prefers-color-scheme: dark) {\n  :root {\n    --background: #0a0a0a;\n    --foreground: #ededed;\n  }\n}\n\nbody {\n  background: var(--background);\n  color: var(--foreground);\n  font-family: Arial, Helvetica, sans-serif;\n}\n\n.btn {\n  padding: 0.5rem 1rem;\n  border-radius: 0.375rem;\n  font-weight: 500;\n  transition: opacity .2s ease;\n}\n.btn-primary {\n  background: var(--brand);\n  color: white;\n}\n.btn-primary:hover { opacity: .9; }\n.btn-outline {\n  border: 1px solid rgba(255,255,255,.2);\n}\n.card { background: var(--card); border: 1px solid rgba(255,255,255,.1); border-radius: .75rem; }\n.container { max-width: 80rem; margin-left: auto; margin-right: auto; padding-left: 1rem; padding-right: 1rem; }\n","size_bytes":1048},"next js/myntra-clone/src/app/layout.tsx":{"content":"import type { Metadata } from 'next';\nimport './globals.css';\nimport Script from 'next/script';\nimport { NavBar } from '@/components/NavBar';\nimport Footer from '@/components/Footer';\n\nexport const metadata: Metadata = {\n        title: 'Myntra - Fashion & Lifestyle Store',\n        description: 'Discover the latest trends in fashion. Shop from thousands of styles curated just for you.',\n};\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n        return (\n                <html lang=\"en\">\n                        <head>\n                                <Script src=\"https://checkout.razorpay.com/v1/checkout.js\" strategy=\"afterInteractive\" />\n                        </head>\n                        <body className=\"bg-black text-white\">\n                                <NavBar />\n                                <main>{children}</main>\n                                <Footer />\n                        </body>\n                </html>\n        );\n}\n","size_bytes":984},"next js/myntra-clone/src/app/page.tsx":{"content":"'use client';\n\nimport { motion } from 'framer-motion';\nimport Image from 'next/image';\nimport { useRouter } from 'next/navigation';\nimport HeroBanner from '@/components/HeroBanner';\nimport CategoryCard from '@/components/CategoryCard';\nimport { categories, trendingCollections, topBrands, shopSaleCards, newArrivals } from '@/data/categories';\n\nexport default function HomePage() {\n  const router = useRouter();\n\n  return (\n    <div className=\"min-h-screen\">\n      <HeroBanner />\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 space-y-20\">\n        <motion.section\n          initial={{ opacity: 0, y: 20 }}\n          whileInView={{ opacity: 1, y: 0 }}\n          viewport={{ once: true }}\n          transition={{ duration: 0.6 }}\n        >\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-4xl md:text-5xl font-bold text-white mb-4\">\n              Shop by Category\n            </h2>\n            <p className=\"text-lg text-white/70\">Explore our curated collections</p>\n          </div>\n\n          <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 md:gap-6\">\n            {categories.map((category, index) => (\n              <CategoryCard key={category.id} category={category} index={index} />\n            ))}\n          </div>\n        </motion.section>\n\n        <motion.section\n          initial={{ opacity: 0, y: 20 }}\n          whileInView={{ opacity: 1, y: 0 }}\n          viewport={{ once: true }}\n          transition={{ duration: 0.6 }}\n        >\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-4xl md:text-5xl font-bold text-white mb-4\">\n              Shop Sale\n            </h2>\n            <p className=\"text-lg text-white/70\">Unbelievable deals you don't want to miss</p>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n            {shopSaleCards.map((card, index) => (\n              <motion.div\n                key={card.id}\n                initial={{ opacity: 0, y: 20 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true }}\n                transition={{ duration: 0.5, delay: index * 0.1 }}\n                whileHover={{ y: -8 }}\n                onClick={() => router.push(card.url)}\n                className=\"group relative overflow-hidden rounded-2xl cursor-pointer\"\n              >\n                <div className=\"aspect-[3/4] relative\">\n                  <Image\n                    src={card.image}\n                    alt={card.title}\n                    fill\n                    className=\"object-cover transition-transform duration-700 group-hover:scale-110\"\n                    sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 25vw\"\n                  />\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-black/90 via-black/30 to-transparent\"></div>\n                  {card.badge && (\n                    <div className=\"absolute top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-full font-bold text-sm\">\n                      {card.badge}\n                    </div>\n                  )}\n                </div>\n                <div className=\"absolute inset-0 flex flex-col justify-end p-6\">\n                  <h3 className=\"text-2xl font-bold text-white mb-1\">{card.title}</h3>\n                  <p className=\"text-lg text-white/80 mb-4\">{card.subtitle}</p>\n                  <motion.button\n                    whileHover={{ scale: 1.05 }}\n                    whileTap={{ scale: 0.95 }}\n                    className=\"bg-white text-black px-6 py-2 rounded-full font-semibold w-fit transition-colors hover:bg-white/90\"\n                  >\n                    Shop Now\n                  </motion.button>\n                </div>\n              </motion.div>\n            ))}\n          </div>\n        </motion.section>\n\n        <motion.section\n          initial={{ opacity: 0, y: 20 }}\n          whileInView={{ opacity: 1, y: 0 }}\n          viewport={{ once: true }}\n          transition={{ duration: 0.6 }}\n        >\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-4xl md:text-5xl font-bold text-white mb-4\">\n              New Arrivals\n            </h2>\n            <p className=\"text-lg text-white/70\">Fresh styles just dropped</p>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n            {newArrivals.map((card, index) => (\n              <motion.div\n                key={card.id}\n                initial={{ opacity: 0, y: 20 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true }}\n                transition={{ duration: 0.5, delay: index * 0.1 }}\n                whileHover={{ y: -8 }}\n                onClick={() => router.push(card.url)}\n                className=\"group relative overflow-hidden rounded-2xl cursor-pointer\"\n              >\n                <div className=\"aspect-[3/4] relative\">\n                  <Image\n                    src={card.image}\n                    alt={card.title}\n                    fill\n                    className=\"object-cover transition-transform duration-700 group-hover:scale-110\"\n                    sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 25vw\"\n                  />\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent\"></div>\n                  {card.badge && (\n                    <div className=\"absolute top-4 left-4 bg-[#26a541] text-white px-4 py-2 rounded-full font-bold text-sm\">\n                      {card.badge}\n                    </div>\n                  )}\n                </div>\n                <div className=\"absolute inset-0 flex flex-col justify-end p-6\">\n                  <h3 className=\"text-2xl font-bold text-white mb-1\">{card.title}</h3>\n                  <p className=\"text-lg text-white/80 mb-4\">{card.subtitle}</p>\n                  <motion.button\n                    whileHover={{ scale: 1.05 }}\n                    whileTap={{ scale: 0.95 }}\n                    className=\"bg-[#0B7FB3] text-white px-6 py-2 rounded-full font-semibold w-fit transition-colors hover:bg-[#0B7FB3]/90\"\n                  >\n                    Explore Now\n                  </motion.button>\n                </div>\n              </motion.div>\n            ))}\n          </div>\n        </motion.section>\n\n        <motion.section\n          initial={{ opacity: 0, y: 20 }}\n          whileInView={{ opacity: 1, y: 0 }}\n          viewport={{ once: true }}\n          transition={{ duration: 0.6 }}\n        >\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-4xl md:text-5xl font-bold text-white mb-4\">\n              Trending Collections\n            </h2>\n            <p className=\"text-lg text-white/70\">Handpicked styles for every occasion</p>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n            {trendingCollections.map((collection, index) => (\n              <motion.div\n                key={collection.id}\n                initial={{ opacity: 0, y: 20 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true }}\n                transition={{ duration: 0.5, delay: index * 0.1 }}\n                whileHover={{ y: -8 }}\n                onClick={() => router.push(collection.url)}\n                className=\"group relative overflow-hidden rounded-2xl cursor-pointer\"\n              >\n                <div className=\"aspect-[3/4] relative\">\n                  <Image\n                    src={collection.image}\n                    alt={collection.title}\n                    fill\n                    className=\"object-cover transition-transform duration-700 group-hover:scale-110\"\n                    sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 25vw\"\n                  />\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent\"></div>\n                </div>\n                <div className=\"absolute inset-0 flex flex-col justify-end p-6\">\n                  <h3 className=\"text-2xl font-bold text-white mb-3\">{collection.title}</h3>\n                  <motion.button\n                    whileHover={{ scale: 1.05 }}\n                    whileTap={{ scale: 0.95 }}\n                    className=\"bg-[#0B7FB3] text-white px-6 py-2 rounded-full font-semibold w-fit transition-colors hover:bg-[#0B7FB3]/90\"\n                  >\n                    {collection.cta}\n                  </motion.button>\n                </div>\n              </motion.div>\n            ))}\n          </div>\n        </motion.section>\n\n        <motion.section\n          initial={{ opacity: 0, y: 20 }}\n          whileInView={{ opacity: 1, y: 0 }}\n          viewport={{ once: true }}\n          transition={{ duration: 0.6 }}\n          className=\"bg-gradient-to-br from-[#0B7FB3]/10 to-[#FFFFF0]/5 rounded-3xl p-8 md:p-12\"\n        >\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-4xl md:text-5xl font-bold text-white mb-4\">\n              Top Brands\n            </h2>\n            <p className=\"text-lg text-white/70\">Shop from your favorite brands</p>\n          </div>\n\n          <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6\">\n            {topBrands.map((brand, index) => (\n              <motion.div\n                key={brand.id}\n                initial={{ opacity: 0, scale: 0.8 }}\n                whileInView={{ opacity: 1, scale: 1 }}\n                viewport={{ once: true }}\n                transition={{ duration: 0.5, delay: index * 0.1 }}\n                whileHover={{ scale: 1.1, rotate: 5 }}\n                onClick={() => router.push(brand.url)}\n                className=\"bg-white rounded-2xl p-6 flex items-center justify-center cursor-pointer hover:shadow-2xl transition-shadow aspect-square\"\n              >\n                <Image\n                  src={brand.logo}\n                  alt={brand.name}\n                  width={120}\n                  height={60}\n                  className=\"object-contain filter grayscale hover:grayscale-0 transition-all duration-300\"\n                />\n              </motion.div>\n            ))}\n          </div>\n        </motion.section>\n\n        <motion.section\n          initial={{ opacity: 0, y: 20 }}\n          whileInView={{ opacity: 1, y: 0 }}\n          viewport={{ once: true }}\n          transition={{ duration: 0.6 }}\n          className=\"relative overflow-hidden rounded-3xl\"\n        >\n          <div className=\"aspect-[21/9] relative\">\n            <Image\n              src=\"https://images.unsplash.com/photo-1441984904996-e0b6ba687e04?q=80&w=1600&auto=format&fit=crop\"\n              alt=\"Newsletter\"\n              fill\n              className=\"object-cover\"\n              sizes=\"100vw\"\n            />\n            <div className=\"absolute inset-0 bg-gradient-to-r from-black/80 via-black/50 to-transparent\"></div>\n          </div>\n          <div className=\"absolute inset-0 flex items-center\">\n            <div className=\"max-w-2xl px-8 md:px-16\">\n              <h2 className=\"text-3xl md:text-5xl font-bold text-white mb-4\">\n                Join Our Fashion Community\n              </h2>\n              <p className=\"text-lg text-white/90 mb-6\">\n                Get exclusive access to new arrivals, special offers, and style tips\n              </p>\n              <div className=\"flex flex-col sm:flex-row gap-3\">\n                <input\n                  type=\"email\"\n                  placeholder=\"Enter your email\"\n                  className=\"flex-1 px-6 py-3 rounded-full bg-white/90 backdrop-blur-sm text-black placeholder-black/50 focus:outline-none focus:ring-2 focus:ring-[#0B7FB3]\"\n                />\n                <motion.button\n                  whileHover={{ scale: 1.05 }}\n                  whileTap={{ scale: 0.95 }}\n                  className=\"bg-[#0B7FB3] text-white px-8 py-3 rounded-full font-semibold hover:bg-[#0B7FB3]/90 transition-colors\"\n                >\n                  Subscribe\n                </motion.button>\n              </div>\n            </div>\n          </div>\n        </motion.section>\n      </div>\n    </div>\n  );\n}\n","size_bytes":12206},"next js/myntra-clone/src/components/NavBar.tsx":{"content":"'use client';\n\nimport Link from 'next/link';\nimport { useEffect, useState } from 'react';\n\nexport function NavBar() {\n        const [loggedIn, setLoggedIn] = useState(false);\n        const [cartCount, setCartCount] = useState(0);\n\n        useEffect(() => {\n                (async () => {\n                        try {\n                                const res = await fetch('/api/user/me');\n                                if (res.ok) {\n                                        setLoggedIn(true);\n                                        const user = await res.json();\n                                        if (!user.phone && window.location.pathname !== '/complete-profile') {\n                                                window.location.href = '/complete-profile';\n                                        }\n                                } else {\n                                        setLoggedIn(false);\n                                }\n                        } catch {\n                                setLoggedIn(false);\n                        }\n                })();\n                const loadCart = () => {\n                        try {\n                                const raw = localStorage.getItem('cart') || '[]';\n                                const list = JSON.parse(raw) as any[];\n                                setCartCount(list.reduce((s, i) => s + (i.quantity || 0), 0));\n                        } catch { setCartCount(0); }\n                };\n                loadCart();\n                const onStorage = (e: StorageEvent) => { if (e.key === 'cart') loadCart(); };\n                window.addEventListener('storage', onStorage);\n                return () => window.removeEventListener('storage', onStorage);\n        }, []);\n\n        async function logout() {\n                await fetch('/api/auth/logout', { method: 'POST' });\n                setLoggedIn(false);\n                window.location.href = '/';\n        }\n\n        return (\n                <nav className=\"sticky top-0 z-50 bg-black/80 backdrop-blur-md border-b border-white/10\">\n                        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n                                <div className=\"flex items-center justify-between h-16\">\n                                        <Link href=\"/\" className=\"text-2xl font-bold text-[#0B7FB3] hover:text-[#0B7FB3]/80 transition-colors\">\n                                                Myntra\n                                        </Link>\n                                        \n                                        <div className=\"hidden md:flex flex-1 max-w-2xl mx-8\">\n                                                <form action=\"/search\" className=\"w-full relative\">\n                                                        <input\n                                                                name=\"q\"\n                                                                placeholder=\"Search for products, brands and more\"\n                                                                className=\"w-full rounded-full px-6 py-2.5 bg-white/5 border border-white/10 focus:border-[#0B7FB3] focus:outline-none text-white placeholder-white/50 transition-colors\"\n                                                        />\n                                                        <svg className=\"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-white/50\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n                                                        </svg>\n                                                </form>\n                                        </div>\n                                        \n                                        <div className=\"flex items-center gap-6\">\n                                                <Link href=\"/wishlist\" className=\"flex items-center gap-2 text-white/80 hover:text-white transition-colors group\" aria-label=\"Wishlist\" title=\"Wishlist\">\n                                                        <svg className=\"w-6 h-6 group-hover:scale-110 transition-transform\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\" />\n                                                        </svg>\n                                                        <span className=\"hidden lg:inline\">Wishlist</span>\n                                                </Link>\n                                                \n                                                <Link href=\"/cart\" className=\"flex items-center gap-2 text-white/80 hover:text-white transition-colors group relative\" aria-label=\"Cart\" title=\"Cart\">\n                                                        <svg className=\"w-6 h-6 group-hover:scale-110 transition-transform\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\" />\n                                                        </svg>\n                                                        {cartCount > 0 && (\n                                                                <span className=\"absolute -top-2 -right-2 bg-[#0B7FB3] text-white rounded-full text-xs w-5 h-5 flex items-center justify-center font-semibold\">\n                                                                        {cartCount}\n                                                                </span>\n                                                        )}\n                                                        <span className=\"hidden lg:inline\">Cart</span>\n                                                </Link>\n                                                \n                                                {loggedIn ? (\n                                                        <>\n                                                                <Link href=\"/dashboard\" className=\"flex items-center gap-2 text-white/80 hover:text-white transition-colors group\">\n                                                                        <svg className=\"w-6 h-6 group-hover:scale-110 transition-transform\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n                                                                        </svg>\n                                                                        <span className=\"hidden lg:inline\">Profile</span>\n                                                                </Link>\n                                                                <button onClick={logout} className=\"px-4 py-2 rounded-full border border-white/20 text-white hover:bg-white/10 transition-colors\">\n                                                                        Logout\n                                                                </button>\n                                                        </>\n                                                ) : (\n                                                        <>\n                                                                <Link href=\"/login\" className=\"px-4 py-2 rounded-full border border-white/20 text-white hover:bg-white/10 transition-colors\">\n                                                                        Login\n                                                                </Link>\n                                                                <Link href=\"/signup\" className=\"px-4 py-2 rounded-full bg-[#0B7FB3] text-white hover:bg-[#0B7FB3]/90 transition-colors font-semibold\">\n                                                                        Signup\n                                                                </Link>\n                                                        </>\n                                                )}\n                                        </div>\n                                </div>\n                        </div>\n                </nav>\n        );\n}\n","size_bytes":8643},"next js/myntra-clone/src/lib/auth.ts":{"content":"import jwt from 'jsonwebtoken';\n\nconst JWT_SECRET = process.env.JWT_SECRET as string;\nconst JWT_EXPIRE = process.env.JWT_EXPIRE || '7d';\n\nif (!JWT_SECRET) {\n\tthrow new Error('JWT_SECRET environment variable is not set');\n}\n\nexport interface JwtPayload {\n\tuserId: string;\n\temail: string;\n}\n\nexport function signAuthToken(payload: JwtPayload): string {\n\treturn jwt.sign(payload, JWT_SECRET, { expiresIn: JWT_EXPIRE });\n}\n\nexport function verifyAuthToken(token: string): JwtPayload {\n\treturn jwt.verify(token, JWT_SECRET) as JwtPayload;\n}\n\n","size_bytes":537},"next js/myntra-clone/src/lib/mongodb.ts":{"content":"import mongoose from 'mongoose';\n\nconst MONGODB_URI = process.env.MONGODB_URI as string;\n\nif (!MONGODB_URI) {\n\tthrow new Error('MONGODB_URI environment variable is not set');\n}\n\nlet cachedConnection: typeof mongoose | null = (global as any).__mongooseConn || null;\nlet cachedPromise: Promise<typeof mongoose> | null = (global as any).__mongoosePromise || null;\n\nexport async function connectToDatabase(): Promise<typeof mongoose> {\n\tif (cachedConnection) return cachedConnection;\n\tif (!cachedPromise) {\n\t\tcachedPromise = mongoose.connect(MONGODB_URI, { dbName: 'ecommerce' });\n\t\t(global as any).__mongoosePromise = cachedPromise;\n\t}\n\tcachedConnection = await cachedPromise;\n\t(global as any).__mongooseConn = cachedConnection;\n\treturn cachedConnection;\n}\n\n","size_bytes":755},"next js/myntra-clone/src/lib/razorpay.ts":{"content":"import Razorpay from 'razorpay';\n\nconst RAZORPAY_KEY_ID = process.env.RAZORPAY_KEY_ID as string | undefined;\nconst RAZORPAY_KEY_SECRET = process.env.RAZORPAY_KEY_SECRET as string | undefined;\n\nexport const razorpay = (() => {\n\tif (RAZORPAY_KEY_ID && RAZORPAY_KEY_SECRET) {\n\t\treturn new Razorpay({ key_id: RAZORPAY_KEY_ID, key_secret: RAZORPAY_KEY_SECRET });\n\t}\n\t// Dev fallback: mock minimal API\n\treturn {\n\t\torders: {\n\t\t\tcreate: async (_opts: any) => ({ id: `order_dev_${Date.now()}` }),\n\t\t},\n\t} as unknown as Razorpay;\n})();\n","size_bytes":526},"next js/myntra-clone/src/lib/session.ts":{"content":"import { cookies } from 'next/headers';\nimport { headers as getHeaders } from 'next/headers';\nimport { verifyAuthToken, JwtPayload } from '@/lib/auth';\n\nexport async function getSession(): Promise<JwtPayload | null> {\n        try {\n        // Prefer Authorization Bearer token (for mobile clients), fallback to cookie\n        const hdrs = await getHeaders();\n        const authHeader = hdrs.get('authorization') || hdrs.get('Authorization');\n\n        let token: string | undefined;\n        if (authHeader && authHeader.startsWith('Bearer ')) {\n            token = authHeader.slice('Bearer '.length).trim();\n        } else {\n            token = (await cookies()).get('token')?.value;\n        }\n\n        if (!token) return null;\n        return verifyAuthToken(token);\n        } catch {\n                return null;\n        }\n}\n\n","size_bytes":826},"next js/myntra-clone/src/models/Order.ts":{"content":"import mongoose, { Schema, Document, Model } from 'mongoose';\n\nexport interface IOrderItem {\n        product: mongoose.Types.ObjectId;\n        title: string;\n        image?: string;\n        quantity: number;\n        price: number;\n}\n\nexport interface IOrder extends Document {\n        orderNumber: string;\n        user: mongoose.Types.ObjectId;\n        items: IOrderItem[];\n        totalAmount: number;\n        status: 'created' | 'paid' | 'failed' | 'processing' | 'shipped' | 'delivered' | 'cancelled';\n        razorpayOrderId?: string;\n        razorpayPaymentId?: string;\n        razorpaySignature?: string;\n        deliveryDate?: Date;\n        trackingStatus?: {\n                stage: 'processing' | 'shipped' | 'in_transit' | 'out_for_delivery' | 'delivered';\n                message: string;\n                updatedAt: Date;\n        }[];\n        cancellationReason?: string;\n        rating?: {\n                stars: number;\n                review?: string;\n                createdAt: Date;\n        };\n}\n\nconst OrderSchema = new Schema<IOrder>(\n        {\n                orderNumber: { type: String, unique: true, index: true },\n                user: { type: Schema.Types.ObjectId, ref: 'User', required: true },\n                items: [\n                        {\n                                product: { type: Schema.Types.ObjectId, ref: 'Product', required: true },\n                                title: { type: String, required: true },\n                                image: String,\n                                quantity: { type: Number, required: true, min: 1 },\n                                price: { type: Number, required: true },\n                        },\n                ],\n                totalAmount: { type: Number, required: true },\n                status: { \n                        type: String, \n                        enum: ['created', 'paid', 'failed', 'processing', 'shipped', 'delivered', 'cancelled'], \n                        default: 'created' \n                },\n                razorpayOrderId: String,\n                razorpayPaymentId: String,\n                razorpaySignature: String,\n                deliveryDate: Date,\n                trackingStatus: [\n                        {\n                                stage: { \n                                        type: String, \n                                        enum: ['processing', 'shipped', 'in_transit', 'out_for_delivery', 'delivered'] \n                                },\n                                message: String,\n                                updatedAt: { type: Date, default: Date.now },\n                        }\n                ],\n                cancellationReason: String,\n                rating: {\n                        stars: { type: Number, min: 1, max: 5 },\n                        review: String,\n                        createdAt: { type: Date, default: Date.now },\n                },\n        },\n        { timestamps: true }\n);\n\nexport const Order: Model<IOrder> =\n        mongoose.models.Order || mongoose.model<IOrder>('Order', OrderSchema);\n","size_bytes":3075},"next js/myntra-clone/src/models/Product.ts":{"content":"import mongoose, { Schema, Document, Model } from 'mongoose';\n\nexport interface IReview {\n        user: mongoose.Types.ObjectId;\n        rating: number;\n        comment: string;\n        createdAt: Date;\n}\n\nexport interface IProduct extends Document {\n        title: string;\n        description: string;\n        price: number;\n        originalPrice?: number;\n        discount?: number;\n        images: string[];\n        category: string;\n        brand?: string;\n        type?: string;\n        rating?: number;\n        stock?: number;\n        sizes?: string[];\n        colors?: string[];\n        reviews?: IReview[];\n}\n\nconst ReviewSchema = new Schema<IReview>(\n        {\n                user: { type: Schema.Types.ObjectId, ref: 'User', required: true },\n                rating: { type: Number, min: 1, max: 5, required: true },\n                comment: { type: String, default: '' },\n                createdAt: { type: Date, default: Date.now },\n        },\n        { _id: false }\n);\n\nconst ProductSchema = new Schema<IProduct>(\n        {\n                title: { type: String, required: true },\n                description: { type: String, required: true },\n                price: { type: Number, required: true },\n                originalPrice: { type: Number },\n                discount: { type: Number },\n                images: { type: [String], default: [] },\n                category: { type: String, required: true, index: true },\n                brand: String,\n                type: String,\n                rating: { type: Number, default: 0 },\n                stock: { type: Number, default: 100 },\n                sizes: { type: [String], default: ['S', 'M', 'L', 'XL'] },\n                colors: { type: [String], default: ['Black', 'White', 'Blue', 'Red'] },\n                reviews: { type: [ReviewSchema], default: [] },\n        },\n        { timestamps: true }\n);\n\nexport const Product: Model<IProduct> =\n        mongoose.models.Product || mongoose.model<IProduct>('Product', ProductSchema);\n","size_bytes":2006},"next js/myntra-clone/src/models/User.ts":{"content":"import mongoose, { Schema, Document, Model } from 'mongoose';\nimport bcrypt from 'bcryptjs';\n\nexport interface IUser extends Document {\n        name: string;\n        email: string;\n        password?: string;\n        phone?: string;\n        addresses: { line1: string; line2?: string; city: string; state: string; zip: string; phone?: string }[];\n        paymentMethods: { type: string; last4: string; brand?: string; expiryMonth?: number; expiryYear?: number; upiId?: string }[];\n        comparePassword(candidate: string): Promise<boolean>;\n}\n\nconst UserSchema = new Schema<IUser>(\n        {\n                name: { type: String, required: true },\n                email: { type: String, required: true, unique: true, index: true },\n                password: { type: String, select: false },\n                phone: { type: String, unique: true, sparse: true },\n                addresses: [\n                        {\n                                line1: String,\n                                line2: String,\n                                city: String,\n                                state: String,\n                                zip: String,\n                                phone: String,\n                        },\n                ],\n                paymentMethods: [\n                        {\n                                type: { type: String, enum: ['card', 'upi', 'netbanking'], default: 'card' },\n                                last4: String,\n                                brand: String,\n                                expiryMonth: Number,\n                                expiryYear: Number,\n                                upiId: String,\n                        },\n                ],\n        },\n        { timestamps: true }\n);\n\nUserSchema.pre('save', async function (next) {\n        const user = this as IUser;\n        if (!user.password || !user.isModified('password')) return next();\n        const salt = await bcrypt.genSalt(10);\n        user.password = await bcrypt.hash(user.password, salt);\n        next();\n});\n\nUserSchema.methods.comparePassword = function (candidate: string) {\n        return bcrypt.compare(candidate, this.password);\n};\n\nexport const User: Model<IUser> =\n        mongoose.models.User || mongoose.model<IUser>('User', UserSchema);\n","size_bytes":2275},"next js/myntra-mobile/app/(tabs)/_layout.tsx":{"content":"import React from 'react';\nimport FontAwesome from '@expo/vector-icons/FontAwesome';\nimport { Link, Tabs } from 'expo-router';\nimport { Pressable } from 'react-native';\n\nimport Colors from '@/constants/Colors';\nimport { useColorScheme } from '@/components/useColorScheme';\nimport { useClientOnlyValue } from '@/components/useClientOnlyValue';\n\n// You can explore the built-in icon families and icons on the web at https://icons.expo.fyi/\nfunction TabBarIcon(props: {\n  name: React.ComponentProps<typeof FontAwesome>['name'];\n  color: string;\n}) {\n  return <FontAwesome size={28} style={{ marginBottom: -3 }} {...props} />;\n}\n\nexport default function TabLayout() {\n  const colorScheme = useColorScheme();\n\n  return (\n    <Tabs\n      screenOptions={{\n        tabBarActiveTintColor: Colors[colorScheme ?? 'light'].tint,\n        // Disable the static render of the header on web\n        // to prevent a hydration error in React Navigation v6.\n        headerShown: useClientOnlyValue(false, true),\n      }}>\n      <Tabs.Screen\n        name=\"index\"\n        options={{\n          title: 'Home',\n          tabBarIcon: ({ color }) => <TabBarIcon name=\"home\" color={color} />,\n        }}\n      />\n      <Tabs.Screen\n        name=\"wishlist\"\n        options={{\n          title: 'Wishlist',\n          tabBarIcon: ({ color }) => <TabBarIcon name=\"heart\" color={color} />,\n        }}\n      />\n      <Tabs.Screen\n        name=\"cart\"\n        options={{\n          title: 'Cart',\n          tabBarIcon: ({ color }) => <TabBarIcon name=\"shopping-cart\" color={color} />,\n        }}\n      />\n      <Tabs.Screen\n        name=\"profile\"\n        options={{\n          title: 'Profile',\n          tabBarIcon: ({ color }) => <TabBarIcon name=\"user\" color={color} />,\n        }}\n      />\n    </Tabs>\n  );\n}\n","size_bytes":1775},"next js/myntra-mobile/app/(tabs)/cart.tsx":{"content":"import React from 'react';\nimport { FlatList, Image, Pressable, Text, View } from 'react-native';\nimport { useCart } from '../../src/state/useCart';\nimport { useFocusEffect } from 'expo-router';\nimport { Link } from 'expo-router';\n\nexport default function CartScreen() {\n  const { items, increase, decrease, remove, total, refresh } = useCart();\n\n  useFocusEffect(\n    React.useCallback(() => {\n      let active = true;\n      (async () => { if (active) await refresh(); })();\n      return () => { active = false; };\n    }, [])\n  );\n\n  if (!items.length) {\n    return (\n      <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n        <Text>Your cart is empty</Text>\n      </View>\n    );\n  }\n\n  return (\n    <View style={{ flex: 1 }}>\n      <FlatList\n        data={items}\n        keyExtractor={(p) => p._id}\n        renderItem={({ item }) => (\n          <View style={{ flexDirection: 'row', gap: 12, padding: 12, borderBottomWidth: 1, borderColor: '#eee' }}>\n            {item.images?.[0] ? (\n              <Image source={{ uri: item.images[0] }} style={{ width: 72, height: 96, borderRadius: 8 }} />\n            ) : (\n              <View style={{ width: 72, height: 96, backgroundColor: '#eee', borderRadius: 8 }} />\n            )}\n            <View style={{ flex: 1, gap: 6 }}>\n              <Text numberOfLines={1} style={{ fontWeight: '600' }}>{item.title}</Text>\n              <Text>₹{item.price}</Text>\n              <View style={{ flexDirection: 'row', alignItems: 'center', gap: 12 }}>\n                <Pressable onPress={() => decrease(item._id)}><Text style={{ fontSize: 18 }}>-</Text></Pressable>\n                <Text>{item.quantity}</Text>\n                <Pressable onPress={() => increase(item._id)}><Text style={{ fontSize: 18 }}>+</Text></Pressable>\n              </View>\n              <Pressable onPress={() => remove(item._id)} style={{ paddingVertical: 6 }}>\n                <Text style={{ color: '#ff3f6c' }}>Remove</Text>\n              </Pressable>\n            </View>\n          </View>\n        )}\n      />\n      <View style={{ padding: 16, borderTopWidth: 1, borderColor: '#eee' }}>\n        <Text style={{ fontWeight: '700', marginBottom: 12 }}>Total: ₹{total()}</Text>\n        <Link href=\"/checkout/address\" asChild>\n          <Pressable style={{ backgroundColor: '#ff3f6c', padding: 14, borderRadius: 8, alignItems: 'center' }}>\n            <Text style={{ color: 'white', fontWeight: '600' }}>Proceed to Checkout</Text>\n          </Pressable>\n        </Link>\n      </View>\n    </View>\n  );\n}\n\n\n","size_bytes":2546},"next js/myntra-mobile/app/(tabs)/index.tsx":{"content":"import { useEffect, useState } from 'react';\nimport { View, Text, TextInput, TouchableOpacity, FlatList, Image, ScrollView, ActivityIndicator } from 'react-native';\nimport { Link, useRouter } from 'expo-router';\nimport { useWishlist } from '@/src/state/useWishlist';\nimport { useCart } from '@/src/state/useCart';\nimport { productService } from '@/src/api/product.service';\n\ntype Product = {\n  _id: string;\n  title: string;\n  price: number;\n  images: string[];\n  rating?: number;\n  category: string;\n  brand?: string;\n  sizes?: string[];\n};\n\nconst banners = [\n  'https://images.unsplash.com/photo-1441984904996-e0b6ba687e04?w=1200',\n  'https://images.unsplash.com/photo-1483985988355-763728e1935b?w=1200',\n  'https://images.unsplash.com/photo-1490481651871-ab68de25d43d?w=1200',\n];\n\nconst categories = [\n  { name: 'Men', slug: 'men' },\n  { name: 'Women', slug: 'women' },\n  { name: 'Kids', slug: 'kids' },\n  { name: 'Beauty', slug: 'beauty' },\n  { name: 'Home', slug: 'home' },\n];\n\nexport default function HomeScreen() {\n  const [products, setProducts] = useState<Product[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [query, setQuery] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('');\n  const { items: wished, add: wishAdd, remove: wishRemove } = useWishlist();\n  const { add: addToCart } = useCart();\n  const router = useRouter();\n\n  useEffect(() => {\n    loadProducts();\n  }, [selectedCategory]);\n\n  const loadProducts = async () => {\n    try {\n      setLoading(true);\n      const data = await productService.getAllProducts({\n        category: selectedCategory || undefined,\n      });\n      setProducts(data.products || data);\n    } catch (error) {\n      console.error('Failed to load products:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const filtered = products.filter((p) =>\n    query ? p.title.toLowerCase().includes(query.toLowerCase()) : true\n  );\n\n  if (loading) {\n    return (\n      <View className=\"flex-1 justify-center items-center bg-white\">\n        <ActivityIndicator size=\"large\" color=\"#FF3E6C\" />\n      </View>\n    );\n  }\n\n  return (\n    <ScrollView className=\"flex-1 bg-white\">\n      <View className=\"p-4\">\n        <Text className=\"text-3xl font-bold text-secondary mb-2\">Discover</Text>\n        <Text className=\"text-gray-600 mb-4\">Find your perfect style</Text>\n\n        <View className=\"mb-4\">\n          <View className=\"flex-row items-center bg-gray-100 rounded-lg px-4 py-3\">\n            <Text className=\"text-gray-400 mr-2\">🔍</Text>\n            <TextInput\n              placeholder=\"Search for products...\"\n              value={query}\n              onChangeText={setQuery}\n              className=\"flex-1 text-base\"\n            />\n          </View>\n        </View>\n\n        <ScrollView horizontal showsHorizontalScrollIndicator={false} className=\"mb-4\">\n          {banners.map((img, i) => (\n            <Image\n              key={i}\n              source={{ uri: img }}\n              className=\"w-80 h-40 rounded-2xl mr-3\"\n              resizeMode=\"cover\"\n            />\n          ))}\n        </ScrollView>\n\n        <Text className=\"text-xl font-bold text-secondary mb-3\">Categories</Text>\n        <ScrollView horizontal showsHorizontalScrollIndicator={false} className=\"mb-6\">\n          <TouchableOpacity\n            onPress={() => setSelectedCategory('')}\n            className={`px-5 py-2 rounded-full mr-2 ${\n              selectedCategory === '' ? 'bg-primary' : 'bg-gray-100'\n            }`}\n          >\n            <Text className={`font-medium ${selectedCategory === '' ? 'text-white' : 'text-gray-700'}`}>\n              All\n            </Text>\n          </TouchableOpacity>\n          {categories.map((cat) => (\n            <TouchableOpacity\n              key={cat.slug}\n              onPress={() => setSelectedCategory(cat.slug)}\n              className={`px-5 py-2 rounded-full mr-2 ${\n                selectedCategory === cat.slug ? 'bg-primary' : 'bg-gray-100'\n              }`}\n            >\n              <Text\n                className={`font-medium ${\n                  selectedCategory === cat.slug ? 'text-white' : 'text-gray-700'\n                }`}\n              >\n                {cat.name}\n              </Text>\n            </TouchableOpacity>\n          ))}\n        </ScrollView>\n\n        <View className=\"flex-row justify-between items-center mb-4\">\n          <Text className=\"text-xl font-bold text-secondary\">Products</Text>\n          <Text className=\"text-gray-600\">{filtered.length} items</Text>\n        </View>\n      </View>\n\n      <View className=\"px-2\">\n        <FlatList\n          data={filtered}\n          keyExtractor={(item) => item._id}\n          numColumns={2}\n          scrollEnabled={false}\n          columnWrapperStyle={{ gap: 8, paddingHorizontal: 8 }}\n          contentContainerStyle={{ gap: 8 }}\n          renderItem={({ item }) => {\n            const discount = Math.round(Math.random() * 40 + 20);\n            const isWished = wished.some((w) => w._id === item._id);\n\n            return (\n              <View className=\"flex-1 bg-white rounded-xl overflow-hidden border border-gray-200\">\n                <TouchableOpacity onPress={() => router.push(`/product/${item._id}`)}>\n                  {item.images?.[0] ? (\n                    <Image\n                      source={{ uri: item.images[0] }}\n                      className=\"w-full h-48\"\n                      resizeMode=\"cover\"\n                    />\n                  ) : (\n                    <View className=\"w-full h-48 bg-gray-200\" />\n                  )}\n                </TouchableOpacity>\n\n                <TouchableOpacity\n                  onPress={() =>\n                    isWished\n                      ? wishRemove(item._id)\n                      : wishAdd({\n                          _id: item._id,\n                          title: item.title,\n                          price: item.price,\n                          images: item.images,\n                        })\n                  }\n                  className=\"absolute top-2 right-2 bg-white/90 p-2 rounded-full\"\n                >\n                  <Text className=\"text-base\">{isWished ? '❤️' : '🤍'}</Text>\n                </TouchableOpacity>\n\n                <View className=\"p-3\">\n                  <Text numberOfLines={1} className=\"font-semibold text-secondary mb-1\">\n                    {item.title}\n                  </Text>\n                  {item.brand && (\n                    <Text className=\"text-xs text-gray-500 mb-2\">{item.brand}</Text>\n                  )}\n                  <View className=\"flex-row items-center mb-2\">\n                    <Text className=\"text-lg font-bold text-primary mr-2\">₹{item.price}</Text>\n                    <Text className=\"text-xs text-gray-400 line-through\">\n                      ₹{Math.round(item.price * 1.5)}\n                    </Text>\n                    <Text className=\"text-xs text-green-600 ml-2\">{discount}% OFF</Text>\n                  </View>\n                  {item.rating && (\n                    <View className=\"flex-row items-center mb-3\">\n                      <Text className=\"text-xs text-gray-600\">⭐ {item.rating}</Text>\n                    </View>\n                  )}\n                  <TouchableOpacity\n                    onPress={() => {\n                      addToCart({\n                        _id: item._id,\n                        title: item.title,\n                        price: item.price,\n                        images: item.images,\n                        brand: item.brand,\n                      });\n                    }}\n                    className=\"bg-primary py-2 rounded-lg\"\n                  >\n                    <Text className=\"text-white text-center font-semibold\">Add to Cart</Text>\n                  </TouchableOpacity>\n                </View>\n              </View>\n            );\n          }}\n        />\n      </View>\n    </ScrollView>\n  );\n}\n","size_bytes":7920},"next js/myntra-mobile/app/(tabs)/profile.tsx":{"content":"import React, { useEffect, useState } from 'react';\nimport { Pressable, Text, TextInput, View, Alert } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport api from '../../src/api/client';\nimport { router } from 'expo-router';\n\nexport default function ProfileScreen() {\n  const [me, setMe] = useState<{ id: string; name: string; email: string } | null>(null);\n  const [address, setAddress] = useState('');\n\n  useEffect(() => {\n    api.get('/api/user/me').then(r => setMe(r.data)).catch(() => {});\n  }, []);\n\n  const logout = async () => {\n    await AsyncStorage.removeItem('token');\n    try { await api.post('/api/auth/logout'); } catch {}\n    Alert.alert('Logged out');\n    router.replace('/login');\n  };\n\n  const saveAddress = async () => {\n    try {\n      await api.post('/api/user/address', { address });\n      Alert.alert('Saved');\n    } catch (e: any) {\n      Alert.alert('Error', e.message || 'Failed to save');\n    }\n  };\n\n  return (\n    <View style={{ flex: 1, padding: 16, gap: 16 }}>\n      {me ? (\n        <>\n          <Text style={{ fontSize: 18, fontWeight: '700' }}>{me.name}</Text>\n          <Text>{me.email}</Text>\n          <Text style={{ marginTop: 16, fontWeight: '600' }}>Address</Text>\n          <TextInput value={address} onChangeText={setAddress} placeholder=\"Type your address\" style={{ borderWidth: 1, borderColor: '#ddd', padding: 12, borderRadius: 8 }} />\n          <Pressable onPress={saveAddress} style={{ backgroundColor: '#111', padding: 12, borderRadius: 8, alignItems: 'center' }}>\n            <Text style={{ color: 'white' }}>Save</Text>\n          </Pressable>\n        </>\n      ) : (\n        <Text>Please login to view profile</Text>\n      )}\n      <Pressable onPress={logout} style={{ padding: 12, borderRadius: 8, alignItems: 'center', borderWidth: 1, borderColor: '#eee' }}>\n        <Text>Logout</Text>\n      </Pressable>\n    </View>\n  );\n}\n\n\n","size_bytes":1926},"next js/myntra-mobile/app/(tabs)/two.tsx":{"content":"import { StyleSheet } from 'react-native';\n\nimport EditScreenInfo from '@/components/EditScreenInfo';\nimport { Text, View } from '@/components/Themed';\n\nexport default function TabTwoScreen() {\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Tab Two</Text>\n      <View style={styles.separator} lightColor=\"#eee\" darkColor=\"rgba(255,255,255,0.1)\" />\n      <EditScreenInfo path=\"app/(tabs)/two.tsx\" />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  separator: {\n    marginVertical: 30,\n    height: 1,\n    width: '80%',\n  },\n});\n","size_bytes":715},"next js/myntra-mobile/app/(tabs)/wishlist.tsx":{"content":"import React, { useEffect } from 'react';\nimport { FlatList, Image, Pressable, Text, View } from 'react-native';\nimport { useWishlist } from '../../src/state/useWishlist';\nimport { useFocusEffect } from 'expo-router';\n\nexport default function WishlistScreen() {\n  const { items, remove, refresh } = useWishlist();\n\n  useFocusEffect(\n    React.useCallback(() => {\n      let active = true;\n      (async () => { if (active) await refresh(); })();\n      return () => { active = false; };\n    }, [])\n  );\n\n  if (!items.length) {\n    return (\n      <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n        <Text>Your wishlist is empty</Text>\n      </View>\n    );\n  }\n\n  return (\n    <FlatList\n      data={items}\n      keyExtractor={(p) => p._id}\n      renderItem={({ item }) => (\n        <View style={{ flexDirection: 'row', gap: 12, padding: 12, borderBottomWidth: 1, borderColor: '#eee' }}>\n          {item.images?.[0] ? (\n            <Image source={{ uri: item.images[0] }} style={{ width: 72, height: 96, borderRadius: 8 }} />\n          ) : (\n            <View style={{ width: 72, height: 96, backgroundColor: '#eee', borderRadius: 8 }} />\n          )}\n          <View style={{ flex: 1, gap: 6 }}>\n            <Text numberOfLines={1} style={{ fontWeight: '600' }}>{item.title}</Text>\n            <Text>₹{item.price}</Text>\n            <Pressable onPress={() => remove(item._id)} style={{ paddingVertical: 6 }}>\n              <Text style={{ color: '#ff3f6c' }}>Remove</Text>\n            </Pressable>\n          </View>\n        </View>\n      )}\n    />\n  );\n}\n\n\n","size_bytes":1584},"next js/myntra-mobile/app/checkout/_layout.tsx":{"content":"import { Stack } from 'expo-router';\n\nexport default function CheckoutLayout() {\n  return (\n    <Stack>\n      <Stack.Screen name=\"index\" options={{ title: 'Checkout', headerShown: true }} />\n      <Stack.Screen name=\"address\" options={{ title: 'Address', headerShown: true }} />\n    </Stack>\n  );\n}\n\n\n","size_bytes":301},"next js/myntra-mobile/app/checkout/address.tsx":{"content":"import React, { useEffect, useState } from 'react';\nimport { Alert, Pressable, ScrollView, Text, TextInput, View } from 'react-native';\nimport api from '../../src/api/client';\nimport { router } from 'expo-router';\n\nexport default function AddressScreen() {\n  const [address, setAddress] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    api.get('/api/user/me').then((r) => {\n      const last = (r.data?.addresses || [])[0];\n      if (last) setAddress(last);\n    }).catch(() => {});\n  }, []);\n\n  const save = async () => {\n    try {\n      setLoading(true);\n      await api.post('/api/user/address', { address });\n      router.replace('/checkout');\n    } catch (e: any) {\n      Alert.alert('Error', e?.message || 'Failed to save address');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <ScrollView contentContainerStyle={{ padding: 16 }}>\n      <Text style={{ fontSize: 18, fontWeight: '700', marginBottom: 12 }}>Delivery Address</Text>\n      <TextInput\n        placeholder=\"House no, Street, City, Pincode\"\n        multiline\n        value={address}\n        onChangeText={setAddress}\n        style={{ minHeight: 120, borderWidth: 1, borderColor: '#ddd', borderRadius: 8, padding: 12, textAlignVertical: 'top' }}\n      />\n      <Pressable onPress={save} disabled={loading || !address.trim()} style={{ marginTop: 16, backgroundColor: '#ff3f6c', padding: 14, borderRadius: 8, alignItems: 'center' }}>\n        <Text style={{ color: 'white', fontWeight: '600' }}>{loading ? 'Saving...' : 'Continue to Payment'}</Text>\n      </Pressable>\n    </ScrollView>\n  );\n}\n\n\n","size_bytes":1619},"next js/myntra-mobile/app/checkout/index.tsx":{"content":"import React, { useState } from 'react';\nimport { Alert, Platform, Pressable, Text, View } from 'react-native';\nimport api from '../../src/api/client';\nimport { useCart } from '../../src/state/useCart';\n\nexport default function CheckoutScreen() {\n  const { items, total, clear } = useCart();\n  const [loading, setLoading] = useState(false);\n\n  const startPayment = async () => {\n    try {\n      setLoading(true);\n      const orderRes = await api.post('/api/checkout/create-order', { amount: total() });\n      const order = orderRes.data;\n      if (Platform.select({ web: true })) {\n        Alert.alert('Mock Payment', `Order created: ${order.orderId}`);\n        await api.post('/api/checkout/verify', {\n          razorpay_order_id: order.orderId,\n          razorpay_payment_id: 'pay_mock',\n          razorpay_signature: 'sig_mock',\n        });\n      } else {\n        Alert.alert('Payment', 'Razorpay SDK integration to be added in dev build');\n      }\n      clear();\n      Alert.alert('Success', 'Payment verified!');\n    } catch (e: any) {\n      Alert.alert('Error', e?.message || 'Payment failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <View style={{ flex: 1, padding: 16 }}>\n      <Text style={{ fontSize: 18, fontWeight: '700', marginBottom: 12 }}>Checkout</Text>\n      <Text style={{ marginBottom: 16 }}>Total: ₹{total()}</Text>\n      <Pressable onPress={startPayment} disabled={loading || !items.length} style={{ backgroundColor: '#ff3f6c', padding: 14, borderRadius: 8, alignItems: 'center' }}>\n        <Text style={{ color: 'white', fontWeight: '600' }}>{loading ? 'Processing...' : 'Pay with Razorpay'}</Text>\n      </Pressable>\n    </View>\n  );\n}\n\n\n","size_bytes":1692},"next js/myntra-mobile/app/orders/[id].tsx":{"content":"import React from 'react';\nimport { Text, View } from 'react-native';\nimport { useLocalSearchParams } from 'expo-router';\n\nexport default function OrderDetail() {\n  const { id } = useLocalSearchParams<{ id: string }>();\n  return (\n    <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n      <Text>Order #{id}</Text>\n    </View>\n  );\n}\n\n\n","size_bytes":362},"next js/myntra-mobile/app/product/[id].tsx":{"content":"import React, { useEffect, useState } from 'react';\nimport { useLocalSearchParams } from 'expo-router';\nimport { Image, ScrollView, Text, View, Pressable, TextInput } from 'react-native';\nimport api from '../../src/api/client';\nimport { showToast } from '../../src/ui/toast';\nimport { useCart } from '../../src/state/useCart';\nimport { useWishlist } from '../../src/state/useWishlist';\n\ntype Product = {\n  _id: string;\n  title: string;\n  description: string;\n  price: number;\n  images: string[];\n  sizes?: string[];\n  colors?: string[];\n  rating?: number;\n};\n\nexport default function ProductDetail() {\n  const { id } = useLocalSearchParams<{ id: string }>();\n  const [product, setProduct] = useState<Product | null>(null);\n  const [size, setSize] = useState<string>('');\n  const [review, setReview] = useState('');\n  const [rating, setRating] = useState(5);\n  const { add: addToCart } = useCart();\n  const { items: wished, add: wishAdd, remove: wishRemove } = useWishlist();\n\n  useEffect(() => {\n    if (!id) return;\n    let mounted = true;\n    api.get(`/api/products/${id}`).then(r => {\n      if (mounted) setProduct(r.data);\n    });\n    return () => {\n      mounted = false;\n    };\n  }, [id]);\n\n  if (!product) {\n    return (\n      <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n        <Text>Loading...</Text>\n      </View>\n    );\n  }\n\n  return (\n    <ScrollView contentContainerStyle={{ padding: 16 }}>\n      {product.images?.[0] && (\n        <Image source={{ uri: product.images[0] }} style={{ width: '100%', aspectRatio: 3/4, borderRadius: 12, marginBottom: 16 }} />\n      )}\n      <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' }}>\n        <Text style={{ fontSize: 20, fontWeight: '700', marginBottom: 8 }}>{product.title}</Text>\n        {(() => { const isWished = !!wished.find((w) => w._id === product._id); return (\n          <Pressable onPress={() => (isWished ? wishRemove(product._id) : wishAdd({_id:product._id,title:product.title,price:product.price,images:product.images}))}>\n            <Text style={{ fontSize: 20, color: isWished ? '#ff3f6c' : '#999' }}>{isWished ? '❤️' : '♡'}</Text>\n          </Pressable>\n        ); })()}\n      </View>\n      <Text style={{ fontSize: 14, color: '#666', marginBottom: 6 }}>{product.rating || 0} ★</Text>\n      {(() => { const original = Math.round(product.price * 1.25); const discount = Math.max(0, Math.round(((original - product.price)/original)*100)); return (\n        <View style={{ flexDirection: 'row', alignItems: 'center', marginBottom: 12 }}>\n          <Text style={{ fontSize: 18, color: '#26a541', fontWeight: '700' }}>₹{product.price}</Text>\n          <Text style={{ marginLeft: 8, color: '#999', textDecorationLine: 'line-through' }}>₹{original}</Text>\n          <Text style={{ marginLeft: 8, color: '#26a541' }}>{discount}% OFF</Text>\n        </View>\n      ); })()}\n      <Text style={{ color: '#444', marginBottom: 16 }}>{product.description}</Text>\n\n      {/* Size selector */}\n      <View style={{ marginBottom: 12 }}>\n        <Text style={{ fontWeight: '600', marginBottom: 8 }}>Select Size</Text>\n        <View style={{ flexDirection: 'row', flexWrap: 'wrap', gap: 8 }}>\n          {(product.sizes || ['S','M','L','XL','XXL']).map((s) => (\n            <Pressable key={s} onPress={() => setSize(s)} style={{ paddingHorizontal: 12, height: 36, borderWidth: 1, borderColor: size === s ? '#ff3f6c' : '#ddd', borderRadius: 18, alignItems: 'center', justifyContent: 'center' }}>\n              <Text style={{ color: size === s ? '#ff3f6c' : '#111' }}>{s}</Text>\n            </Pressable>\n          ))}\n        </View>\n      </View>\n\n      <View style={{ flexDirection: 'row', gap: 10, marginBottom: 16 }}>\n        <Pressable onPress={() => { addToCart({ _id: product._id, title: product.title, price: product.price, images: product.images }, 1); showToast('Added to cart'); }} style={{ flex: 1, backgroundColor: '#ff3f6c', padding: 14, borderRadius: 8, alignItems: 'center' }}>\n          <Text style={{ color: 'white', fontWeight: '600' }}>Add to cart</Text>\n        </Pressable>\n      </View>\n\n      {/* Reviews */}\n      <View style={{ marginTop: 8 }}>\n        <Text style={{ fontWeight: '700', marginBottom: 8 }}>Reviews</Text>\n        <View style={{ gap: 8, marginBottom: 12 }}>\n          <TextInput placeholder=\"Write your review\" value={review} onChangeText={setReview} style={{ borderWidth: 1, borderColor: '#ddd', borderRadius: 8, padding: 10 }} />\n          <ScrollView horizontal showsHorizontalScrollIndicator={false}>\n            {[1,2,3,4,5].map((r) => (\n              <Pressable key={r} onPress={() => setRating(r)} style={{ paddingHorizontal: 10, height: 32, borderWidth: 1, borderColor: rating === r ? '#ff3f6c' : '#ddd', borderRadius: 16, alignItems: 'center', justifyContent: 'center', marginRight: 8 }}>\n                <Text style={{ color: rating === r ? '#ff3f6c' : '#111' }}>{r} ★</Text>\n              </Pressable>\n            ))}\n          </ScrollView>\n          <Pressable onPress={async () => { try { await api.post(`/api/products/${product._id}/reviews`, { rating, comment: review }); setReview(''); } catch (e: any) { /* if unauthorized, inform user */ } }} style={{ backgroundColor: '#111', padding: 12, borderRadius: 8, alignItems: 'center' }}>\n            <Text style={{ color: 'white' }}>Submit review</Text>\n          </Pressable>\n        </View>\n      </View>\n    </ScrollView>\n  );\n}\n\n\n","size_bytes":5473},"next js/myntra-mobile/components/__tests__/StyledText-test.js":{"content":"import * as React from 'react';\nimport renderer from 'react-test-renderer';\n\nimport { MonoText } from '../StyledText';\n\nit(`renders correctly`, () => {\n  const tree = renderer.create(<MonoText>Snapshot test!</MonoText>).toJSON();\n\n  expect(tree).toMatchSnapshot();\n});\n","size_bytes":269},"next js/myntra-mobile/src/api/client.ts":{"content":"import axios from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { Platform } from 'react-native';\nimport Constants from 'expo-constants';\n\nfunction resolveDefaultBaseUrl(): string {\n  const fromEnv = process.env.EXPO_PUBLIC_API_BASE_URL;\n  if (fromEnv && fromEnv.trim().length > 0) return fromEnv;\n\n  const fromConfig = (Constants?.expoConfig as any)?.extra?.apiBaseUrl as string | undefined;\n  if (fromConfig && fromConfig.trim().length > 0) return fromConfig;\n\n  if (Platform.OS === 'android') {\n    return 'http://10.0.2.2:5000';\n  }\n  return 'http://localhost:5000';\n}\n\nconst apiBaseURL = resolveDefaultBaseUrl();\n\nexport const api = axios.create({\n  baseURL: apiBaseURL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\napi.interceptors.request.use(async (config) => {\n  const token = await AsyncStorage.getItem('authToken');\n  if (token) {\n    config.headers = config.headers || {};\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\napi.interceptors.response.use(\n  (response) => {\n    const authToken = response.headers['x-auth-token'];\n    if (authToken) {\n      AsyncStorage.setItem('authToken', authToken);\n    }\n    return response;\n  },\n  (error) => {\n    if (error.response?.status === 401) {\n      AsyncStorage.removeItem('authToken');\n      AsyncStorage.removeItem('user');\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default api;\n","size_bytes":1441},"next js/myntra-mobile/src/state/useCart.ts":{"content":"import { useEffect, useState } from 'react';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nexport type CartItem = {\n  _id: string;\n  title: string;\n  price: number;\n  images: string[];\n  quantity: number;\n  size?: string;\n  brand?: string;\n  category?: string;\n};\n\nconst STORAGE_KEY = 'cart';\n\nexport function useCart() {\n  const [items, setItems] = useState<CartItem[]>([]);\n\n  useEffect(() => {\n    AsyncStorage.getItem(STORAGE_KEY).then((v) => {\n      if (v) setItems(JSON.parse(v));\n    });\n  }, []);\n\n  useEffect(() => {\n    AsyncStorage.setItem(STORAGE_KEY, JSON.stringify(items));\n  }, [items]);\n\n  function add(item: Omit<CartItem, 'quantity'>, qty = 1) {\n    setItems((prev) => {\n      const key = `${item._id}_${item.size || 'default'}`;\n      const existing = prev.find((p) => `${p._id}_${p.size || 'default'}` === key);\n      if (existing) {\n        return prev.map((p) => \n          `${p._id}_${p.size || 'default'}` === key \n            ? { ...p, quantity: p.quantity + qty } \n            : p\n        );\n      }\n      return [{ ...item, quantity: qty }, ...prev];\n    });\n  }\n\n  function increase(id: string, size?: string) {\n    setItems((prev) => prev.map((p) => \n      (p._id === id && p.size === size) ? { ...p, quantity: p.quantity + 1 } : p\n    ));\n  }\n\n  function decrease(id: string, size?: string) {\n    setItems((prev) => prev.map((p) => \n      (p._id === id && p.size === size) ? { ...p, quantity: Math.max(1, p.quantity - 1) } : p\n    ));\n  }\n\n  function remove(id: string, size?: string) {\n    setItems((prev) => prev.filter((p) => !(p._id === id && p.size === size)));\n  }\n\n  function clear() {\n    setItems([]);\n  }\n\n  function total() {\n    return items.reduce((sum, i) => sum + i.price * i.quantity, 0);\n  }\n\n  function count() {\n    return items.reduce((sum, i) => sum + i.quantity, 0);\n  }\n\n  async function refresh() {\n    const v = await AsyncStorage.getItem(STORAGE_KEY);\n    setItems(v ? JSON.parse(v) : []);\n  }\n\n  return { items, add, increase, decrease, remove, clear, total, count, refresh };\n}\n\n\n","size_bytes":2063},"next js/myntra-mobile/src/state/useWishlist.ts":{"content":"import { useEffect, useState } from 'react';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nexport type WishlistItem = {\n  _id: string;\n  title: string;\n  price: number;\n  images: string[];\n};\n\nconst STORAGE_KEY = 'wishlist';\n\nexport function useWishlist() {\n  const [items, setItems] = useState<WishlistItem[]>([]);\n\n  useEffect(() => {\n    AsyncStorage.getItem(STORAGE_KEY).then((v) => {\n      if (v) setItems(JSON.parse(v));\n    });\n  }, []);\n\n  useEffect(() => {\n    AsyncStorage.setItem(STORAGE_KEY, JSON.stringify(items));\n  }, [items]);\n\n  function add(item: WishlistItem) {\n    setItems((prev) => (prev.find((p) => p._id === item._id) ? prev : [item, ...prev]));\n  }\n  function remove(id: string) {\n    setItems((prev) => prev.filter((p) => p._id !== id));\n  }\n  async function refresh() {\n    const v = await AsyncStorage.getItem(STORAGE_KEY);\n    setItems(v ? JSON.parse(v) : []);\n  }\n\n  return { items, add, remove, refresh };\n}\n\n\n","size_bytes":966},"next js/myntra-mobile/src/ui/toast.ts":{"content":"import { Alert, Platform, ToastAndroid } from 'react-native';\n\nexport function showToast(message: string) {\n  if (Platform.OS === 'android') {\n    try { ToastAndroid.show(message, ToastAndroid.SHORT); return; } catch {}\n  }\n  Alert.alert('', message);\n}\n\n\n","size_bytes":256},"next js/myntra-mobile/src/utils/dates.ts":{"content":"export function formatRelativeDelivery(daysFromNow = 4): string {\n  const target = new Date(Date.now() + daysFromNow * 24 * 60 * 60 * 1000);\n  const today = new Date();\n  const diffDays = Math.floor((target.getTime() - new Date(today.getFullYear(), today.getMonth(), today.getDate()).getTime()) / (24*60*60*1000));\n  if (diffDays === 0) return 'Today';\n  if (diffDays === 1) return 'Tomorrow';\n  return target.toLocaleDateString(undefined, { weekday: 'long' });\n}\n\n\n","size_bytes":466},"next js/myntra-clone/src/app/cart/page.tsx":{"content":"'use client';\n\nimport { useEffect, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport Image from 'next/image';\nimport { useRouter } from 'next/navigation';\n\ninterface CartItem {\n  productId: string;\n  title: string;\n  price: number;\n  image: string;\n  quantity: number;\n  size?: string;\n  brand?: string;\n}\n\nexport default function CartPage() {\n  const [items, setItems] = useState<CartItem[]>([]);\n  const router = useRouter();\n\n  function load() {\n    const raw = localStorage.getItem('cart') || '[]';\n    setItems(JSON.parse(raw));\n  }\n\n  useEffect(() => {\n    load();\n  }, []);\n\n  function setAndSave(next: CartItem[]) {\n    setItems(next);\n    localStorage.setItem('cart', JSON.stringify(next));\n  }\n\n  function inc(id: string) {\n    const next = items.map((i) => (i.productId === id ? { ...i, quantity: i.quantity + 1 } : i));\n    setAndSave(next);\n  }\n\n  function dec(id: string) {\n    const next = items\n      .map((i) => (i.productId === id ? { ...i, quantity: Math.max(1, i.quantity - 1) } : i))\n      .filter((i) => i.quantity > 0);\n    setAndSave(next);\n  }\n\n  function removeItem(id: string) {\n    setAndSave(items.filter((i) => i.productId !== id));\n  }\n\n  const subtotal = items.reduce((sum, i) => sum + i.price * i.quantity, 0);\n  const discount = Math.round(subtotal * 0.15);\n  const deliveryFee = subtotal > 1000 ? 0 : 50;\n  const total = subtotal - discount + deliveryFee;\n\n  async function checkout() {\n    router.push('/checkout');\n  }\n\n  if (items.length === 0) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"text-center max-w-md\"\n        >\n          <div className=\"w-48 h-48 mx-auto mb-8 relative\">\n            <Image\n              src=\"https://images.unsplash.com/photo-1472851294608-062f824d29cc?q=80&w=800&auto=format&fit=crop\"\n              alt=\"Empty bag\"\n              fill\n              className=\"object-contain opacity-50\"\n            />\n          </div>\n          <h2 className=\"text-3xl font-bold text-white mb-4\">Hey, it feels so light!</h2>\n          <p className=\"text-white/60 mb-8\">There is nothing in your bag. Let's add some items.</p>\n          <button\n            onClick={() => router.push('/')}\n            className=\"bg-[#0B7FB3] text-white px-8 py-3 rounded-md font-semibold hover:bg-[#0B7FB3]/90 transition-colors\"\n          >\n            Continue Shopping\n          </button>\n        </motion.div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen py-8\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"grid lg:grid-cols-3 gap-8\">\n          <div className=\"lg:col-span-2\">\n            <div className=\"mb-6\">\n              <h1 className=\"text-2xl font-bold text-white\">Shopping Bag</h1>\n              <p className=\"text-white/60 mt-1\">{items.length} {items.length === 1 ? 'item' : 'items'}</p>\n            </div>\n\n            <div className=\"space-y-4\">\n              {items.map((item, index) => (\n                <motion.div\n                  key={item.productId}\n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ delay: index * 0.1 }}\n                  className=\"bg-white/5 backdrop-blur-sm rounded-2xl p-4 border border-white/10\"\n                >\n                  <div className=\"flex gap-4\">\n                    <div className=\"relative w-28 h-36 flex-shrink-0 rounded-lg overflow-hidden\">\n                      <Image\n                        src={item.image || 'https://images.unsplash.com/photo-1520975422284-5f573fb8c642?q=80&w=800&auto=format&fit=crop'}\n                        alt={item.title}\n                        fill\n                        className=\"object-cover\"\n                      />\n                    </div>\n\n                    <div className=\"flex-1 flex flex-col\">\n                      <div className=\"flex justify-between\">\n                        <div className=\"flex-1\">\n                          <p className=\"text-sm text-white/60 mb-1\">{item.brand || 'Brand'}</p>\n                          <h3 className=\"font-semibold text-white mb-2 line-clamp-2\">{item.title}</h3>\n                          {item.size && (\n                            <p className=\"text-sm text-white/60 mb-2\">Size: {item.size}</p>\n                          )}\n                        </div>\n                        <button\n                          onClick={() => removeItem(item.productId)}\n                          className=\"text-white/40 hover:text-red-500 transition-colors h-6\"\n                        >\n                          <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                          </svg>\n                        </button>\n                      </div>\n\n                      <div className=\"mt-auto flex items-center justify-between\">\n                        <div className=\"flex items-center gap-3 bg-white/10 rounded-full px-3 py-1\">\n                          <button\n                            onClick={() => dec(item.productId)}\n                            className=\"text-white/60 hover:text-white transition-colors w-6 h-6 flex items-center justify-center\"\n                          >\n                            <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M20 12H4\" />\n                            </svg>\n                          </button>\n                          <span className=\"text-white font-semibold w-8 text-center\">{item.quantity}</span>\n                          <button\n                            onClick={() => inc(item.productId)}\n                            className=\"text-white/60 hover:text-white transition-colors w-6 h-6 flex items-center justify-center\"\n                          >\n                            <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n                            </svg>\n                          </button>\n                        </div>\n\n                        <div className=\"text-right\">\n                          <p className=\"text-lg font-bold text-white\">₹{item.price * item.quantity}</p>\n                          <p className=\"text-sm text-white/40 line-through\">₹{Math.round(item.price * item.quantity * 1.4)}</p>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </motion.div>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"lg:col-span-1\">\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.3 }}\n              className=\"bg-white/5 backdrop-blur-sm rounded-2xl p-6 border border-white/10 sticky top-24\"\n            >\n              <h2 className=\"text-xl font-bold text-white mb-6\">Price Details</h2>\n              \n              <div className=\"space-y-4 mb-6\">\n                <div className=\"flex justify-between text-white/80\">\n                  <span>Total MRP</span>\n                  <span>₹{subtotal}</span>\n                </div>\n                <div className=\"flex justify-between text-[#26a541]\">\n                  <span>Discount on MRP</span>\n                  <span>-₹{discount}</span>\n                </div>\n                <div className=\"flex justify-between text-white/80\">\n                  <span>Delivery Fee</span>\n                  <span className={deliveryFee === 0 ? 'text-[#26a541]' : ''}>\n                    {deliveryFee === 0 ? 'FREE' : `₹${deliveryFee}`}\n                  </span>\n                </div>\n                <div className=\"border-t border-white/10 pt-4 flex justify-between text-lg font-bold text-white\">\n                  <span>Total Amount</span>\n                  <span>₹{total}</span>\n                </div>\n              </div>\n\n              <button\n                onClick={checkout}\n                className=\"w-full bg-[#0B7FB3] hover:bg-[#0B7FB3]/90 text-white py-3 rounded-lg font-semibold transition-colors mb-4\"\n              >\n                Place Order\n              </button>\n\n              <div className=\"pt-4 border-t border-white/10\">\n                <p className=\"text-sm text-white/60 mb-3\">We Accept:</p>\n                <div className=\"flex flex-wrap gap-2\">\n                  {['Visa', 'Mastercard', 'Amex', 'UPI', 'Paytm', 'COD'].map((method) => (\n                    <div key={method} className=\"bg-white/10 px-3 py-1 rounded text-xs text-white/60\">\n                      {method}\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </motion.div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":9170},"next js/myntra-clone/src/app/categories/page.tsx":{"content":"'use client';\n\nimport Image from 'next/image';\nimport Link from 'next/link';\nimport { useEffect, useMemo, useState } from 'react';\nimport { useSearchParams } from 'next/navigation';\n\nasync function fetchProductsClient() {\n\tconst res = await fetch('/api/products');\n\treturn res.json();\n}\n\nfunction formatDelivery(daysFromNow = 4) {\n\tconst d = new Date(Date.now() + daysFromNow * 24 * 60 * 60 * 1000);\n\treturn d.toLocaleDateString();\n}\n\nexport default function CategoriesPage() {\n\tconst searchParams = useSearchParams();\n\tconst initialCategory = searchParams.get('c') || '';\n\tconst [products, setProducts] = useState<any[]>([]);\n\tconst [wishlist, setWishlist] = useState<string[]>([]);\n\tconst [category, setCategory] = useState<string>(initialCategory);\n\tconst [sort, setSort] = useState<string>('');\n\tconst [size, setSize] = useState<string>('');\n\tconst [color, setColor] = useState<string>('');\n\tconst [minRating, setMinRating] = useState<number>(0);\n\n\tuseEffect(() => { fetchProductsClient().then(setProducts); }, []);\n\tuseEffect(() => { const raw = localStorage.getItem('wishlist') || '[]'; setWishlist(JSON.parse(raw)); }, []);\n\n\tconst filtered = useMemo(() => {\n\t\tlet list = [...products];\n\t\tif (category) list = list.filter((p) => (p.category || '').toLowerCase() === category.toLowerCase());\n\t\tif (size) list = list.filter((p) => (p.sizes || []).includes(size));\n\t\tif (color) list = list.filter((p) => (p.colors || []).includes(color));\n\t\tif (minRating) list = list.filter((p) => (p.rating || 0) >= minRating);\n\t\tif (sort === 'price-asc') list.sort((a, b) => a.price - b.price);\n\t\tif (sort === 'price-desc') list.sort((a, b) => b.price - a.price);\n\t\tif (sort === 'newest') list.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n\t\tif (sort === 'oldest') list.sort((a, b) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime());\n\t\treturn list;\n\t}, [products, category, sort, size, color, minRating]);\n\n\tfunction resetFilters() { setCategory(initialCategory); setSort(''); setSize(''); setColor(''); setMinRating(0); }\n\tfunction toggleWish(e: React.MouseEvent, id: string) {\n\t\te.preventDefault();\n\t\tconst exists = wishlist.includes(id);\n\t\tconst next = exists ? wishlist.filter((x) => x !== id) : wishlist.concat(id);\n\t\tlocalStorage.setItem('wishlist', JSON.stringify(next));\n\t\tsetWishlist(next);\n\t}\n\tfunction addToCart(e: React.MouseEvent, p: any) {\n\t\te.preventDefault();\n\t\tconst raw = localStorage.getItem('cart') || '[]';\n\t\tconst cart = JSON.parse(raw) as any[];\n\t\tconst idx = cart.findIndex((c) => c.productId === p._id && (!c.size));\n\t\tif (idx >= 0) { cart[idx].quantity += 1; } else { cart.push({ productId: p._id, title: p.title, price: p.price, image: p.images?.[0] || '', quantity: 1 }); }\n\t\tlocalStorage.setItem('cart', JSON.stringify(cart));\n\t\twindow.dispatchEvent(new StorageEvent('storage', { key: 'cart' }));\n\t}\n\n\treturn (\n\t\t<div className=\"space-y-8\">\n\t\t\t<h1 className=\"text-2xl font-semibold\">{initialCategory ? `${initialCategory} Category` : 'Categories'}</h1>\n\t\t\t<section className=\"grid grid-cols-1 md:grid-cols-12 gap-6\">\n\t\t\t\t<aside className=\"md:col-span-3 card p-4 h-fit sticky top-20\">\n\t\t\t\t\t<h3 className=\"font-semibold mb-3\">Filters</h3>\n\t\t\t\t\t<label className=\"text-sm text-white/80\">Category</label>\n\t\t\t\t\t<select value={category} onChange={(e) => setCategory(e.target.value)} className=\"w-full bg-neutral-900 border border-white/10 rounded-md px-2 py-2 mb-3\">\n\t\t\t\t\t\t<option value=\"\">All</option>\n\t\t\t\t\t\t<option>Men</option>\n\t\t\t\t\t\t<option>Women</option>\n\t\t\t\t\t\t<option>Kids</option>\n\t\t\t\t\t</select>\n\t\t\t\t\t<label className=\"text-sm text-white/80\">Size</label>\n\t\t\t\t\t<select value={size} onChange={(e) => setSize(e.target.value)} className=\"w-full bg-neutral-900 border border-white/10 rounded-md px-2 py-2 mb-3\">\n\t\t\t\t\t\t<option value=\"\">All</option>\n\t\t\t\t\t\t{['XS','S','M','L','XL','XXL'].map((s) => <option key={s}>{s}</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t\t<label className=\"text-sm text-white/80\">Color</label>\n\t\t\t\t\t<select value={color} onChange={(e) => setColor(e.target.value)} className=\"w-full bg-neutral-900 border border-white/10 rounded-md px-2 py-2 mb-3\">\n\t\t\t\t\t\t<option value=\"\">All</option>\n\t\t\t\t\t\t{['Black','White','Blue','Red','Green','Yellow'].map((c) => <option key={c}>{c}</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t\t<label className=\"text-sm text-white/80\">Minimum Rating</label>\n\t\t\t\t\t<select value={minRating} onChange={(e) => setMinRating(parseInt(e.target.value))} className=\"w-full bg-neutral-900 border border-white/10 rounded-md px-2 py-2 mb-3\">\n\t\t\t\t\t\t{[0,1,2,3,4,5].map((r) => <option key={r} value={r}>{r}+</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t\t<label className=\"text-sm text-white/80\">Sort by</label>\n\t\t\t\t\t<select value={sort} onChange={(e) => setSort(e.target.value)} className=\"w-full bg-neutral-900 border border-white/10 rounded-md px-2 py-2 mb-3\">\n\t\t\t\t\t\t<option value=\"\">Featured</option>\n\t\t\t\t\t\t<option value=\"price-asc\">Price: Low to High</option>\n\t\t\t\t\t\t<option value=\"price-desc\">Price: High to Low</option>\n\t\t\t\t\t\t<option value=\"newest\">Newest</option>\n\t\t\t\t\t\t<option value=\"oldest\">Oldest</option>\n\t\t\t\t\t</select>\n\t\t\t\t\t<button className=\"btn btn-outline w-full\" onClick={resetFilters}>Reset</button>\n\t\t\t\t</aside>\n\t\t\t\t<div className=\"md:col-span-9\">\n\t\t\t\t\t<div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n\t\t\t\t\t\t{filtered.map((p: any) => {\n\t\t\t\t\t\t\tconst original = Math.round(p.price * 1.25);\n\t\t\t\t\t\t\tconst discount = Math.max(0, Math.round(((original - p.price) / original) * 100));\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Link key={p._id} href={`/product/${p._id}`} className=\"card overflow-hidden group relative\">\n\t\t\t\t\t\t\t\t\t<div className=\"relative aspect-[3/4]\">\n\t\t\t\t\t\t\t\t\t\t<Image src={p.images?.[0] || 'https://images.unsplash.com/photo-1520975922284-5f573fb8c642?q=80&w=800&auto=format&fit=crop'} alt={p.title} fill className=\"object-cover group-hover:scale-105 transition-transform\" />\n\t\t\t\t\t\t\t\t\t\t<button aria-label=\"Wishlist\" title=\"Wishlist\" onClick={(e) => toggleWish(e, p._id)} className=\"absolute top-2 right-2 bg-black/50 backdrop-blur px-2 py-0.5 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t<span style={{ color: wishlist.includes(p._id) ? '#ff3f6c' : '#fff' }}>{wishlist.includes(p._id) ? '❤️' : '♡'}</span>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"p-3 space-y-1\">\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-white/80 line-clamp-1\">{p.brand || 'Brand'}</p>\n\t\t\t\t\t\t\t\t\t\t<p className=\"font-medium line-clamp-2\">{p.title}</p>\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-white/70\">{p.rating || 0} ★ • Delivery by {formatDelivery(4)}</p>\n\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-lg\" style={{ color: '#26a541' }}>₹ {p.price}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-white/50 line-through ml-2\">₹ {original}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"ml-2 text-xs\" style={{ color: '#26a541' }}>{discount}% OFF</span>\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex gap-2 pt-2\">\n\t\t\t\t\t\t\t\t\t\t\t<button className=\"btn btn-primary\" onClick={(e) => addToCart(e, p)}>Add to cart</button>\n\t\t\t\t\t\t\t\t\t\t\t<Link href={`/product/${p._id}`} className=\"btn btn-outline\">View details</Link>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t</div>\n\t);\n}\n","size_bytes":7164},"next js/myntra-clone/src/app/checkout/page.tsx":{"content":"'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\n\ninterface CartItem {\n  productId: string;\n  title: string;\n  price: number;\n  image: string;\n  quantity: number;\n  size?: string;\n  brand?: string;\n}\n\nexport default function CheckoutPage() {\n  const router = useRouter();\n  const [addr, setAddr] = useState({ line1: '', line2: '', city: '', state: '', zip: '', phone: '' });\n  const [total, setTotal] = useState(0);\n  const [cart, setCart] = useState<CartItem[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const me = await fetch('/api/user/me');\n        if (me.ok) {\n          const data = await me.json();\n          if (data.addresses?.[0]) setAddr(data.addresses[0]);\n        }\n      } catch {}\n      \n      const raw = localStorage.getItem('cart') || '[]';\n      const cartData = JSON.parse(raw) as CartItem[];\n      setCart(cartData);\n      const totalAmount = cartData.reduce((sum, item) => sum + item.price * item.quantity, 0);\n      setTotal(totalAmount);\n    })();\n  }, []);\n\n  async function saveAddress() {\n    try {\n      await fetch('/api/user/address', { \n        method: 'POST', \n        headers: { 'Content-Type': 'application/json' }, \n        body: JSON.stringify(addr) \n      });\n      alert('Address saved successfully');\n    } catch (error) {\n      alert('Failed to save address');\n    }\n  }\n\n  async function payNow() {\n    if (!cart.length) {\n      alert('Your cart is empty');\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      const me = await fetch('/api/user/me');\n      if (!me.ok) {\n        alert('Please login to continue');\n        router.push('/login');\n        return;\n      }\n\n      const user = await me.json();\n\n      const items = cart.map((item) => ({\n        product: item.productId,\n        quantity: item.quantity,\n        price: item.price,\n      }));\n\n      const res = await fetch('/api/checkout/create-order', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          items,\n          totalAmount: total,\n          userId: user._id || user.id,\n        }),\n      });\n\n      const data = await res.json();\n\n      if (!res.ok) {\n        alert(data.message || 'Failed to create order');\n        setLoading(false);\n        return;\n      }\n\n      const key = process.env.NEXT_PUBLIC_RAZORPAY_KEY as string;\n\n      if (!key) {\n        alert('Razorpay key not configured');\n        setLoading(false);\n        return;\n      }\n\n      // @ts-ignore\n      if (!window.Razorpay) {\n        alert('Razorpay SDK not loaded. Please refresh the page.');\n        setLoading(false);\n        return;\n      }\n\n      const options = {\n        key: key,\n        amount: Math.round(total * 100),\n        currency: 'INR',\n        name: 'Myntra',\n        description: 'Order Payment',\n        order_id: data.razorOrderId,\n        handler: async function (response: any) {\n          try {\n            const verifyRes = await fetch('/api/checkout/verify', {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify({\n                razorpay_order_id: response.razorpay_order_id,\n                razorpay_payment_id: response.razorpay_payment_id,\n                razorpay_signature: response.razorpay_signature,\n                orderId: data.orderId,\n              }),\n            });\n\n            if (verifyRes.ok) {\n              localStorage.removeItem('cart');\n              window.dispatchEvent(new Event('storage'));\n              router.push('/orders');\n            } else {\n              alert('Payment verification failed. Please contact support.');\n            }\n          } catch (error) {\n            alert('Payment verification failed');\n          } finally {\n            setLoading(false);\n          }\n        },\n        prefill: {\n          name: user.name || '',\n          email: user.email || '',\n          contact: addr.phone || user.phone || '',\n        },\n        theme: {\n          color: '#0B7FB3',\n        },\n        modal: {\n          ondismiss: function() {\n            setLoading(false);\n          }\n        }\n      };\n\n      // @ts-ignore\n      const rzp = new window.Razorpay(options);\n      rzp.open();\n    } catch (error) {\n      console.error('Payment error:', error);\n      alert('Failed to initiate payment');\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-black via-gray-900 to-black py-8\">\n      <div className=\"max-w-2xl mx-auto px-4\">\n        <h1 className=\"text-3xl font-bold text-white mb-8\">Checkout</h1>\n        \n        <div className=\"bg-white/5 backdrop-blur-sm rounded-2xl p-6 border border-white/10 space-y-6\">\n          <div>\n            <h2 className=\"text-xl font-semibold text-white mb-4\">Delivery Address</h2>\n            <div className=\"space-y-4\">\n              <input\n                className=\"w-full px-4 py-3 rounded-lg bg-black/30 border border-white/20 text-white placeholder-white/40 focus:outline-none focus:border-[#0B7FB3] transition-colors\"\n                placeholder=\"Address line 1\"\n                value={addr.line1}\n                onChange={(e) => setAddr({ ...addr, line1: e.target.value })}\n              />\n              <input\n                className=\"w-full px-4 py-3 rounded-lg bg-black/30 border border-white/20 text-white placeholder-white/40 focus:outline-none focus:border-[#0B7FB3] transition-colors\"\n                placeholder=\"Address line 2\"\n                value={addr.line2}\n                onChange={(e) => setAddr({ ...addr, line2: e.target.value })}\n              />\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <input\n                  className=\"px-4 py-3 rounded-lg bg-black/30 border border-white/20 text-white placeholder-white/40 focus:outline-none focus:border-[#0B7FB3] transition-colors\"\n                  placeholder=\"City\"\n                  value={addr.city}\n                  onChange={(e) => setAddr({ ...addr, city: e.target.value })}\n                />\n                <input\n                  className=\"px-4 py-3 rounded-lg bg-black/30 border border-white/20 text-white placeholder-white/40 focus:outline-none focus:border-[#0B7FB3] transition-colors\"\n                  placeholder=\"State\"\n                  value={addr.state}\n                  onChange={(e) => setAddr({ ...addr, state: e.target.value })}\n                />\n                <input\n                  className=\"px-4 py-3 rounded-lg bg-black/30 border border-white/20 text-white placeholder-white/40 focus:outline-none focus:border-[#0B7FB3] transition-colors\"\n                  placeholder=\"ZIP\"\n                  value={addr.zip}\n                  onChange={(e) => setAddr({ ...addr, zip: e.target.value })}\n                />\n              </div>\n              <input\n                className=\"w-full px-4 py-3 rounded-lg bg-black/30 border border-white/20 text-white placeholder-white/40 focus:outline-none focus:border-[#0B7FB3] transition-colors\"\n                placeholder=\"Phone\"\n                value={addr.phone}\n                onChange={(e) => setAddr({ ...addr, phone: e.target.value })}\n              />\n            </div>\n          </div>\n\n          <div className=\"border-t border-white/10 pt-6\">\n            <h2 className=\"text-xl font-semibold text-white mb-4\">Order Summary</h2>\n            <div className=\"space-y-2 text-white/80\">\n              <div className=\"flex justify-between\">\n                <span>Items ({cart.length})</span>\n                <span>₹{total.toFixed(2)}</span>\n              </div>\n              <div className=\"flex justify-between text-lg font-bold text-white border-t border-white/10 pt-2 mt-2\">\n                <span>Total</span>\n                <span>₹{total.toFixed(2)}</span>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"flex gap-4\">\n            <button\n              className=\"flex-1 px-6 py-3 rounded-lg border border-[#0B7FB3] text-[#0B7FB3] font-semibold hover:bg-[#0B7FB3]/10 transition-colors\"\n              onClick={saveAddress}\n            >\n              Save Address\n            </button>\n            <button\n              className=\"flex-1 px-6 py-3 rounded-lg bg-[#0B7FB3] text-white font-semibold hover:bg-[#0969A0] transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n              onClick={payNow}\n              disabled={loading || !cart.length}\n            >\n              {loading ? 'Processing...' : 'Pay Now'}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":8685},"next js/myntra-clone/src/app/login/page.tsx":{"content":"'use client';\n\nimport { useState, useEffect } from 'react';\nimport { signIn } from 'next-auth/react';\nimport Link from 'next/link';\n\nexport default function LoginPage() {\n        const [mode, setMode] = useState<'password' | 'otp'>('password');\n        const [email, setEmail] = useState('');\n        const [password, setPassword] = useState('');\n        const [phone, setPhone] = useState('');\n        const [otp, setOtp] = useState('');\n        const [otpSent, setOtpSent] = useState(false);\n        const [loading, setLoading] = useState(false);\n        const [error, setError] = useState('');\n        const [resendCooldown, setResendCooldown] = useState(0);\n\n        useEffect(() => {\n                if (resendCooldown > 0) {\n                        const timer = setTimeout(() => setResendCooldown(resendCooldown - 1), 1000);\n                        return () => clearTimeout(timer);\n                }\n        }, [resendCooldown]);\n\n        async function handlePasswordLogin(e: React.FormEvent) {\n                e.preventDefault();\n                setLoading(true);\n                setError('');\n                try {\n                        const res = await fetch('/api/auth/login', {\n                                method: 'POST',\n                                headers: { 'Content-Type': 'application/json' },\n                                body: JSON.stringify({ email, password }),\n                        });\n\n                        if (!res.ok) {\n                                const data = await res.json();\n                                throw new Error(data.message || 'Login failed');\n                        }\n\n                        window.location.href = '/';\n                } catch (e: any) {\n                        setError(e.message || 'Login failed');\n                } finally {\n                        setLoading(false);\n                }\n        }\n\n        async function handleSendOTP(e?: React.FormEvent) {\n                if (e) e.preventDefault();\n                setLoading(true);\n                setError('');\n                try {\n                        const res = await fetch('/api/auth/send-otp', {\n                                method: 'POST',\n                                headers: { 'Content-Type': 'application/json' },\n                                body: JSON.stringify({ phone }),\n                        });\n\n                        if (!res.ok) throw new Error((await res.json()).message);\n\n                        setOtpSent(true);\n                        setResendCooldown(30);\n                } catch (e: any) {\n                        setError(e.message || 'Failed to send OTP');\n                } finally {\n                        setLoading(false);\n                }\n        }\n\n        async function handleVerifyOTP(e: React.FormEvent) {\n                e.preventDefault();\n                setLoading(true);\n                setError('');\n                try {\n                        const res = await fetch('/api/auth/verify-otp', {\n                                method: 'POST',\n                                headers: { 'Content-Type': 'application/json' },\n                                body: JSON.stringify({ phone, otp }),\n                        });\n\n                        if (!res.ok) throw new Error((await res.json()).message);\n\n                        window.location.href = '/';\n                } catch (e: any) {\n                        setError(e.message || 'Invalid OTP');\n                } finally {\n                        setLoading(false);\n                }\n        }\n\n        async function handleGoogleLogin() {\n                setLoading(true);\n                await signIn('google', { callbackUrl: '/api/auth/callback/google' });\n        }\n\n        return (\n                <div className=\"max-w-md mx-auto\">\n                        <h1 className=\"text-3xl font-bold mb-6\" style={{ color: '#0B7FB3' }}>Welcome Back</h1>\n\n                        <div className=\"flex gap-2 mb-6\">\n                                <button\n                                        className={`flex-1 py-2 rounded-lg transition-colors ${\n                                                mode === 'password'\n                                                        ? 'bg-[#0B7FB3] text-white'\n                                                        : 'bg-neutral-800 text-white/70 hover:text-white'\n                                        }`}\n                                        onClick={() => {\n                                                setMode('password');\n                                                setError('');\n                                        }}\n                                >\n                                        Password\n                                </button>\n                                <button\n                                        className={`flex-1 py-2 rounded-lg transition-colors ${\n                                                mode === 'otp'\n                                                        ? 'bg-[#0B7FB3] text-white'\n                                                        : 'bg-neutral-800 text-white/70 hover:text-white'\n                                        }`}\n                                        onClick={() => {\n                                                setMode('otp');\n                                                setError('');\n                                                setOtpSent(false);\n                                        }}\n                                >\n                                        OTP\n                                </button>\n                        </div>\n\n                        {mode === 'password' ? (\n                                <form onSubmit={handlePasswordLogin} className=\"space-y-4\">\n                                        <div>\n                                                <label className=\"block text-sm mb-1 text-white/80\">Email</label>\n                                                <input\n                                                        className=\"w-full px-4 py-3 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#0B7FB3] focus:outline-none transition-colors\"\n                                                        placeholder=\"Enter your email\"\n                                                        type=\"email\"\n                                                        value={email}\n                                                        onChange={(e) => setEmail(e.target.value)}\n                                                        required\n                                                />\n                                        </div>\n                                        <div>\n                                                <label className=\"block text-sm mb-1 text-white/80\">Password</label>\n                                                <input\n                                                        className=\"w-full px-4 py-3 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#0B7FB3] focus:outline-none transition-colors\"\n                                                        placeholder=\"Enter your password\"\n                                                        type=\"password\"\n                                                        value={password}\n                                                        onChange={(e) => setPassword(e.target.value)}\n                                                        required\n                                                />\n                                        </div>\n                                        <div className=\"text-right\">\n                                                <Link\n                                                        href=\"/forgot-password\"\n                                                        className=\"text-sm hover:underline\"\n                                                        style={{ color: '#0B7FB3' }}\n                                                >\n                                                        Forgot Password?\n                                                </Link>\n                                        </div>\n                                        {error && <p className=\"text-red-400 text-sm\">{error}</p>}\n                                        <button\n                                                className=\"w-full py-3 rounded-lg font-semibold transition-colors\"\n                                                style={{ backgroundColor: '#0B7FB3', color: 'white' }}\n                                                disabled={loading}\n                                        >\n                                                {loading ? 'Logging in...' : 'Login'}\n                                        </button>\n                                </form>\n                        ) : (\n                                <div className=\"space-y-4\">\n                                        {!otpSent ? (\n                                                <form onSubmit={handleSendOTP} className=\"space-y-4\">\n                                                        <div>\n                                                                <label className=\"block text-sm mb-1 text-white/80\">Phone Number</label>\n                                                                <input\n                                                                        className=\"w-full px-4 py-3 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#0B7FB3] focus:outline-none transition-colors\"\n                                                                        placeholder=\"+1234567890\"\n                                                                        type=\"tel\"\n                                                                        value={phone}\n                                                                        onChange={(e) => setPhone(e.target.value)}\n                                                                        required\n                                                                />\n                                                        </div>\n                                                        {error && <p className=\"text-red-400 text-sm\">{error}</p>}\n                                                        <button\n                                                                className=\"w-full py-3 rounded-lg font-semibold transition-colors\"\n                                                                style={{ backgroundColor: '#0B7FB3', color: 'white' }}\n                                                                disabled={loading}\n                                                        >\n                                                                {loading ? 'Sending...' : 'Send OTP'}\n                                                        </button>\n                                                </form>\n                                        ) : (\n                                                <form onSubmit={handleVerifyOTP} className=\"space-y-4\">\n                                                        <div>\n                                                                <label className=\"block text-sm mb-1 text-white/80\">Enter OTP</label>\n                                                                <input\n                                                                        className=\"w-full px-4 py-3 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#0B7FB3] focus:outline-none transition-colors text-center text-2xl tracking-widest\"\n                                                                        placeholder=\"000000\"\n                                                                        type=\"text\"\n                                                                        maxLength={6}\n                                                                        value={otp}\n                                                                        onChange={(e) => setOtp(e.target.value.replace(/\\D/g, ''))}\n                                                                        required\n                                                                />\n                                                        </div>\n                                                        {error && <p className=\"text-red-400 text-sm\">{error}</p>}\n                                                        <button\n                                                                className=\"w-full py-3 rounded-lg font-semibold transition-colors\"\n                                                                style={{ backgroundColor: '#0B7FB3', color: 'white' }}\n                                                                disabled={loading}\n                                                        >\n                                                                {loading ? 'Verifying...' : 'Verify OTP'}\n                                                        </button>\n                                                        <div className=\"flex gap-2\">\n                                                                <button\n                                                                        type=\"button\"\n                                                                        onClick={() => {\n                                                                                setOtpSent(false);\n                                                                                setOtp('');\n                                                                                setError('');\n                                                                                setResendCooldown(0);\n                                                                        }}\n                                                                        className=\"flex-1 text-sm text-white/70 hover:text-white\"\n                                                                >\n                                                                        Change Number\n                                                                </button>\n                                                                <button\n                                                                        type=\"button\"\n                                                                        onClick={() => handleSendOTP()}\n                                                                        disabled={resendCooldown > 0 || loading}\n                                                                        className=\"flex-1 text-sm hover:underline disabled:opacity-50 disabled:cursor-not-allowed\"\n                                                                        style={{ color: resendCooldown > 0 ? '#9ca3af' : '#0B7FB3' }}\n                                                                >\n                                                                        {resendCooldown > 0 ? `Resend in ${resendCooldown}s` : 'Resend OTP'}\n                                                                </button>\n                                                        </div>\n                                                </form>\n                                        )}\n                                </div>\n                        )}\n\n                        <div className=\"relative my-6\">\n                                <div className=\"absolute inset-0 flex items-center\">\n                                        <div className=\"w-full border-t border-white/10\"></div>\n                                </div>\n                                <div className=\"relative flex justify-center text-sm\">\n                                        <span className=\"px-2 bg-black text-white/60\">Or continue with</span>\n                                </div>\n                        </div>\n\n                        <button\n                                onClick={handleGoogleLogin}\n                                disabled={loading}\n                                className=\"w-full py-3 px-4 rounded-lg bg-white text-black font-semibold hover:bg-gray-100 transition-colors flex items-center justify-center gap-3\"\n                        >\n                                <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\n                                        <path\n                                                fill=\"currentColor\"\n                                                d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"\n                                        />\n                                        <path\n                                                fill=\"currentColor\"\n                                                d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"\n                                        />\n                                        <path\n                                                fill=\"currentColor\"\n                                                d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"\n                                        />\n                                        <path\n                                                fill=\"currentColor\"\n                                                d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"\n                                        />\n                                </svg>\n                                Continue with Google\n                        </button>\n\n                        <p className=\"mt-6 text-center text-sm text-white/70\">\n                                New to Myntra?{' '}\n                                <Link href=\"/signup\" className=\"font-semibold hover:underline\" style={{ color: '#0B7FB3' }}>\n                                        Create an account\n                                </Link>\n                        </p>\n                </div>\n        );\n}\n","size_bytes":18264},"next js/myntra-clone/src/app/orders/page.tsx":{"content":"'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Image from 'next/image';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface OrderItem {\n  product: string;\n  title: string;\n  image?: string;\n  quantity: number;\n  price: number;\n}\n\ninterface TrackingStatus {\n  stage: string;\n  message: string;\n  updatedAt: string;\n}\n\ninterface Order {\n  _id: string;\n  orderNumber: string;\n  items: OrderItem[];\n  totalAmount: number;\n  status: string;\n  createdAt: string;\n  updatedAt: string;\n  deliveryDate?: string;\n  trackingStatus?: TrackingStatus[];\n  cancellationReason?: string;\n  rating?: {\n    stars: number;\n    review?: string;\n  };\n}\n\nexport default function OrdersPage() {\n  const router = useRouter();\n  const [orders, setOrders] = useState<Order[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [cancelModal, setCancelModal] = useState<string | null>(null);\n  const [trackModal, setTrackModal] = useState<Order | null>(null);\n  const [ratingModal, setRatingModal] = useState<Order | null>(null);\n  const [cancelReason, setCancelReason] = useState('');\n  const [rating, setRating] = useState(5);\n  const [review, setReview] = useState('');\n  const [actionLoading, setActionLoading] = useState(false);\n\n  useEffect(() => {\n    fetchOrders();\n  }, []);\n\n  async function fetchOrders() {\n    try {\n      const res = await fetch('/api/orders');\n      if (!res.ok) {\n        if (res.status === 401) {\n          router.push('/login');\n          return;\n        }\n        throw new Error('Failed to fetch orders');\n      }\n      const data = await res.json();\n      setOrders(data);\n    } catch (error) {\n      console.error('Failed to fetch orders:', error);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function handleCancelOrder() {\n    if (!cancelModal || !cancelReason) return;\n    \n    setActionLoading(true);\n    try {\n      const res = await fetch('/api/orders/cancel', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ orderId: cancelModal, reason: cancelReason }),\n      });\n\n      if (!res.ok) throw new Error((await res.json()).message);\n      \n      await fetchOrders();\n      setCancelModal(null);\n      setCancelReason('');\n      alert('Order cancelled successfully');\n    } catch (error: any) {\n      alert(error.message || 'Failed to cancel order');\n    } finally {\n      setActionLoading(false);\n    }\n  }\n\n  async function handleTrackOrder(orderId: string) {\n    try {\n      const res = await fetch(`/api/orders/track?orderId=${orderId}`);\n      if (!res.ok) throw new Error('Failed to track order');\n      \n      const data = await res.json();\n      setTrackModal(data.order);\n      await fetchOrders();\n    } catch (error: any) {\n      alert(error.message || 'Failed to track order');\n    }\n  }\n\n  async function handleAddRating() {\n    if (!ratingModal) return;\n\n    setActionLoading(true);\n    try {\n      const res = await fetch('/api/orders/rating', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ orderId: ratingModal._id, stars: rating, review }),\n      });\n\n      if (!res.ok) throw new Error((await res.json()).message);\n      \n      await fetchOrders();\n      setRatingModal(null);\n      setReview('');\n      setRating(5);\n      alert('Thank you for your rating!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to add rating');\n    } finally {\n      setActionLoading(false);\n    }\n  }\n\n  function getStatusColor(status: string) {\n    switch (status) {\n      case 'processing':\n      case 'shipped':\n        return 'text-blue-500';\n      case 'delivered':\n        return 'text-[#26a541]';\n      case 'cancelled':\n        return 'text-red-500';\n      case 'failed':\n        return 'text-red-500';\n      default:\n        return 'text-yellow-500';\n    }\n  }\n\n  function getStatusText(status: string) {\n    switch (status) {\n      case 'processing':\n        return 'Processing';\n      case 'shipped':\n        return 'Shipped';\n      case 'delivered':\n        return 'Delivered';\n      case 'cancelled':\n        return 'Cancelled';\n      case 'failed':\n        return 'Payment Failed';\n      default:\n        return 'Pending';\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#0B7FB3]\"></div>\n      </div>\n    );\n  }\n\n  if (orders.length === 0) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-white\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"text-center max-w-md px-4\"\n        >\n          <div className=\"w-48 h-48 mx-auto mb-8 relative\">\n            <Image\n              src=\"https://images.unsplash.com/photo-1607082348824-0a96f2a4b9da?q=80&w=800&auto=format&fit=crop\"\n              alt=\"No orders\"\n              fill\n              className=\"object-contain opacity-50\"\n            />\n          </div>\n          <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">No Orders Yet!</h2>\n          <p className=\"text-gray-600 mb-8\">You haven't placed any orders. Start shopping to see your orders here.</p>\n          <button\n            onClick={() => router.push('/')}\n            className=\"bg-[#0B7FB3] text-white px-8 py-3 rounded-md font-semibold hover:bg-[#0969A0] transition-colors\"\n          >\n            Start Shopping\n          </button>\n        </motion.div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8\">\n      <div className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-2xl md:text-3xl font-bold text-gray-900\">My Orders</h1>\n          <p className=\"text-gray-600 mt-1\">{orders.length} {orders.length === 1 ? 'Order' : 'Orders'}</p>\n        </div>\n\n        <div className=\"space-y-4\">\n          {orders.map((order, index) => (\n            <motion.div\n              key={order._id}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: index * 0.1 }}\n              className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow\"\n            >\n              <div className=\"p-4 md:p-6\">\n                <div className=\"flex flex-col md:flex-row md:items-center justify-between mb-4 pb-4 border-b border-gray-200\">\n                  <div className=\"mb-4 md:mb-0\">\n                    <div className=\"flex items-center gap-3 mb-2\">\n                      <h3 className=\"font-bold text-gray-900\">Order #{order.orderNumber}</h3>\n                      <span className={`text-sm font-semibold ${getStatusColor(order.status)}`}>\n                        {getStatusText(order.status)}\n                      </span>\n                    </div>\n                    <div className=\"flex flex-wrap gap-4 text-sm text-gray-600\">\n                      <span>\n                        Placed on {new Date(order.createdAt).toLocaleDateString('en-IN', {\n                          day: 'numeric',\n                          month: 'short',\n                          year: 'numeric'\n                        })}\n                      </span>\n                      {order.deliveryDate && order.status !== 'cancelled' && (\n                        <span className=\"text-[#26a541] font-medium\">\n                          {order.status === 'delivered' ? 'Delivered on' : 'Delivery by'}{' '}\n                          {new Date(order.deliveryDate).toLocaleDateString('en-IN', {\n                            day: 'numeric',\n                            month: 'short',\n                            year: 'numeric'\n                          })}\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"text-sm text-gray-600 mb-1\">Total Amount</p>\n                    <p className=\"text-2xl font-bold text-gray-900\">₹{order.totalAmount}</p>\n                  </div>\n                </div>\n\n                <div className=\"space-y-4\">\n                  {order.items.map((item, itemIndex) => (\n                    <div key={itemIndex} className=\"flex gap-4\">\n                      <div className=\"relative w-20 h-24 md:w-24 md:h-32 flex-shrink-0 rounded-lg overflow-hidden bg-gray-100\">\n                        <Image\n                          src={item.image || 'https://images.unsplash.com/photo-1520975922284-5f573fb8c642?q=80&w=800&auto=format&fit=crop'}\n                          alt={item.title}\n                          fill\n                          className=\"object-cover\"\n                        />\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <h4 className=\"font-semibold text-gray-900 line-clamp-2 mb-1\">\n                          {item.title}\n                        </h4>\n                        <div className=\"flex items-center gap-4 text-sm text-gray-600\">\n                          <span>Qty: {item.quantity}</span>\n                          <span className=\"font-semibold text-gray-900\">₹{item.price}</span>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n\n                {order.cancellationReason && (\n                  <div className=\"mt-4 p-3 bg-red-50 rounded-md\">\n                    <p className=\"text-sm text-red-700\">\n                      <strong>Cancellation Reason:</strong> {order.cancellationReason}\n                    </p>\n                  </div>\n                )}\n\n                <div className=\"mt-6 pt-4 border-t border-gray-200 flex flex-wrap gap-3\">\n                  {(order.status === 'processing' || order.status === 'shipped') && (\n                    <>\n                      <button\n                        onClick={() => handleTrackOrder(order._id)}\n                        className=\"px-6 py-2 bg-[#0B7FB3] text-white rounded-md font-semibold hover:bg-[#0969A0] transition-colors\"\n                      >\n                        Track Order\n                      </button>\n                      <button\n                        onClick={() => setCancelModal(order._id)}\n                        className=\"px-6 py-2 border border-red-500 text-red-500 rounded-md font-semibold hover:bg-red-50 transition-colors\"\n                      >\n                        Cancel Order\n                      </button>\n                    </>\n                  )}\n                  \n                  {order.status === 'delivered' && !order.rating && (\n                    <button\n                      onClick={() => setRatingModal(order)}\n                      className=\"px-6 py-2 bg-[#26a541] text-white rounded-md font-semibold hover:bg-[#1f8836] transition-colors\"\n                    >\n                      Rate Order\n                    </button>\n                  )}\n\n                  {order.status === 'delivered' && order.rating && (\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <div className=\"flex text-yellow-400\">\n                        {[1, 2, 3, 4, 5].map((star) => (\n                          <svg\n                            key={star}\n                            className={`w-5 h-5 ${star <= order.rating!.stars ? 'fill-current' : 'fill-none stroke-current'}`}\n                            viewBox=\"0 0 24 24\"\n                          >\n                            <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\" />\n                          </svg>\n                        ))}\n                      </div>\n                      <span className=\"text-gray-600\">Your Rating</span>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </motion.div>\n          ))}\n        </div>\n      </div>\n\n      {/* Cancel Modal */}\n      <AnimatePresence>\n        {cancelModal && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\"\n            onClick={() => setCancelModal(null)}\n          >\n            <motion.div\n              initial={{ scale: 0.9, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.9, opacity: 0 }}\n              className=\"bg-white rounded-lg p-6 max-w-md w-full\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <h3 className=\"text-xl font-bold mb-4\">Cancel Order</h3>\n              <p className=\"text-gray-600 mb-4\">Please select a reason for cancelling this order:</p>\n              \n              <select\n                value={cancelReason}\n                onChange={(e) => setCancelReason(e.target.value)}\n                className=\"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-[#0B7FB3] focus:outline-none mb-6\"\n                required\n              >\n                <option value=\"\">Select reason...</option>\n                <option value=\"Changed my mind\">Changed my mind</option>\n                <option value=\"Found better price\">Found better price</option>\n                <option value=\"Ordered by mistake\">Ordered by mistake</option>\n                <option value=\"Delivery time too long\">Delivery time too long</option>\n                <option value=\"Want to modify order\">Want to modify order</option>\n                <option value=\"Other reasons\">Other reasons</option>\n              </select>\n\n              <div className=\"flex gap-3\">\n                <button\n                  onClick={() => setCancelModal(null)}\n                  className=\"flex-1 px-4 py-2 border border-gray-300 rounded-md font-semibold hover:bg-gray-50\"\n                  disabled={actionLoading}\n                >\n                  Keep Order\n                </button>\n                <button\n                  onClick={handleCancelOrder}\n                  disabled={!cancelReason || actionLoading}\n                  className=\"flex-1 px-4 py-2 bg-red-500 text-white rounded-md font-semibold hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  {actionLoading ? 'Cancelling...' : 'Cancel Order'}\n                </button>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Track Modal */}\n      <AnimatePresence>\n        {trackModal && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\"\n            onClick={() => setTrackModal(null)}\n          >\n            <motion.div\n              initial={{ scale: 0.9, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.9, opacity: 0 }}\n              className=\"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <h3 className=\"text-xl font-bold mb-4\">Track Order #{trackModal.orderNumber}</h3>\n              \n              <div className=\"space-y-4\">\n                {trackModal.trackingStatus?.map((track, idx) => (\n                  <div key={idx} className=\"flex gap-4\">\n                    <div className=\"flex flex-col items-center\">\n                      <div className={`w-10 h-10 rounded-full flex items-center justify-center ${\n                        idx === (trackModal.trackingStatus?.length || 0) - 1 \n                          ? 'bg-[#0B7FB3] text-white' \n                          : 'bg-gray-200 text-gray-600'\n                      }`}>\n                        {idx === (trackModal.trackingStatus?.length || 0) - 1 ? (\n                          <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                            <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                          </svg>\n                        ) : (\n                          <span className=\"text-sm font-bold\">{idx + 1}</span>\n                        )}\n                      </div>\n                      {idx < (trackModal.trackingStatus?.length || 0) - 1 && (\n                        <div className=\"w-0.5 h-16 bg-gray-200 my-1\"></div>\n                      )}\n                    </div>\n                    <div className=\"flex-1 pb-8\">\n                      <p className=\"font-semibold text-gray-900 capitalize\">\n                        {track.stage.replace('_', ' ')}\n                      </p>\n                      <p className=\"text-sm text-gray-600\">{track.message}</p>\n                      <p className=\"text-xs text-gray-400 mt-1\">\n                        {new Date(track.updatedAt).toLocaleString('en-IN', {\n                          day: 'numeric',\n                          month: 'short',\n                          year: 'numeric',\n                          hour: '2-digit',\n                          minute: '2-digit'\n                        })}\n                      </p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n\n              <button\n                onClick={() => setTrackModal(null)}\n                className=\"mt-6 w-full px-4 py-2 bg-[#0B7FB3] text-white rounded-md font-semibold hover:bg-[#0969A0]\"\n              >\n                Close\n              </button>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Rating Modal */}\n      <AnimatePresence>\n        {ratingModal && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\"\n            onClick={() => setRatingModal(null)}\n          >\n            <motion.div\n              initial={{ scale: 0.9, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.9, opacity: 0 }}\n              className=\"bg-white rounded-lg p-6 max-w-md w-full\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <h3 className=\"text-xl font-bold mb-4\">Rate Your Order</h3>\n              \n              <div className=\"mb-6\">\n                <p className=\"text-gray-600 mb-3\">How would you rate this order?</p>\n                <div className=\"flex gap-2 justify-center\">\n                  {[1, 2, 3, 4, 5].map((star) => (\n                    <button\n                      key={star}\n                      onClick={() => setRating(star)}\n                      className=\"text-3xl transition-colors\"\n                    >\n                      <svg\n                        className={`w-10 h-10 ${star <= rating ? 'text-yellow-400 fill-current' : 'text-gray-300'}`}\n                        viewBox=\"0 0 24 24\"\n                        stroke=\"currentColor\"\n                        strokeWidth=\"2\"\n                      >\n                        <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\" />\n                      </svg>\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"mb-6\">\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Write a review (optional)\n                </label>\n                <textarea\n                  value={review}\n                  onChange={(e) => setReview(e.target.value)}\n                  className=\"w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-[#0B7FB3] focus:outline-none resize-none\"\n                  rows={4}\n                  placeholder=\"Share your experience with this order...\"\n                />\n              </div>\n\n              <div className=\"flex gap-3\">\n                <button\n                  onClick={() => setRatingModal(null)}\n                  className=\"flex-1 px-4 py-2 border border-gray-300 rounded-md font-semibold hover:bg-gray-50\"\n                  disabled={actionLoading}\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleAddRating}\n                  disabled={actionLoading}\n                  className=\"flex-1 px-4 py-2 bg-[#0B7FB3] text-white rounded-md font-semibold hover:bg-[#0969A0] disabled:opacity-50\"\n                >\n                  {actionLoading ? 'Submitting...' : 'Submit Rating'}\n                </button>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n","size_bytes":21091},"next js/myntra-clone/src/app/profile/page.tsx":{"content":"import { getSession } from '@/lib/session';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { User } from '@/models/User';\n\nexport default async function ProfilePage() {\n\tconst session = await getSession();\n\tif (!session) return <p className=\"text-white/70\">Please login to view your profile.</p>;\n\tawait connectToDatabase();\n\tconst user = await User.findById(session.userId);\n\tconst addr = user.addresses?.[0];\n\treturn (\n\t\t<div className=\"max-w-xl space-y-4\">\n\t\t\t<h1 className=\"text-2xl font-semibold\">My Profile</h1>\n\t\t\t<div className=\"card p-4\">\n\t\t\t\t<p><span className=\"text-white/60\">Name:</span> {user.name}</p>\n\t\t\t\t<p><span className=\"text-white/60\">Email:</span> {user.email}</p>\n\t\t\t</div>\n\t\t\t<div className=\"card p-4\">\n\t\t\t\t<h2 className=\"font-semibold mb-2\">Default Address</h2>\n\t\t\t\t{addr ? (\n\t\t\t\t\t<div className=\"text-white/80\">\n\t\t\t\t\t\t<p>{addr.line1}{addr.line2 ? `, ${addr.line2}` : ''}</p>\n\t\t\t\t\t\t<p>{addr.city}, {addr.state} - {addr.zip}</p>\n\t\t\t\t\t\t<p>{addr.phone}</p>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<p className=\"text-white/60\">No address saved yet.</p>\n\t\t\t\t)}\n\t\t\t\t<a href=\"/checkout\" className=\"btn btn-outline mt-3 inline-block\">Manage in Checkout</a>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\n","size_bytes":1197},"next js/myntra-clone/src/app/search/page.tsx":{"content":"'use client';\n\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { useEffect, useMemo, useState } from 'react';\nimport { useSearchParams } from 'next/navigation';\n\nasync function fetchAllProducts() {\n  const res = await fetch('/api/products');\n  return res.json();\n}\n\nexport default function SearchPage() {\n  const searchParams = useSearchParams();\n  const q = searchParams.get('q') || '';\n  const [all, setAll] = useState<any[]>([]);\n  \n  useEffect(() => {\n    fetchAllProducts().then(setAll);\n  }, []);\n  \n  const products = useMemo(() => {\n    const t = q.toLowerCase();\n    return all.filter((p) =>\n      [p.title, p.description, p.category, p.brand]\n        .filter(Boolean)\n        .some((x: string) => x.toLowerCase().includes(t))\n    );\n  }, [all, q]);\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\n        <div className=\"border-b border-gray-200 pb-4 mb-8\">\n          <h1 className=\"text-2xl font-bold text-gray-900\">\n            Search Results\n            {q && (\n              <span className=\"text-gray-500 font-normal ml-2\">\n                for \"{q}\"\n              </span>\n            )}\n          </h1>\n          <p className=\"text-gray-600 mt-1\">\n            {products.length} {products.length === 1 ? 'Product' : 'Products'} Found\n          </p>\n        </div>\n\n        {products.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center py-16\">\n            <div className=\"relative w-64 h-64 mb-6\">\n              <Image\n                src=\"https://images.unsplash.com/photo-1472851294608-062f824d29cc?q=80&w=800&auto=format&fit=crop\"\n                alt=\"No results\"\n                fill\n                className=\"object-contain opacity-50\"\n              />\n            </div>\n            <h2 className=\"text-2xl font-semibold text-gray-800 mb-2\">\n              No products found\n            </h2>\n            <p className=\"text-gray-500 mb-6 text-center max-w-md\">\n              {q\n                ? `We couldn't find any products matching \"${q}\". Try a different search term.`\n                : 'Start searching to find products'}\n            </p>\n            <Link\n              href=\"/\"\n              className=\"px-8 py-3 bg-[#0B7FB3] text-white font-semibold rounded-sm hover:bg-[#0969A0] transition-colors\"\n            >\n              Continue Shopping\n            </Link>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\n            {products.map((p: any) => (\n              <Link\n                key={p._id}\n                href={`/product/${p._id}`}\n                className=\"border border-gray-200 rounded-sm overflow-hidden hover:shadow-lg transition-shadow duration-300 bg-white group\"\n              >\n                <div className=\"relative aspect-[3/4] bg-gray-100\">\n                  <Image\n                    src={\n                      p.images?.[0] ||\n                      'https://images.unsplash.com/photo-1520975922284-5f573fb8c642?q=80&w=800&auto=format&fit=crop'\n                    }\n                    alt={p.title}\n                    fill\n                    className=\"object-cover\"\n                  />\n                  {p.discount > 0 && (\n                    <div className=\"absolute top-2 left-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded\">\n                      {p.discount}% OFF\n                    </div>\n                  )}\n                </div>\n                <div className=\"p-3\">\n                  <p className=\"text-sm font-semibold text-gray-900 mb-1\">\n                    {p.brand || 'Brand'}\n                  </p>\n                  <p className=\"text-sm text-gray-600 line-clamp-2 mb-2\">\n                    {p.title}\n                  </p>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-base font-bold text-gray-900\">\n                      ₹{p.price}\n                    </span>\n                    {p.discount > 0 && (\n                      <>\n                        <span className=\"text-sm text-gray-400 line-through\">\n                          ₹{Math.round(p.price / (1 - p.discount / 100))}\n                        </span>\n                        <span className=\"text-xs text-[#26a541] font-semibold\">\n                          ({p.discount}% OFF)\n                        </span>\n                      </>\n                    )}\n                  </div>\n                  {p.rating && (\n                    <div className=\"flex items-center gap-1 mt-2\">\n                      <div className=\"flex items-center bg-[#26a541] text-white text-xs px-1.5 py-0.5 rounded\">\n                        <span className=\"font-semibold\">{p.rating}</span>\n                        <span className=\"ml-0.5\">★</span>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </Link>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":5038},"next js/myntra-clone/src/app/signup/page.tsx":{"content":"'use client';\n\nimport { useState } from 'react';\nimport { signIn } from 'next-auth/react';\nimport Link from 'next/link';\n\nexport default function SignupPage() {\n        const [name, setName] = useState('');\n        const [email, setEmail] = useState('');\n        const [password, setPassword] = useState('');\n        const [phone, setPhone] = useState('');\n        const [loading, setLoading] = useState(false);\n        const [error, setError] = useState('');\n\n        async function onSubmit(e: React.FormEvent) {\n                e.preventDefault();\n                setLoading(true);\n                setError('');\n                try {\n                        const res = await fetch('/api/auth/signup', {\n                                method: 'POST',\n                                headers: { 'Content-Type': 'application/json' },\n                                body: JSON.stringify({ name, email, password, phone }),\n                        });\n                        if (!res.ok) throw new Error((await res.json()).message || 'Signup failed');\n                        window.location.href = '/';\n                } catch (e: any) {\n                        setError(e.message);\n                } finally {\n                        setLoading(false);\n                }\n        }\n\n        async function handleGoogleSignup() {\n                setLoading(true);\n                await signIn('google', { callbackUrl: '/api/auth/callback/google' });\n        }\n\n        return (\n                <div className=\"max-w-md mx-auto\">\n                        <h1 className=\"text-3xl font-bold mb-6\" style={{ color: '#0B7FB3' }}>Create Account</h1>\n\n                        <button\n                                onClick={handleGoogleSignup}\n                                disabled={loading}\n                                className=\"w-full py-3 px-4 rounded-lg bg-white text-black font-semibold hover:bg-gray-100 transition-colors flex items-center justify-center gap-3 mb-6\"\n                        >\n                                <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\n                                        <path\n                                                fill=\"currentColor\"\n                                                d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"\n                                        />\n                                        <path\n                                                fill=\"currentColor\"\n                                                d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"\n                                        />\n                                        <path\n                                                fill=\"currentColor\"\n                                                d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"\n                                        />\n                                        <path\n                                                fill=\"currentColor\"\n                                                d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"\n                                        />\n                                </svg>\n                                Sign up with Google\n                        </button>\n\n                        <div className=\"relative my-6\">\n                                <div className=\"absolute inset-0 flex items-center\">\n                                        <div className=\"w-full border-t border-white/10\"></div>\n                                </div>\n                                <div className=\"relative flex justify-center text-sm\">\n                                        <span className=\"px-2 bg-black text-white/60\">Or sign up with email</span>\n                                </div>\n                        </div>\n\n                        <form onSubmit={onSubmit} className=\"space-y-4\">\n                                <div>\n                                        <label className=\"block text-sm mb-1 text-white/80\">Full Name</label>\n                                        <input\n                                                className=\"w-full px-4 py-3 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#0B7FB3] focus:outline-none transition-colors\"\n                                                placeholder=\"Enter your name\"\n                                                value={name}\n                                                onChange={(e) => setName(e.target.value)}\n                                                required\n                                        />\n                                </div>\n                                <div>\n                                        <label className=\"block text-sm mb-1 text-white/80\">Email</label>\n                                        <input\n                                                className=\"w-full px-4 py-3 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#0B7FB3] focus:outline-none transition-colors\"\n                                                placeholder=\"Enter your email\"\n                                                type=\"email\"\n                                                value={email}\n                                                onChange={(e) => setEmail(e.target.value)}\n                                                required\n                                        />\n                                </div>\n                                <div>\n                                        <label className=\"block text-sm mb-1 text-white/80\">Phone Number</label>\n                                        <input\n                                                className=\"w-full px-4 py-3 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#0B7FB3] focus:outline-none transition-colors\"\n                                                placeholder=\"Enter your phone number\"\n                                                type=\"tel\"\n                                                value={phone}\n                                                onChange={(e) => setPhone(e.target.value)}\n                                                required\n                                        />\n                                </div>\n                                <div>\n                                        <label className=\"block text-sm mb-1 text-white/80\">Password</label>\n                                        <input\n                                                className=\"w-full px-4 py-3 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#0B7FB3] focus:outline-none transition-colors\"\n                                                placeholder=\"Create a password\"\n                                                type=\"password\"\n                                                value={password}\n                                                onChange={(e) => setPassword(e.target.value)}\n                                                required\n                                        />\n                                </div>\n                                {error && <p className=\"text-red-400 text-sm\">{error}</p>}\n                                <button\n                                        className=\"w-full py-3 rounded-lg font-semibold transition-colors\"\n                                        style={{ backgroundColor: '#0B7FB3', color: 'white' }}\n                                        disabled={loading}\n                                >\n                                        {loading ? 'Creating Account...' : 'Create Account'}\n                                </button>\n                        </form>\n\n                        <p className=\"mt-6 text-center text-sm text-white/70\">\n                                Already have an account?{' '}\n                                <Link href=\"/login\" className=\"font-semibold hover:underline\" style={{ color: '#0B7FB3' }}>\n                                        Login\n                                </Link>\n                        </p>\n                </div>\n        );\n}\n","size_bytes":8385},"next js/myntra-clone/src/app/wishlist/page.tsx":{"content":"'use client';\n\nimport { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { Heart } from 'lucide-react';\n\nexport default function WishlistPage() {\n  const [ids, setIds] = useState<string[]>([]);\n  const [products, setProducts] = useState<any[]>([]);\n\n  useEffect(() => {\n    const raw = localStorage.getItem('wishlist') || '[]';\n    const list = JSON.parse(raw) as string[];\n    setIds(list);\n  }, []);\n\n  useEffect(() => {\n    async function load() {\n      if (ids.length === 0) {\n        setProducts([]);\n        return;\n      }\n      const res = await fetch('/api/products');\n      const all = await res.json();\n      setProducts(all.filter((p: any) => ids.includes(p._id)));\n    }\n    load();\n  }, [ids]);\n\n  function remove(id: string) {\n    const next = ids.filter((x) => x !== id);\n    localStorage.setItem('wishlist', JSON.stringify(next));\n    setIds(next);\n  }\n\n  function moveToCart(product: any) {\n    const cartRaw = localStorage.getItem('cart') || '[]';\n    const cart = JSON.parse(cartRaw) as Array<any>;\n    \n    const existing = cart.find((item) => item.productId === product._id);\n    if (existing) {\n      existing.quantity += 1;\n    } else {\n      cart.push({\n        productId: product._id,\n        title: product.title,\n        price: product.price,\n        image: product.images?.[0] || '',\n        quantity: 1,\n        brand: product.brand,\n      });\n    }\n    \n    localStorage.setItem('cart', JSON.stringify(cart));\n    remove(product._id);\n    \n    window.dispatchEvent(new Event('storage'));\n  }\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\n        <div className=\"border-b border-gray-200 pb-4 mb-8\">\n          <h1 className=\"text-2xl font-bold text-gray-900\">\n            My Wishlist{' '}\n            <span className=\"text-gray-500 font-normal\">\n              {products.length} {products.length === 1 ? 'Item' : 'Items'}\n            </span>\n          </h1>\n        </div>\n\n        {products.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center py-16\">\n            <div className=\"relative w-64 h-64 mb-6\">\n              <Image\n                src=\"https://images.unsplash.com/photo-1483985988355-763728e1935b?q=80&w=800&auto=format&fit=crop\"\n                alt=\"Empty Wishlist\"\n                fill\n                className=\"object-contain opacity-50\"\n              />\n            </div>\n            <h2 className=\"text-2xl font-semibold text-gray-800 mb-2\">\n              Your wishlist is empty\n            </h2>\n            <p className=\"text-gray-500 mb-6 text-center max-w-md\">\n              Save your favorite items here and make your shopping easier\n            </p>\n            <Link\n              href=\"/\"\n              className=\"px-8 py-3 text-white font-semibold rounded-sm\"\n              style={{ backgroundColor: '#0B7FB3' }}\n            >\n              Continue Shopping\n            </Link>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\n            {products.map((p) => (\n              <div\n                key={p._id}\n                className=\"border border-gray-200 rounded-sm overflow-hidden hover:shadow-lg transition-shadow duration-300 bg-white group\"\n              >\n                <Link href={`/product/${p._id}`} className=\"block relative\">\n                  <div className=\"relative aspect-[3/4] bg-gray-100\">\n                    <Image\n                      src={\n                        p.images?.[0] ||\n                        'https://images.unsplash.com/photo-1520975922284-5f573fb8c642?q=80&w=800&auto=format&fit=crop'\n                      }\n                      alt={p.title}\n                      fill\n                      className=\"object-cover\"\n                    />\n                    <button\n                      onClick={(e) => {\n                        e.preventDefault();\n                        remove(p._id);\n                      }}\n                      className=\"absolute top-2 right-2 w-10 h-10 bg-white rounded-full flex items-center justify-center shadow-md hover:scale-110 transition-transform duration-200\"\n                      aria-label=\"Remove from wishlist\"\n                    >\n                      <Heart className=\"w-5 h-5 fill-red-500 text-red-500\" />\n                    </button>\n                  </div>\n                </Link>\n\n                <div className=\"p-3\">\n                  <Link href={`/product/${p._id}`}>\n                    <h3 className=\"font-semibold text-sm text-gray-900 mb-1\">\n                      {p.brand || 'Brand'}\n                    </h3>\n                    <p className=\"text-sm text-gray-600 line-clamp-1 mb-2\">\n                      {p.title}\n                    </p>\n\n                    <div className=\"flex items-center gap-2 mb-3\">\n                      <span className=\"font-bold text-gray-900\">\n                        ₹{p.price}\n                      </span>\n                      {p.originalPrice && p.originalPrice > p.price && (\n                        <>\n                          <span className=\"text-sm text-gray-400 line-through\">\n                            ₹{p.originalPrice}\n                          </span>\n                          <span className=\"text-xs font-semibold text-orange-500\">\n                            (\n                            {Math.round(\n                              ((p.originalPrice - p.price) / p.originalPrice) *\n                                100\n                            )}\n                            % OFF)\n                          </span>\n                        </>\n                      )}\n                    </div>\n                  </Link>\n\n                  <button\n                    onClick={() => moveToCart(p)}\n                    className=\"w-full py-2.5 text-sm font-bold text-white rounded-sm transition-colors duration-200 hover:opacity-90\"\n                    style={{ backgroundColor: '#0B7FB3' }}\n                  >\n                    MOVE TO BAG\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":6243},"next js/myntra-clone/src/app/api/products/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { Product } from '@/models/Product';\n\nexport async function GET() {\n\tawait connectToDatabase();\n\tconst products = await Product.find({}).limit(60).sort({ createdAt: -1 });\n\treturn NextResponse.json(products);\n}\n\nexport async function POST(req: NextRequest) {\n\tawait connectToDatabase();\n\tconst data = await req.json();\n\tconst product = await Product.create(data);\n\treturn NextResponse.json(product, { status: 201 });\n}\n\n","size_bytes":535},"next js/myntra-clone/src/app/api/seed/route.ts":{"content":"import { NextResponse } from 'next/server';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { Product } from '@/models/Product';\n\nconst BRANDS = ['Roadster', 'H&M', 'HRX', 'Here&Now', 'Levis', 'Lee'];\nconst CATEGORIES = ['Men', 'Women', 'Kids'];\nconst SIZES = ['XS','S','M','L','XL','XXL'];\nconst COLORS = ['Black','White','Blue','Red','Green','Yellow'];\n\nexport async function POST() {\n\tawait connectToDatabase();\n\tconst sample = Array.from({ length: 30 }).map((_, i) => {\n\t\tconst category = CATEGORIES[i % CATEGORIES.length];\n\t\tconst brand = BRANDS[i % BRANDS.length];\n\t\tconst sizes = SIZES.filter((_s, idx) => (i + idx) % 2 === 0); // variety\n\t\tconst colors = COLORS.filter((_c, idx) => (i + idx) % 2 === 1);\n\t\tconst rating = Math.round(((3 + (i % 3)) + Math.random()) * 10) / 10; // 3-5 range\n\t\treturn {\n\t\t\ttitle: `${brand} Tee ${i + 1}`,\n\t\t\tdescription: 'Soft cotton, stylish fit for daily wear.',\n\t\t\tprice: 399 + (i % 10) * 50,\n\t\t\timages: [\n\t\t\t\t'https://images.unsplash.com/photo-1519744792095-2f2205e87b6f?q=80&w=1200&auto=format&fit=crop',\n\t\t\t],\n\t\t\tcategory,\n\t\t\tbrand,\n\t\t\trating,\n\t\t\tsizes,\n\t\t\tcolors,\n\t\t};\n\t});\n\tawait Product.deleteMany({});\n\tawait Product.insertMany(sample);\n\treturn NextResponse.json({ inserted: sample.length });\n}\n","size_bytes":1253},"next js/myntra-clone/src/app/orders/[id]/page.tsx":{"content":"import { getSession } from '@/lib/session';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { Order } from '@/models/Order';\nimport Image from 'next/image';\n\nexport default async function OrderDetails({ params }: { params: Promise<{ id: string }> }) {\n\tconst session = await getSession();\n\tif (!session) return <p className=\"text-white/70\">Please login to view the order.</p>;\n\tconst { id } = await params;\n\tawait connectToDatabase();\n\tconst order = await Order.findOne({ _id: id, user: session.userId });\n\tif (!order) return <p>Order not found</p>;\n\treturn (\n\t\t<div className=\"space-y-4\">\n\t\t\t<h1 className=\"text-2xl font-semibold\">{order.orderNumber || `Order ${order._id.toString()}`}</h1>\n\t\t\t<p className=\"text-white/70\">Status: {order.status} • Placed on {new Date(order.createdAt).toLocaleString()}</p>\n\t\t\t<div className=\"space-y-2\">\n\t\t\t\t{order.items.map((it: any, idx: number) => (\n\t\t\t\t\t<div key={idx} className=\"flex items-center justify-between border-b border-white/10 pb-2\">\n\t\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t\t<div className=\"relative w-16 h-20 rounded overflow-hidden\">\n\t\t\t\t\t\t\t\t<Image src={it.image || 'https://images.unsplash.com/photo-1520975922284-5f573fb8c642?q=80&w=400&auto=format&fit=crop'} alt={it.title} fill className=\"object-cover\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<p className=\"text-sm\">{it.title}</p>\n\t\t\t\t\t\t\t\t<p className=\"text-xs text-white/70\">Qty {it.quantity}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p>₹ {it.price * it.quantity}</p>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t<p className=\"text-right text-lg\">Total: ₹ {order.totalAmount}</p>\n\t\t</div>\n\t);\n}\n","size_bytes":1615},"next js/myntra-clone/src/app/orders/success/page.tsx":{"content":"export default function OrderSuccessPage() {\n\treturn (\n\t\t<div className=\"max-w-md mx-auto text-center space-y-3\">\n\t\t\t<h1 className=\"text-2xl font-semibold\" style={{ color: '#26a541' }}>Payment Successful</h1>\n\t\t\t<p className=\"text-white/80\">Thank you for your purchase! Your order has been placed.</p>\n\t\t\t<a href=\"/orders\" className=\"btn btn-primary inline-block\">Go to My Orders</a>\n\t\t</div>\n\t);\n}\n\n","size_bytes":400},"next js/myntra-clone/src/app/product/[id]/page.tsx":{"content":"'use client';\n\nimport Image from 'next/image';\nimport { useEffect, useMemo, useState } from 'react';\n\nasync function fetchProductServer(id: string) {\n        const res = await fetch(`/api/products/${id}`);\n        return res.json();\n}\n\nfunction formatDelivery(daysFromNow = 4) {\n        const d = new Date(Date.now() + daysFromNow * 24 * 60 * 60 * 1000);\n        return d.toLocaleDateString();\n}\n\nexport default function ProductPage({ params }: { params: Promise<{ id: string }> }) {\n        const [product, setProduct] = useState<any>(null);\n        const [loading, setLoading] = useState(true);\n        const [wish, setWish] = useState(false);\n        const [qty, setQty] = useState(1);\n        const [reviews, setReviews] = useState<any[]>([]);\n        const [orderRatings, setOrderRatings] = useState<any[]>([]);\n        const [rating, setRating] = useState(5);\n        const [comment, setComment] = useState('');\n        const [selectedSize, setSelectedSize] = useState<string>('');\n\n        useEffect(() => {\n                (async () => {\n                        const { id } = await params;\n                        const data = await fetchProductServer(id);\n                        setProduct(data);\n                        setSelectedSize((data?.sizes && data.sizes[0]) || '');\n                        setLoading(false);\n                        const wlRaw = localStorage.getItem('wishlist') || '[]';\n                        const wl = JSON.parse(wlRaw) as string[];\n                        setWish(wl.includes(id));\n                        const rv = await fetch(`/api/products/${id}/reviews`);\n                        setReviews(await rv.json());\n                        const ratingsRes = await fetch(`/api/products/${id}/ratings`);\n                        if (ratingsRes.ok) {\n                                setOrderRatings(await ratingsRes.json());\n                        }\n                })();\n        }, [params]);\n\n        const averageRating = useMemo(() => {\n                if (!reviews.length) return product?.rating || 0;\n                const avg = reviews.reduce((s, r) => s + (r.rating || 0), 0) / reviews.length;\n                return Math.round(avg * 10) / 10;\n        }, [reviews, product]);\n\n        const original = Math.round((product?.price || 0) * 1.25);\n        const discount = original > 0 ? Math.max(0, Math.round(((original - (product?.price || 0)) / original) * 100)) : 0;\n\n        function addToCart() {\n                if (!product) return;\n                if (product?.sizes?.length && !selectedSize) {\n                        alert('Please select a size');\n                        return;\n                }\n                const raw = localStorage.getItem('cart') || '[]';\n                const cart = JSON.parse(raw) as any[];\n                const idx = cart.findIndex((c) => c.productId === product._id && c.size === selectedSize);\n                if (idx >= 0) {\n                        cart[idx].quantity += qty;\n                } else {\n                        cart.push({ productId: product._id, title: product.title, price: product.price, image: product.images?.[0] || '', quantity: qty, size: selectedSize, brand: product.brand });\n                }\n                localStorage.setItem('cart', JSON.stringify(cart));\n                window.dispatchEvent(new StorageEvent('storage', { key: 'cart' }));\n                alert('Added to cart');\n        }\n\n        function toggleWishlist() {\n                if (!product) return;\n                const raw = localStorage.getItem('wishlist') || '[]';\n                const wl = JSON.parse(raw) as string[];\n                const id = product._id as string;\n                const exists = wl.includes(id);\n                const next = exists ? wl.filter((x) => x !== id) : wl.concat(id);\n                localStorage.setItem('wishlist', JSON.stringify(next));\n                setWish(!exists);\n        }\n\n        async function submitReview() {\n                if (!product) return;\n                const res = await fetch(`/api/products/${product._id}/reviews`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ rating, comment }) });\n                if (res.ok) {\n                        const rv = await fetch(`/api/products/${product._id}/reviews`);\n                        setReviews(await rv.json());\n                        setComment('');\n                        alert('Review submitted');\n                } else {\n                        alert('Please login to review');\n                }\n        }\n\n        if (loading) return <p>Loading...</p>;\n        if (!product) return <p>Product not found</p>;\n\n        return (\n                <div className=\"space-y-8\">\n                        <div className=\"grid md:grid-cols-2 gap-8\">\n                                <div className=\"relative aspect-[3/4] rounded-xl overflow-hidden\">\n                                        <Image src={product.images?.[0] || 'https://images.unsplash.com/photo-1520975922284-5f573fb8c642?q=80&w=800&auto=format&fit=crop'} alt={product.title} fill className=\"object-cover\" />\n                                        <button aria-label=\"Wishlist\" title=\"Wishlist\" onClick={toggleWishlist} className=\"absolute top-3 right-3 bg-black/50 backdrop-blur px-3 py-1 rounded-full\">\n                                                <span style={{ color: wish ? '#0B7FB3' : '#fff' }}>{wish ? '❤️' : '♡'}</span>\n                                        </button>\n                                </div>\n                                <div>\n                                        <h1 className=\"text-2xl font-semibold\">{product.title}</h1>\n                                        <p className=\"text-white/70 mt-1 text-sm\">{product.brand || 'Brand'} • {product.category}</p>\n                                        <p className=\"mt-2 text-sm\">{averageRating} ★ ({reviews.length} reviews)</p>\n                                        <p className=\"mt-3 text-2xl\" style={{ color: '#26a541' }}>₹ {product.price}</p>\n                                        <p className=\"text-white/60\">\n                                                <span className=\"line-through\">₹ {original}</span>\n                                                <span className=\"ml-2\" style={{ color: '#26a541' }}>{discount}% OFF</span>\n                                                <span className=\"ml-3 text-sm\">Delivery by {formatDelivery(4)}</span>\n                                        </p>\n\n                                        {product?.sizes?.length ? (\n                                                <div className=\"mt-4\">\n                                                        <p className=\"text-sm text-white/80 mb-2\">Select Size</p>\n                                                        <div className=\"flex flex-wrap gap-2\">\n                                                                {product.sizes.map((s: string) => (\n                                                                        <button key={s} type=\"button\" onClick={() => setSelectedSize(s)} className={`px-3 py-1 rounded-md border ${selectedSize === s ? 'bg-[var(--brand)] text-white border-transparent' : 'border-white/20'}`}>\n                                                                                {s}\n                                                                        </button>\n                                                                ))}\n                                                        </div>\n                                                </div>\n                                        ) : null}\n\n                                        <div className=\"flex items-center gap-3 mt-4\">\n                                                <label className=\"text-white/70 text-sm\">Qty</label>\n                                                <select value={qty} onChange={(e) => setQty(parseInt(e.target.value))} className=\"bg-neutral-900 border border-white/10 rounded-md px-2 py-1\">\n                                                        {Array.from({ length: 10 }).map((_, i) => (\n                                                                <option key={i + 1} value={i + 1}>{i + 1}</option>\n                                                        ))}\n                                                </select>\n                                        </div>\n                                        <div className=\"flex gap-3 mt-6\">\n                                                <button className=\"btn btn-primary\" onClick={addToCart}>Add to cart</button>\n                                        </div>\n                                </div>\n                        </div>\n\n                        <div className=\"card p-4\">\n                                <h2 className=\"font-semibold mb-3\">Ratings & Reviews ({reviews.length + orderRatings.length} total)</h2>\n                                <div className=\"flex items-center gap-2 mb-3\">\n                                        <select value={rating} onChange={(e) => setRating(parseInt(e.target.value))} className=\"bg-neutral-900 border border-white/10 rounded-md px-2 py-1\">\n                                                {[5,4,3,2,1].map((r) => <option key={r} value={r}>{r} ★</option>)}\n                                        </select>\n                                        <input value={comment} onChange={(e) => setComment(e.target.value)} placeholder=\"Write a comment\" className=\"flex-1 px-3 py-2 rounded-md bg-neutral-900 border border-white/10\" />\n                                        <button className=\"btn btn-primary\" onClick={submitReview}>Submit</button>\n                                </div>\n\n                                {/* Order Ratings Section */}\n                                {orderRatings.length > 0 && (\n                                        <div className=\"mb-6\">\n                                                <h3 className=\"text-sm font-semibold text-[#0B7FB3] mb-3\">Verified Purchase Reviews</h3>\n                                                <div className=\"space-y-3\">\n                                                        {orderRatings.map((r: any, idx: number) => (\n                                                                <div key={`order-${idx}`} className=\"bg-neutral-900/50 p-3 rounded-lg border border-[#0B7FB3]/20\">\n                                                                        <div className=\"flex items-center gap-2 mb-2\">\n                                                                                <div className=\"flex text-yellow-400\">\n                                                                                        {[1, 2, 3, 4, 5].map((star) => (\n                                                                                                <span key={star} className={star <= r.stars ? 'text-yellow-400' : 'text-gray-600'}>★</span>\n                                                                                        ))}\n                                                                                </div>\n                                                                                <span className=\"text-xs bg-[#0B7FB3] text-white px-2 py-0.5 rounded-full\">Verified</span>\n                                                                        </div>\n                                                                        {r.review && <p className=\"text-white/80 text-sm mb-2\">{r.review}</p>}\n                                                                        <div className=\"flex items-center justify-between text-xs text-white/50\">\n                                                                                <span>{r.userName}</span>\n                                                                                <span>{new Date(r.createdAt).toLocaleDateString()}</span>\n                                                                        </div>\n                                                                </div>\n                                                        ))}\n                                                </div>\n                                        </div>\n                                )}\n\n                                {/* Regular Reviews Section */}\n                                {reviews.length > 0 && (\n                                        <div>\n                                                <h3 className=\"text-sm font-semibold mb-3\">Customer Reviews</h3>\n                                                <div className=\"space-y-2\">\n                                                        {[...reviews].reverse().map((r: any, idx: number) => (\n                                                                <div key={idx} className=\"border-b border-white/10 pb-2\">\n                                                                        <p className=\"text-sm\">{r.rating} ★</p>\n                                                                        <p className=\"text-white/80 text-sm\">{r.comment}</p>\n                                                                        <p className=\"text-white/50 text-xs\">{new Date(r.createdAt).toLocaleString()}</p>\n                                                                </div>\n                                                        ))}\n                                                </div>\n                                        </div>\n                                )}\n\n                                {reviews.length === 0 && orderRatings.length === 0 && (\n                                        <p className=\"text-white/70 text-sm text-center py-4\">No reviews yet. Be the first to review!</p>\n                                )}\n                        </div>\n                </div>\n        );\n}\n","size_bytes":13796},"next js/myntra-clone/src/app/api/auth/login/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { User } from '@/models/User';\nimport { signAuthToken } from '@/lib/auth';\n\nexport async function POST(req: NextRequest) {\n\ttry {\n\t\tawait connectToDatabase();\n\t\tconst { email, password } = await req.json();\n\t\tif (!email || !password) {\n\t\t\treturn NextResponse.json({ message: 'Missing fields' }, { status: 400 });\n\t\t}\n\t\tconst user = await User.findOne({ email }).select('+password');\n\t\tif (!user) return NextResponse.json({ message: 'Invalid credentials' }, { status: 401 });\n\t\tconst ok = await user.comparePassword(password);\n\t\tif (!ok) return NextResponse.json({ message: 'Invalid credentials' }, { status: 401 });\n        const token = signAuthToken({ userId: user._id.toString(), email });\n        const response = NextResponse.json({ id: user._id, name: user.name, email: user.email });\n        // Web: cookie; Mobile: also expose token via header for RN clients\n        response.cookies.set('token', token, { httpOnly: true, secure: process.env.NODE_ENV === 'production', sameSite: 'lax', maxAge: 60 * 60 * 24 * 7, path: '/' });\n        response.headers.set('x-auth-token', token);\n        return response;\n\t} catch (e: any) {\n\t\treturn NextResponse.json({ message: e.message || 'Server error' }, { status: 500 });\n\t}\n}\n","size_bytes":1339},"next js/myntra-clone/src/app/api/auth/logout/route.ts":{"content":"import { NextResponse } from 'next/server';\n\nexport async function POST() {\n\tconst res = NextResponse.json({ ok: true });\n\tres.cookies.set('token', '', { httpOnly: true, secure: true, sameSite: 'lax', maxAge: 0, path: '/' });\n\treturn res;\n}\n\n","size_bytes":242},"next js/myntra-clone/src/app/api/auth/signup/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { User } from '@/models/User';\nimport { signAuthToken } from '@/lib/auth';\n\nexport async function POST(req: NextRequest) {\n        try {\n                await connectToDatabase();\n                const { name, email, password, phone } = await req.json();\n                if (!name || !email || !password || !phone) {\n                        return NextResponse.json({ message: 'All fields are required including phone number' }, { status: 400 });\n                }\n                const existing = await User.findOne({ email });\n                if (existing) {\n                        return NextResponse.json({ message: 'Email already in use' }, { status: 409 });\n                }\n                const phoneExists = await User.findOne({ phone });\n                if (phoneExists) {\n                        return NextResponse.json({ message: 'Phone number already in use' }, { status: 409 });\n                }\n                const user = await User.create({ name, email, password, phone });\n        const token = signAuthToken({ userId: user._id.toString(), email });\n        const response = NextResponse.json({ id: user._id, name: user.name, email: user.email });\n        response.cookies.set('token', token, { httpOnly: true, secure: process.env.NODE_ENV === 'production', sameSite: 'lax', maxAge: 60 * 60 * 24 * 7, path: '/' });\n        response.headers.set('x-auth-token', token);\n        return response;\n        } catch (e: any) {\n                return NextResponse.json({ message: e.message || 'Server error' }, { status: 500 });\n        }\n}\n","size_bytes":1671},"next js/myntra-clone/src/app/api/checkout/create-order/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { razorpay } from '@/lib/razorpay';\nimport { Order } from '@/models/Order';\nimport { Product } from '@/models/Product';\n\nfunction generateOrderNumber(): string {\n\treturn `ORD-${Date.now()}-${Math.floor(Math.random() * 1000).toString().padStart(3, '0')}`;\n}\n\nexport async function POST(req: NextRequest) {\n\ttry {\n\t\tawait connectToDatabase();\n\t\tconst body = await req.json();\n\t\tconst items = Array.isArray(body.items) ? body.items : [];\n\t\tconst totalAmount = Number(body.totalAmount);\n\t\tconst userId = body.userId as string;\n\t\tif (!items.length || !totalAmount || !userId) {\n\t\t\treturn NextResponse.json({ message: 'Invalid payload' }, { status: 400 });\n\t\t}\n\t\tconst productIds = items.map((i: any) => i.product);\n\t\tconst products = await Product.find({ _id: { $in: productIds } });\n\t\tconst itemsWithSnapshot = items.map((it: any) => {\n\t\t\tconst p = products.find((pp: any) => pp._id.toString() === it.product);\n\t\t\treturn {\n\t\t\t\tproduct: it.product,\n\t\t\t\ttitle: p?.title || 'Product',\n\t\t\t\timage: p?.images?.[0] || '',\n\t\t\t\tquantity: Number(it.quantity) || 1,\n\t\t\t\tprice: Number(it.price) || Number(p?.price) || 0,\n\t\t\t};\n\t\t});\n\n\t\tconst order = await Order.create({\n\t\t\torderNumber: generateOrderNumber(),\n\t\t\tuser: userId,\n\t\t\titems: itemsWithSnapshot,\n\t\t\ttotalAmount,\n\t\t\tstatus: 'created',\n\t\t});\n\t\tconst razorOrder = await razorpay.orders.create({\n\t\t\tamount: Math.round(totalAmount * 100),\n\t\t\tcurrency: 'INR',\n\t\t\treceipt: order._id.toString(),\n\t\t});\n\t\torder.razorpayOrderId = razorOrder.id as any;\n\t\tawait order.save();\n\t\treturn NextResponse.json({ razorOrderId: razorOrder.id, orderId: order._id, orderNumber: order.orderNumber });\n\t} catch (e: any) {\n\t\treturn NextResponse.json({ message: e?.message || 'Server error' }, { status: 500 });\n\t}\n}\n","size_bytes":1849},"next js/myntra-clone/src/app/api/checkout/verify/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport crypto from 'crypto';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { Order } from '@/models/Order';\n\nconst RAZORPAY_KEY_SECRET = process.env.RAZORPAY_KEY_SECRET as string;\n\nexport async function POST(req: NextRequest) {\n        await connectToDatabase();\n        const { razorpay_order_id, razorpay_payment_id, razorpay_signature } = await req.json();\n        if (!razorpay_order_id || !razorpay_payment_id || !razorpay_signature)\n                return NextResponse.json({ message: 'Invalid payload' }, { status: 400 });\n\n        const order = await Order.findOne({ razorpayOrderId: razorpay_order_id });\n        if (!order) return NextResponse.json({ message: 'Order not found' }, { status: 404 });\n\n        const body = `${razorpay_order_id}|${razorpay_payment_id}`;\n        const expectedSignature = crypto\n                .createHmac('sha256', RAZORPAY_KEY_SECRET)\n                .update(body)\n                .digest('hex');\n\n        if (expectedSignature !== razorpay_signature) {\n                order.status = 'failed';\n                await order.save();\n                return NextResponse.json({ message: 'Invalid signature' }, { status: 400 });\n        }\n\n        order.status = 'processing';\n        order.razorpayPaymentId = razorpay_payment_id;\n        order.razorpaySignature = razorpay_signature;\n        \n        // Set delivery date to 7 days from now\n        const deliveryDate = new Date();\n        deliveryDate.setDate(deliveryDate.getDate() + 7);\n        order.deliveryDate = deliveryDate;\n        \n        // Initialize tracking status\n        order.trackingStatus = [\n                {\n                        stage: 'processing',\n                        message: 'Order confirmed and being processed',\n                        updatedAt: new Date(),\n                }\n        ];\n        \n        await order.save();\n\n        return NextResponse.json({ message: 'Payment verified', orderId: order._id });\n}\n\n","size_bytes":2011},"next js/myntra-clone/src/app/api/products/[id]/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { Product } from '@/models/Product';\n\nexport async function GET(\n\t_req: NextRequest,\n\tctx: { params: Promise<{ id: string }> }\n) {\n\tawait connectToDatabase();\n\tconst { id } = await ctx.params;\n\tconst product = await Product.findById(id);\n\tif (!product) return NextResponse.json({ message: 'Not found' }, { status: 404 });\n\treturn NextResponse.json(product);\n}\n","size_bytes":475},"next js/myntra-clone/src/app/api/user/address/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { User } from '@/models/User';\nimport { getSession } from '@/lib/session';\n\nexport async function POST(req: NextRequest) {\n  try {\n    const session = await getSession(req);\n    if (!session) {\n      return NextResponse.json({ message: 'Unauthorized' }, { status: 401 });\n    }\n\n    await connectToDatabase();\n    const address = await req.json();\n\n    const user = await User.findById(session.userId);\n    if (!user) {\n      return NextResponse.json({ message: 'User not found' }, { status: 404 });\n    }\n\n    user.addresses.push(address);\n    await user.save();\n\n    return NextResponse.json({ message: 'Address added', addresses: user.addresses });\n  } catch (e: any) {\n    return NextResponse.json({ message: e.message || 'Server error' }, { status: 500 });\n  }\n}\n\nexport async function PUT(req: NextRequest) {\n  try {\n    const session = await getSession(req);\n    if (!session) {\n      return NextResponse.json({ message: 'Unauthorized' }, { status: 401 });\n    }\n\n    await connectToDatabase();\n    const { _id, ...addressData } = await req.json();\n\n    const user = await User.findById(session.userId);\n    if (!user) {\n      return NextResponse.json({ message: 'User not found' }, { status: 404 });\n    }\n\n    const addressIndex = user.addresses.findIndex((a: any) => a._id.toString() === _id);\n    if (addressIndex === -1) {\n      return NextResponse.json({ message: 'Address not found' }, { status: 404 });\n    }\n\n    user.addresses[addressIndex] = { ...user.addresses[addressIndex], ...addressData };\n    await user.save();\n\n    return NextResponse.json({ message: 'Address updated', addresses: user.addresses });\n  } catch (e: any) {\n    return NextResponse.json({ message: e.message || 'Server error' }, { status: 500 });\n  }\n}\n\nexport async function DELETE(req: NextRequest) {\n  try {\n    const session = await getSession(req);\n    if (!session) {\n      return NextResponse.json({ message: 'Unauthorized' }, { status: 401 });\n    }\n\n    const { searchParams } = new URL(req.url);\n    const id = searchParams.get('id');\n\n    if (!id) {\n      return NextResponse.json({ message: 'Address ID required' }, { status: 400 });\n    }\n\n    await connectToDatabase();\n    const user = await User.findById(session.userId);\n    if (!user) {\n      return NextResponse.json({ message: 'User not found' }, { status: 404 });\n    }\n\n    user.addresses = user.addresses.filter((a: any) => a._id.toString() !== id);\n    await user.save();\n\n    return NextResponse.json({ message: 'Address deleted', addresses: user.addresses });\n  } catch (e: any) {\n    return NextResponse.json({ message: e.message || 'Server error' }, { status: 500 });\n  }\n}\n","size_bytes":2756},"next js/myntra-clone/src/app/api/user/me/route.ts":{"content":"import { NextResponse } from 'next/server';\nimport { getSession } from '@/lib/session';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { User } from '@/models/User';\n\nexport async function GET() {\n        const session = await getSession();\n        if (!session) return NextResponse.json({ message: 'Unauthorized' }, { status: 401 });\n        await connectToDatabase();\n        const user = await User.findById(session.userId);\n        return NextResponse.json({ \n                _id: user._id, \n                name: user.name, \n                email: user.email, \n                phone: user.phone,\n                addresses: user.addresses || [], \n                paymentMethods: user.paymentMethods || [] \n        });\n}\n\n","size_bytes":736},"next js/myntra-clone/src/app/api/products/[id]/reviews/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { Product } from '@/models/Product';\nimport { getSession } from '@/lib/session';\n\nexport async function GET(_req: NextRequest, ctx: { params: Promise<{ id: string }> }) {\n\tawait connectToDatabase();\n\tconst { id } = await ctx.params;\n\tconst product = await Product.findById(id);\n\tif (!product) return NextResponse.json({ message: 'Not found' }, { status: 404 });\n\treturn NextResponse.json(product.reviews || []);\n}\n\nexport async function POST(req: NextRequest, ctx: { params: Promise<{ id: string }> }) {\n\tconst session = await getSession();\n\tif (!session) return NextResponse.json({ message: 'Unauthorized' }, { status: 401 });\n\tawait connectToDatabase();\n\tconst { id } = await ctx.params;\n\tconst body = await req.json();\n\tconst rating = Number(body.rating);\n\tconst comment = body.comment || '';\n\tif (!rating || Number.isNaN(rating)) return NextResponse.json({ message: 'Rating required' }, { status: 400 });\n\tconst product = await Product.findById(id);\n\tif (!product) return NextResponse.json({ message: 'Not found' }, { status: 404 });\n\tif (!product.reviews) product.reviews = [] as any;\n\t(product.reviews as any).push({ user: session.userId as any, rating, comment, createdAt: new Date() });\n\tconst avg = (product.reviews as any).reduce((s: number, r: any) => s + r.rating, 0) / (product.reviews as any).length;\n\tproduct.rating = Math.round(avg * 10) / 10;\n\tawait product.save();\n\treturn NextResponse.json({ ok: true }, { status: 201 });\n}\n","size_bytes":1558},"next js/myntra-clone/src/app/api/auth/[...nextauth]/route.ts":{"content":"import NextAuth from \"next-auth\";\nimport GoogleProvider from \"next-auth/providers/google\";\nimport CredentialsProvider from \"next-auth/providers/credentials\";\nimport { connectToDatabase } from \"@/lib/mongodb\";\nimport { User } from \"@/models/User\";\nimport { signAuthToken } from \"@/lib/auth\";\nimport { cookies } from \"next/headers\";\n\nconst authOptions = {\n  providers: [\n    GoogleProvider({\n      clientId: process.env.GOOGLE_CLIENT_ID as string,\n      clientSecret: process.env.GOOGLE_CLIENT_SECRET as string,\n    }),\n    CredentialsProvider({\n      name: \"Credentials\",\n      credentials: {\n        email: { label: \"Email\", type: \"email\" },\n        password: { label: \"Password\", type: \"password\" },\n      },\n      async authorize(credentials) {\n        if (!credentials?.email || !credentials?.password) {\n          throw new Error(\"Email and password are required\");\n        }\n\n        await connectToDatabase();\n        const user = await User.findOne({ email: credentials.email }).select('+password');\n\n        if (!user || !user.password) {\n          throw new Error(\"Invalid email or password\");\n        }\n\n        const isValid = await user.comparePassword(credentials.password);\n\n        if (!isValid) {\n          throw new Error(\"Invalid email or password\");\n        }\n\n        return {\n          id: user._id.toString(),\n          email: user.email,\n          name: user.name,\n        };\n      },\n    }),\n  ],\n  session: {\n    strategy: \"jwt\" as const,\n  },\n  pages: {\n    signIn: \"/login\",\n  },\n  callbacks: {\n    async signIn({ user, account, profile }: any) {\n      if (account?.provider === \"google\") {\n        await connectToDatabase();\n        \n        let dbUser = await User.findOne({ email: user.email });\n        \n        if (!dbUser) {\n          dbUser = await User.create({\n            name: user.name || profile?.name,\n            email: user.email,\n          });\n        }\n        \n        // Store user ID in the user object so we can access it in jwt callback\n        user.dbId = dbUser._id.toString();\n      }\n      return true;\n    },\n    async jwt({ token, user, account }: any) {\n      if (user?.dbId) {\n        token.dbId = user.dbId;\n      } else if (user) {\n        await connectToDatabase();\n        const dbUser = await User.findOne({ email: user.email });\n        if (dbUser) {\n          token.dbId = dbUser._id.toString();\n        }\n      }\n      return token;\n    },\n    async session({ session, token }: any) {\n      if (session.user) {\n        session.user.id = token.dbId;\n      }\n      return session;\n    },\n  },\n  secret: process.env.NEXTAUTH_SECRET,\n};\n\nconst handler = NextAuth(authOptions);\n\nexport { handler as GET, handler as POST };\n","size_bytes":2684},"next js/myntra-clone/src/app/reset-password/page.tsx":{"content":"'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useSearchParams, useRouter } from 'next/navigation';\nimport Link from 'next/link';\n\nexport default function ResetPasswordPage() {\n        const searchParams = useSearchParams();\n        const router = useRouter();\n        const [token, setToken] = useState('');\n        const [password, setPassword] = useState('');\n        const [confirmPassword, setConfirmPassword] = useState('');\n        const [loading, setLoading] = useState(false);\n        const [success, setSuccess] = useState(false);\n        const [error, setError] = useState('');\n\n        useEffect(() => {\n                const tokenParam = searchParams.get('token');\n                if (!tokenParam) {\n                        setError('Invalid reset link');\n                } else {\n                        setToken(tokenParam);\n                }\n        }, [searchParams]);\n\n        async function handleSubmit(e: React.FormEvent) {\n                e.preventDefault();\n                setLoading(true);\n                setError('');\n\n                if (password !== confirmPassword) {\n                        setError('Passwords do not match');\n                        setLoading(false);\n                        return;\n                }\n\n                if (password.length < 6) {\n                        setError('Password must be at least 6 characters');\n                        setLoading(false);\n                        return;\n                }\n\n                try {\n                        const res = await fetch('/api/auth/reset-password', {\n                                method: 'POST',\n                                headers: { 'Content-Type': 'application/json' },\n                                body: JSON.stringify({ token, password }),\n                        });\n\n                        if (!res.ok) throw new Error((await res.json()).message);\n\n                        setSuccess(true);\n                        setTimeout(() => router.push('/login'), 2000);\n                } catch (e: any) {\n                        setError(e.message || 'Failed to reset password');\n                } finally {\n                        setLoading(false);\n                }\n        }\n\n        if (!token && !error) {\n                return (\n                        <div className=\"max-w-md mx-auto text-center\">\n                                <p className=\"text-white/70\">Loading...</p>\n                        </div>\n                );\n        }\n\n        return (\n                <div className=\"max-w-md mx-auto\">\n                        <h1 className=\"text-3xl font-bold mb-2\" style={{ color: '#0B7FB3' }}>\n                                Reset Password\n                        </h1>\n                        <p className=\"text-white/70 mb-6\">Enter your new password below.</p>\n\n                        {success ? (\n                                <div className=\"p-4 rounded-lg bg-green-500/10 border border-green-500/20 mb-4\">\n                                        <p className=\"text-green-400\">\n                                                Password reset successful! Redirecting to login...\n                                        </p>\n                                </div>\n                        ) : null}\n\n                        {!success && token ? (\n                                <form onSubmit={handleSubmit} className=\"space-y-4\">\n                                        <div>\n                                                <label className=\"block text-sm mb-1 text-white/80\">New Password</label>\n                                                <input\n                                                        className=\"w-full px-4 py-3 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#0B7FB3] focus:outline-none transition-colors\"\n                                                        placeholder=\"Enter new password\"\n                                                        type=\"password\"\n                                                        value={password}\n                                                        onChange={(e) => setPassword(e.target.value)}\n                                                        required\n                                                />\n                                        </div>\n\n                                        <div>\n                                                <label className=\"block text-sm mb-1 text-white/80\">Confirm Password</label>\n                                                <input\n                                                        className=\"w-full px-4 py-3 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#0B7FB3] focus:outline-none transition-colors\"\n                                                        placeholder=\"Confirm new password\"\n                                                        type=\"password\"\n                                                        value={confirmPassword}\n                                                        onChange={(e) => setConfirmPassword(e.target.value)}\n                                                        required\n                                                />\n                                        </div>\n\n                                        {error && <p className=\"text-red-400 text-sm\">{error}</p>}\n\n                                        <button\n                                                className=\"w-full py-3 rounded-lg font-semibold transition-colors\"\n                                                style={{ backgroundColor: '#0B7FB3', color: 'white' }}\n                                                disabled={loading}\n                                        >\n                                                {loading ? 'Resetting...' : 'Reset Password'}\n                                        </button>\n                                </form>\n                        ) : error ? (\n                                <div className=\"p-4 rounded-lg bg-red-500/10 border border-red-500/20 mb-4\">\n                                        <p className=\"text-red-400\">{error}</p>\n                                        <Link href=\"/forgot-password\" className=\"text-sm mt-2 inline-block hover:underline\" style={{ color: '#0B7FB3' }}>\n                                                Request a new reset link\n                                        </Link>\n                                </div>\n                        ) : null}\n\n                        <div className=\"mt-6 text-center\">\n                                <Link href=\"/login\" className=\"text-sm hover:underline\" style={{ color: '#0B7FB3' }}>\n                                        Back to Login\n                                </Link>\n                        </div>\n                </div>\n        );\n}\n","size_bytes":6820},"next js/myntra-clone/src/app/api/auth/reset-password/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport bcrypt from 'bcryptjs';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { User } from '@/models/User';\nimport { resetTokens } from '../forgot-password/route';\n\nexport async function POST(req: NextRequest) {\n  try {\n    const { token, password } = await req.json();\n\n    if (!token || !password) {\n      return NextResponse.json(\n        { message: 'Token and password are required' },\n        { status: 400 }\n      );\n    }\n\n    const stored = resetTokens.get(token);\n\n    if (!stored) {\n      return NextResponse.json(\n        { message: 'Invalid or expired reset token' },\n        { status: 400 }\n      );\n    }\n\n    if (stored.expires < Date.now()) {\n      resetTokens.delete(token);\n      return NextResponse.json(\n        { message: 'Reset token has expired' },\n        { status: 400 }\n      );\n    }\n\n    await connectToDatabase();\n    const user = await User.findOne({ email: stored.email });\n\n    if (!user) {\n      return NextResponse.json({ message: 'User not found' }, { status: 404 });\n    }\n\n    const hashedPassword = await bcrypt.hash(password, 10);\n    user.password = hashedPassword;\n    await user.save();\n\n    resetTokens.delete(token);\n\n    return NextResponse.json({ message: 'Password reset successful' });\n  } catch (error: any) {\n    console.error('Reset password error:', error);\n    return NextResponse.json(\n      { message: 'Failed to reset password' },\n      { status: 500 }\n    );\n  }\n}\n","size_bytes":1491},"replit.md":{"content":"# Myntra Clone - E-commerce Platform\n\n## Overview\n\nA full-stack e-commerce application inspired by Myntra, built with Next.js for web and React Native (Expo) for mobile. The platform features product browsing, wishlist management, shopping cart functionality, user authentication, and integrated payment processing via Razorpay. The application showcases a modern fashion retail experience with filtering, search, and order management capabilities.\n\n**Recent Changes (October 8, 2025)**\n- Migrated from Vercel to Replit environment\n- Fixed Next.js 15 async headers API compatibility in session management\n- Configured development server to run on port 5000 with 0.0.0.0 binding for Replit\n- **NEW Authentication Features Implemented:**\n  - Google SSO for sign in and signup using NextAuth.js\n  - OTP-based login via SMS using Twilio (requires phone number in database)\n  - Password-based login with existing JWT system\n  - Forgot password functionality with email reset links\n  - Dual authentication mode (password/OTP) on login page\n  - Phone number is now mandatory for all signups\n  - Google OAuth users are redirected to complete profile with phone number\n  - OTP login only works for users with registered phone numbers\n- **NEW Premium Home Page Design:**\n  - Auto-rotating hero banner slider with 3 slides (5-second intervals)\n  - Shop by Category section with 6 categories (Men, Women, Kids, Footwear, Accessories, Beauty)\n  - Shop Sale section with 4 sale cards featuring discount badges\n  - New Arrivals section with 4 latest collection cards\n  - Trending Collections section with 4 curated collections\n  - Top Brands carousel with 6 brand logos (Nike, Puma, Adidas, H&M, Zara, Levi's)\n  - Newsletter subscription section with email capture\n  - Modern color scheme: Primary #0B7FB3 (teal blue), Success #26a541 (green)\n  - All buttons functional with category navigation\n- **NEW Category Page with Myntra-Style Filters (FULLY FUNCTIONAL):**\n  - Dynamic routing for all categories (/category/[slug])\n  - Category-specific filters: Brands for fashion categories (Men, Women, Kids, Footwear, Accessories), Product Types for Beauty (Lipstick, Face Wash, Serum, Kajal, Moisturizer, Nail Polish, Compact Powder)\n  - **WORKING FILTERS**: Products are now filtered by selected brands/types, price range, and colors\n  - **WORKING SORTING**: Products can be sorted by price, rating, discount, popularity\n  - Sort dropdown: Recommended, What's New, Popularity, Better Discount, Price (High/Low), Rating\n  - Mobile-responsive with toggle filters button\n  - Product grid with hover effects and functional wishlist buttons\n  - **FIXED**: Wishlist icon now adds/removes items without redirecting to product page (uses stopPropagation)\n  - Rating badges and discount percentages on product cards\n  - \"Clear All\" filters functionality\n  - Light theme with white sidebar and blue gradient headers\n- **NEW Modern Cart Page (Myntra-Inspired):**\n  - Empty cart state with image and \"Hey, it feels so light!\" message\n  - Shopping bag layout with product cards featuring images and quantity controls\n  - Price details sidebar: Total MRP, Discount, Delivery Fee, Total Amount\n  - Payment method icons: Visa, Mastercard, Amex, UPI, Paytm, COD\n  - Quantity increment/decrement with circular buttons\n  - Individual product remove functionality\n  - Free delivery for orders above ₹1000\n  - Responsive 2-column layout (cart items + price summary)\n- **NEW Wishlist Page (Myntra-Style):**\n  - Header with dynamic item count (e.g., \"My Wishlist 3 Items\")\n  - Empty state with shopping-themed image and encouraging message\n  - Product grid layout with responsive columns (2-5 columns based on screen size)\n  - Heart icon (filled, red) button positioned on product image to remove items\n  - Product cards display: Brand name, product title, price with discount percentage\n  - \"MOVE TO BAG\" button on each card - adds to cart and removes from wishlist\n  - Hover effects and shadow transitions for enhanced UX\n  - White background theme matching overall site design\n  - \"Continue Shopping\" CTA button in empty state\n- **NEW User Dashboard:**\n  - Comprehensive dashboard with profile management\n  - Saved addresses with full CRUD operations\n  - Payment methods management (Card, UPI, Net Banking)\n  - Order history with payment status tracking\n  - Conditional navbar (Login/Signup when logged out, Dashboard/Logout when logged in)\n  - All environment variables configured via Replit Secrets\n- **Database Seeding:**\n  - Comprehensive seed script at `/scripts/seed.ts`\n  - 28 diverse products across 6 categories (Men: 5, Women: 5, Kids: 3, Footwear: 4, Accessories: 4, Beauty: 7)\n  - Varied discount percentages (15%-70%) across products\n  - Unique product images from Unsplash\n  - Multiple brands per category for realistic filtering\n  - Run with: `npx tsx scripts/seed.ts`\n- **Payment Processing:**\n  - **FIXED**: Razorpay integration now fully functional with proper error handling\n  - Enhanced checkout page with proper cart structure handling (productId field)\n  - Razorpay script loading verification before payment initiation\n  - Improved user feedback with loading states and error messages\n  - Payment verification with HMAC SHA256 signature validation\n  - Order status tracking: created → paid/failed\n  - Cart cleared and user redirected to orders page after successful payment\n- **NEW Orders Page (Myntra-Style):**\n  - Clean order history page with status badges (Confirmed/Failed/Processing)\n  - Order cards showing: order number, placed date, delivery estimate, total amount\n  - Product images with quantity and individual prices\n  - Color-coded status indicators (green for success, red for failed, yellow for processing)\n  - Estimated delivery date (5 days from order placement)\n  - Empty state with encouraging message and \"Start Shopping\" button\n  - Smooth animations on load with responsive design\n- **Enhanced Search UI:**\n  - Product images now display like wishlist page (previously text-only)\n  - Product grid with responsive columns (2-5 columns based on screen size)\n  - Product cards show: brand name, title, price, discount badges, ratings\n  - Empty state with image and helpful message\n  - Dynamic results count display\n  - Hover effects and shadow transitions\n- **Consistent Blue Theme Applied:**\n  - Replaced all pink colors (#ff3f6c) with blue (#0B7FB3) across all pages\n  - Updated login page: headings, buttons, tabs, links, OTP input focus, \"Create account\" link\n  - Updated signup page: headings, buttons, links, input focus borders\n  - Updated dashboard page: headings, tab navigation, edit links, input focus borders\n  - Updated product page: wishlist heart icon color\n  - Consistent brand color throughout: Primary #0B7FB3 (teal blue), Success #26a541 (green)\n- **FIXED Authentication Issues (October 8, 2025):**\n  - **Password Login Fixed**: Changed from NextAuth credentials to custom /api/auth/login endpoint\n  - **Session Management Fixed**: Password login now creates proper JWT cookie that navbar recognizes\n  - **OTP Cookie Path Fixed**: Added path: '/' to verify-otp endpoint cookie settings\n  - **Profile Visibility Fixed**: Both password and OTP login now show profile/logout in navbar\n  - **Forgot Password Fixed**: Fixed User model import error (changed from default to named export)\n  - **Color Theme Updated**: Changed forgot password and reset password pages from pink to blue (#0B7FB3)\n  - Authentication now uses unified JWT-based session across password and OTP login methods\n- **NEW Advanced Order Management System:**\n  - **Order Status Tracking**: Orders progress through statuses: paid → processing → shipped → delivered (or cancelled)\n  - **Automatic Delivery Scheduling**: Delivery dates automatically set to 7 days from purchase date\n  - **Order Cancellation**: Users can cancel orders with reason selection (dropdown with 5 options)\n  - **Order Tracking**: Mock tracking information for testing order fulfillment flow\n  - **Customer Rating System**: Users can rate delivered orders (1-5 stars with optional review)\n  - **Dashboard Order Filtering**: Filter orders by status (All Orders, In Progress, Shipped, Delivered, Cancelled)\n  - **Verified Purchase Reviews**: Order ratings display on product detail pages with \"Verified\" badge\n  - **Enhanced Orders Page**: Cancel and Track buttons with modals, color-coded status indicators\n  - **Review Integration**: Product pages show both regular reviews and verified purchase ratings separately\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n\n**Web Application (Next.js 15)**\n- **Framework**: Next.js 15 with App Router and React Server Components\n- **Styling**: Tailwind CSS v4 with custom design tokens for brand colors (#0B7FB3 for primary teal blue, #26a541 for success green)\n- **State Management**: Client-side state using React hooks with localStorage persistence for cart and wishlist\n- **Image Optimization**: Next.js Image component with remote patterns configured for Unsplash and CDN sources\n- **Development Server**: Runs on port 5000 with Turbopack enabled for faster builds\n\n**Mobile Application (React Native/Expo)**\n- **Framework**: Expo SDK ~50.0 with Expo Router for file-based navigation\n- **Navigation**: Tab-based layout with bottom navigation (Home, Wishlist, Cart, Profile)\n- **State Management**: Custom hooks (useCart, useWishlist) with AsyncStorage persistence\n- **API Communication**: Axios client with automatic token injection from AsyncStorage\n- **Platform Support**: iOS, Android, and Web via Metro bundler\n\n### Backend Architecture\n\n**API Structure**\n- **Runtime**: Next.js API Routes (App Router convention)\n- **Database**: MongoDB with Mongoose ODM for schema definition and validation\n- **Session Management**: JWT-based authentication with dual-mode support:\n  - Web clients: HttpOnly cookies for security\n  - Mobile clients: Bearer tokens via Authorization header\n  - Unified session retrieval through `getSession()` helper\n\n**Authentication Flow**\n- **Multiple Authentication Methods:**\n  - Google OAuth via NextAuth.js for social login\n  - OTP via SMS using Twilio (6-digit code, 10-minute expiration)\n  - Email/Password using bcryptjs hashing (10 salt rounds)\n  - Forgot password with email reset tokens (1-hour expiration)\n- JWT tokens signed with HS256 algorithm (7-day expiration configurable)\n- Token verification middleware checks both cookie and Authorization header\n- Logout clears cookie and invalidates client-side token storage\n- NextAuth.js session management for OAuth flows\n\n**Data Models**\n- **User**: Name, email, hashed password (optional for OAuth/OTP users), phone number (optional), multiple addresses support\n- **Product**: Title, description, price, images array, category, brand, rating, stock, sizes, colors, embedded reviews\n- **Order**: Order number generation, user reference, items snapshot (preserves product details at purchase time), payment status tracking, Razorpay integration fields\n\n### Payment Integration\n\n**Razorpay Implementation**\n- Order creation with amount in paise (₹ * 100)\n- Payment verification using HMAC SHA256 signature validation\n- Order status tracking: created → paid/failed\n- Fallback mock implementation for development when credentials unavailable\n- Client-side Razorpay checkout script loaded via Next.js Script component\n\n### External Dependencies\n\n**Third-Party Services**\n- **Razorpay**: Payment gateway for order processing (requires RAZORPAY_KEY_ID and RAZORPAY_KEY_SECRET environment variables)\n- **MongoDB**: Primary database (requires MONGODB_URI environment variable with 'ecommerce' database)\n- **Unsplash**: Image CDN for product photography (configured in next.config.ts)\n\n**Key NPM Packages**\n- **Authentication**: next-auth@beta, jsonwebtoken (v9.0.2), bcryptjs (v3.0.2), @auth/mongodb-adapter\n- **Communication**: twilio (SMS OTP), nodemailer (password reset emails)\n- **Database**: mongoose (v8.19.0)\n- **Payment**: razorpay (v2.9.6)\n- **Mobile HTTP**: axios (v1.12.2)\n- **Storage**: @react-native-async-storage/async-storage (v1.21.0)\n\n**Development Tools**\n- TypeScript 5 for type safety\n- ESLint with Next.js config\n- Tailwind CSS PostCSS integration\n- Expo development tools and Metro bundler\n\n**Environment Configuration**\nRequired environment variables:\n- `MONGODB_URI`: MongoDB connection string\n- `JWT_SECRET`: Secret key for JWT signing\n- `JWT_EXPIRE`: Token expiration (default: 7d)\n- `RAZORPAY_KEY_ID`: Razorpay public key\n- `RAZORPAY_KEY_SECRET`: Razorpay private key\n- `NEXT_PUBLIC_RAZORPAY_KEY`: Client-side Razorpay key\n- `NEXTAUTH_SECRET`: NextAuth.js secret for session encryption\n- `NEXTAUTH_URL`: Application URL for OAuth callbacks\n- `GOOGLE_CLIENT_ID`: Google OAuth client ID\n- `GOOGLE_CLIENT_SECRET`: Google OAuth client secret\n- `TWILIO_ACCOUNT_SID`: Twilio account SID for SMS\n- `TWILIO_AUTH_TOKEN`: Twilio authentication token\n- `TWILIO_PHONE_NUMBER`: Twilio phone number for sending OTP\n- `EMAIL_SERVER`: SMTP server connection string for emails\n- `EMAIL_FROM`: Email address for sending password reset links\n- `EXPO_PUBLIC_API_BASE_URL`: Mobile app API endpoint (configured in app.config.ts)\n\n**Mobile API Configuration**\n- Base URL resolution: Environment variable → Expo config → Platform defaults\n- Android emulator: 10.0.2.2:3000 (host loopback mapping)\n- iOS simulator/web: localhost:3000\n- Configurable via app.config.ts extra.apiBaseUrl field","size_bytes":13472},"next js/myntra-clone/src/app/api/auth/verify-otp/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { User } from '@/models/User';\nimport { signAuthToken } from '@/lib/auth';\nimport otpStore from '@/lib/otpStore';\n\nexport async function POST(req: NextRequest) {\n  try {\n    const { phone, otp, name } = await req.json();\n\n    if (!phone || !otp) {\n      return NextResponse.json(\n        { message: 'Phone and OTP are required' },\n        { status: 400 }\n      );\n    }\n\n    const stored = otpStore.get(phone);\n\n    if (!stored) {\n      return NextResponse.json({ message: 'OTP not found or expired' }, { status: 400 });\n    }\n\n    if (stored.expires < Date.now()) {\n      otpStore.delete(phone);\n      return NextResponse.json({ message: 'OTP expired' }, { status: 400 });\n    }\n\n    if (stored.otp !== otp) {\n      return NextResponse.json({ message: 'Invalid OTP' }, { status: 400 });\n    }\n\n    otpStore.delete(phone);\n\n    await connectToDatabase();\n    let user = await User.findOne({ phone });\n\n    if (!user) {\n      user = await User.create({\n        phone,\n        name: name || 'User',\n        email: `${phone}@phone.local`,\n      });\n    }\n\n    const token = signAuthToken({\n      userId: user._id.toString(),\n      email: user.email,\n    });\n\n    const response = NextResponse.json({\n      message: 'Login successful',\n      user: { id: user._id, name: user.name, email: user.email },\n    });\n\n    response.cookies.set('token', token, {\n      httpOnly: true,\n      secure: process.env.NODE_ENV === 'production',\n      sameSite: 'lax',\n      maxAge: 7 * 24 * 60 * 60,\n      path: '/',\n    });\n\n    return response;\n  } catch (error: any) {\n    console.error('Verify OTP error:', error);\n    return NextResponse.json(\n      { message: error.message || 'Failed to verify OTP' },\n      { status: 500 }\n    );\n  }\n}\n","size_bytes":1839},"next js/myntra-clone/src/app/api/auth/send-otp/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport twilio from 'twilio';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { User } from '@/models/User';\nimport otpStore from '@/lib/otpStore';\n\nconst client = twilio(\n  process.env.TWILIO_ACCOUNT_SID,\n  process.env.TWILIO_AUTH_TOKEN\n);\n\nexport async function POST(req: NextRequest) {\n  try {\n    const { phone } = await req.json();\n\n    if (!phone) {\n      return NextResponse.json({ message: 'Phone number is required' }, { status: 400 });\n    }\n\n    await connectToDatabase();\n    const user = await User.findOne({ phone });\n    \n    if (!user) {\n      return NextResponse.json({ message: 'Phone number not registered. Please sign up first.' }, { status: 404 });\n    }\n\n    const otp = Math.floor(100000 + Math.random() * 900000).toString();\n    const expires = Date.now() + 10 * 60 * 1000;\n\n    otpStore.set(phone, { otp, expires });\n\n    await client.messages.create({\n      body: `Your Myntra Clone login OTP is: ${otp}. Valid for 10 minutes.`,\n      from: process.env.TWILIO_PHONE_NUMBER,\n      to: phone,\n    });\n\n    return NextResponse.json({ message: 'OTP sent successfully' });\n  } catch (error: any) {\n    console.error('Send OTP error:', error);\n    return NextResponse.json(\n      { message: error.message || 'Failed to send OTP' },\n      { status: 500 }\n    );\n  }\n}\n","size_bytes":1353},"next js/myntra-clone/src/app/forgot-password/page.tsx":{"content":"'use client';\n\nimport { useState } from 'react';\nimport Link from 'next/link';\n\nexport default function ForgotPasswordPage() {\n        const [email, setEmail] = useState('');\n        const [loading, setLoading] = useState(false);\n        const [success, setSuccess] = useState(false);\n        const [error, setError] = useState('');\n\n        async function handleSubmit(e: React.FormEvent) {\n                e.preventDefault();\n                setLoading(true);\n                setError('');\n                setSuccess(false);\n\n                try {\n                        const res = await fetch('/api/auth/forgot-password', {\n                                method: 'POST',\n                                headers: { 'Content-Type': 'application/json' },\n                                body: JSON.stringify({ email }),\n                        });\n\n                        if (!res.ok) throw new Error((await res.json()).message);\n\n                        setSuccess(true);\n                        setEmail('');\n                } catch (e: any) {\n                        setError(e.message || 'Failed to send reset email');\n                } finally {\n                        setLoading(false);\n                }\n        }\n\n        return (\n                <div className=\"max-w-md mx-auto\">\n                        <h1 className=\"text-3xl font-bold mb-2\" style={{ color: '#0B7FB3' }}>\n                                Forgot Password?\n                        </h1>\n                        <p className=\"text-white/70 mb-6\">\n                                Enter your email address and we'll send you a link to reset your password.\n                        </p>\n\n                        {success ? (\n                                <div className=\"p-4 rounded-lg bg-green-500/10 border border-green-500/20 mb-4\">\n                                        <p className=\"text-green-400\">\n                                                If an account exists with that email, we've sent a password reset link. Please check your inbox.\n                                        </p>\n                                </div>\n                        ) : null}\n\n                        <form onSubmit={handleSubmit} className=\"space-y-4\">\n                                <div>\n                                        <label className=\"block text-sm mb-1 text-white/80\">Email Address</label>\n                                        <input\n                                                className=\"w-full px-4 py-3 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#0B7FB3] focus:outline-none transition-colors\"\n                                                placeholder=\"Enter your email\"\n                                                type=\"email\"\n                                                value={email}\n                                                onChange={(e) => setEmail(e.target.value)}\n                                                required\n                                        />\n                                </div>\n\n                                {error && <p className=\"text-red-400 text-sm\">{error}</p>}\n\n                                <button\n                                        className=\"w-full py-3 rounded-lg font-semibold transition-colors\"\n                                        style={{ backgroundColor: '#0B7FB3', color: 'white' }}\n                                        disabled={loading}\n                                >\n                                        {loading ? 'Sending...' : 'Send Reset Link'}\n                                </button>\n                        </form>\n\n                        <div className=\"mt-6 text-center\">\n                                <Link href=\"/login\" className=\"text-sm hover:underline\" style={{ color: '#0B7FB3' }}>\n                                        Back to Login\n                                </Link>\n                        </div>\n                </div>\n        );\n}\n","size_bytes":3969},"next js/myntra-clone/src/app/api/auth/forgot-password/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport nodemailer from 'nodemailer';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { User } from '@/models/User';\n\nconst resetTokens = new Map<string, { email: string; expires: number }>();\n\nexport async function POST(req: NextRequest) {\n  try {\n    const { email } = await req.json();\n\n    if (!email) {\n      return NextResponse.json({ message: 'Email is required' }, { status: 400 });\n    }\n\n    await connectToDatabase();\n    const user = await User.findOne({ email });\n\n    if (!user) {\n      return NextResponse.json(\n        { message: 'If an account exists, a reset link will be sent.' },\n        { status: 200 }\n      );\n    }\n\n    const resetToken = Math.random().toString(36).substring(2, 15);\n    const expires = Date.now() + 60 * 60 * 1000;\n\n    resetTokens.set(resetToken, { email, expires });\n\n    const transporter = nodemailer.createTransport(process.env.EMAIL_SERVER);\n\n    const resetUrl = `${process.env.NEXTAUTH_URL || 'http://localhost:5000'}/reset-password?token=${resetToken}`;\n\n    await transporter.sendMail({\n      from: process.env.EMAIL_FROM,\n      to: email,\n      subject: 'Password Reset - Myntra Clone',\n      html: `\n        <h2>Password Reset Request</h2>\n        <p>Click the link below to reset your password. This link expires in 1 hour.</p>\n        <a href=\"${resetUrl}\">Reset Password</a>\n        <p>If you didn't request this, please ignore this email.</p>\n      `,\n    });\n\n    return NextResponse.json({\n      message: 'If an account exists, a reset link will be sent.',\n    });\n  } catch (error: any) {\n    console.error('Forgot password error:', error);\n    return NextResponse.json(\n      { message: 'Failed to process request' },\n      { status: 500 }\n    );\n  }\n}\n\nexport { resetTokens };\n","size_bytes":1806},"next js/myntra-clone/src/app/api/orders/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { Order } from '@/models/Order';\nimport { getSession } from '@/lib/session';\n\nexport async function GET(req: NextRequest) {\n  try {\n    await connectToDatabase();\n    \n    const session = await getSession(req);\n    if (!session) {\n      return NextResponse.json({ message: 'Unauthorized' }, { status: 401 });\n    }\n\n    const orders = await Order.find({ user: session.userId })\n      .sort({ createdAt: -1 })\n      .lean();\n\n    return NextResponse.json(orders);\n  } catch (error: any) {\n    console.error('Orders fetch error:', error);\n    return NextResponse.json({ message: error.message || 'Server error' }, { status: 500 });\n  }\n}\n","size_bytes":751},"next js/myntra-clone/src/app/complete-profile/page.tsx":{"content":"'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\n\nexport default function CompleteProfilePage() {\n  const router = useRouter();\n  const [phone, setPhone] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [user, setUser] = useState<any>(null);\n\n  useEffect(() => {\n    checkUser();\n  }, []);\n\n  async function checkUser() {\n    try {\n      const res = await fetch('/api/user/me');\n      if (res.ok) {\n        const data = await res.json();\n        setUser(data);\n        if (data.phone) {\n          router.push('/');\n        }\n      } else {\n        router.push('/login');\n      }\n    } catch (error) {\n      router.push('/login');\n    }\n  }\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    try {\n      const res = await fetch('/api/user/update', {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ phone }),\n      });\n\n      if (!res.ok) {\n        const data = await res.json();\n        throw new Error(data.message || 'Failed to update phone number');\n      }\n\n      router.push('/');\n    } catch (e: any) {\n      setError(e.message);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  if (!user) {\n    return <div className=\"container py-20 text-center\">Loading...</div>;\n  }\n\n  return (\n    <div className=\"max-w-md mx-auto py-12\">\n      <div className=\"card p-8\">\n        <h1 className=\"text-3xl font-bold mb-2\" style={{ color: '#ff3f6c' }}>\n          Complete Your Profile\n        </h1>\n        <p className=\"text-white/70 mb-6\">\n          To enable OTP login and complete your account setup, please provide your phone number.\n        </p>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm mb-1 text-white/80\">Phone Number</label>\n            <input\n              className=\"w-full px-4 py-3 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#ff3f6c] focus:outline-none transition-colors\"\n              placeholder=\"Enter your phone number\"\n              type=\"tel\"\n              value={phone}\n              onChange={(e) => setPhone(e.target.value)}\n              required\n            />\n            <p className=\"text-xs text-white/60 mt-1\">\n              This will be used for OTP login and order updates\n            </p>\n          </div>\n\n          {error && <p className=\"text-red-400 text-sm\">{error}</p>}\n\n          <button\n            className=\"w-full py-3 rounded-lg font-semibold transition-colors\"\n            style={{ backgroundColor: '#ff3f6c', color: 'white' }}\n            disabled={loading}\n          >\n            {loading ? 'Saving...' : 'Continue'}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n","size_bytes":2884},"next js/myntra-clone/src/data/categories.ts":{"content":"export interface Category {\n  id: string;\n  name: string;\n  image: string;\n  url: string;\n}\n\nexport const categories: Category[] = [\n  {\n    id: 'men',\n    name: 'Men',\n    image: 'https://images.unsplash.com/photo-1490578474895-699cd4e2cf59?q=80&w=800&auto=format&fit=crop',\n    url: '/category/men'\n  },\n  {\n    id: 'women',\n    name: 'Women',\n    image: 'https://images.unsplash.com/photo-1483985988355-763728e1935b?q=80&w=800&auto=format&fit=crop',\n    url: '/category/women'\n  },\n  {\n    id: 'kids',\n    name: 'Kids',\n    image: 'https://images.unsplash.com/photo-1503944583220-79d8926ad5e2?q=80&w=800&auto=format&fit=crop',\n    url: '/category/kids'\n  },\n  {\n    id: 'footwear',\n    name: 'Footwear',\n    image: 'https://images.unsplash.com/photo-1460353581641-37baddab0fa2?q=80&w=800&auto=format&fit=crop',\n    url: '/category/footwear'\n  },\n  {\n    id: 'accessories',\n    name: 'Accessories',\n    image: 'https://images.unsplash.com/photo-1611652022419-a9419f74343d?q=80&w=800&auto=format&fit=crop',\n    url: '/category/accessories'\n  },\n  {\n    id: 'beauty',\n    name: 'Beauty',\n    image: 'https://images.unsplash.com/photo-1522335789203-aabd1fc54bc9?q=80&w=800&auto=format&fit=crop',\n    url: '/category/beauty'\n  }\n];\n\nexport interface TrendingCollection {\n  id: string;\n  title: string;\n  image: string;\n  cta: string;\n  url: string;\n}\n\nexport const trendingCollections: TrendingCollection[] = [\n  {\n    id: 'summer',\n    title: 'Summer Essentials',\n    image: 'https://images.unsplash.com/photo-1523359346063-d879354c0ea5?q=80&w=1200&auto=format&fit=crop',\n    cta: 'Shop Now',\n    url: '/category/summer-essentials'\n  },\n  {\n    id: 'activewear',\n    title: 'Active Lifestyle',\n    image: 'https://images.unsplash.com/photo-1534438327276-14e5300c3a48?q=80&w=1200&auto=format&fit=crop',\n    cta: 'Shop Now',\n    url: '/category/activewear'\n  },\n  {\n    id: 'formal',\n    title: 'Formal Collection',\n    image: 'https://images.unsplash.com/photo-1507679799987-c73779587ccf?q=80&w=1200&auto=format&fit=crop',\n    cta: 'Shop Now',\n    url: '/category/formal'\n  },\n  {\n    id: 'ethnic',\n    title: 'Ethnic Wear',\n    image: 'https://images.unsplash.com/photo-1610030469983-98e550d6193c?q=80&w=1200&auto=format&fit=crop',\n    cta: 'Shop Now',\n    url: '/category/ethnic'\n  }\n];\n\nexport interface Brand {\n  id: string;\n  name: string;\n  logo: string;\n  url: string;\n}\n\nexport const topBrands: Brand[] = [\n  {\n    id: 'nike',\n    name: 'Nike',\n    logo: 'https://upload.wikimedia.org/wikipedia/commons/a/a6/Logo_NIKE.svg',\n    url: '/category/all?brand=nike'\n  },\n  {\n    id: 'puma',\n    name: 'Puma',\n    logo: 'https://upload.wikimedia.org/wikipedia/commons/4/44/Puma_logo.svg',\n    url: '/category/all?brand=puma'\n  },\n  {\n    id: 'hm',\n    name: 'H&M',\n    logo: 'https://upload.wikimedia.org/wikipedia/commons/5/53/H%26M-Logo.svg',\n    url: '/category/all?brand=hm'\n  },\n  {\n    id: 'levis',\n    name: \"Levi's\",\n    logo: 'https://upload.wikimedia.org/wikipedia/commons/9/92/Levi%27s_logo.svg',\n    url: '/category/all?brand=levis'\n  },\n  {\n    id: 'adidas',\n    name: 'Adidas',\n    logo: 'https://upload.wikimedia.org/wikipedia/commons/2/20/Adidas_Logo.svg',\n    url: '/category/all?brand=adidas'\n  },\n  {\n    id: 'zara',\n    name: 'Zara',\n    logo: 'https://upload.wikimedia.org/wikipedia/commons/f/fd/Zara_Logo.svg',\n    url: '/category/all?brand=zara'\n  }\n];\n\nexport interface HeroSlide {\n  id: string;\n  image: string;\n  title: string;\n  subtitle: string;\n  cta: string;\n  url: string;\n}\n\nexport const heroSlides: HeroSlide[] = [\n  {\n    id: 'slide1',\n    image: 'https://images.unsplash.com/photo-1441984904996-e0b6ba687e04?q=80&w=1600&auto=format&fit=crop',\n    title: 'New Season Arrivals',\n    subtitle: 'Discover the latest trends in fashion',\n    cta: 'Explore Collection',\n    url: '/category/new-arrivals'\n  },\n  {\n    id: 'slide2',\n    image: 'https://images.unsplash.com/photo-1445205170230-053b83016050?q=80&w=1600&auto=format&fit=crop',\n    title: 'Exclusive Sale',\n    subtitle: 'Up to 50% off on selected items',\n    cta: 'Shop Sale',\n    url: '/category/sale'\n  },\n  {\n    id: 'slide3',\n    image: 'https://images.unsplash.com/photo-1483985988355-763728e1935b?q=80&w=1600&auto=format&fit=crop',\n    title: 'Premium Collection',\n    subtitle: 'Luxury fashion for the modern wardrobe',\n    cta: 'View Premium',\n    url: '/category/premium'\n  }\n];\n\nexport interface ShopCard {\n  id: string;\n  title: string;\n  subtitle: string;\n  image: string;\n  url: string;\n  badge?: string;\n}\n\nexport const shopSaleCards: ShopCard[] = [\n  {\n    id: 'sale-men',\n    title: 'Men\\'s Sale',\n    subtitle: 'Up to 70% OFF',\n    image: 'https://images.unsplash.com/photo-1617127365659-c47fa864d8bc?q=80&w=1200&auto=format&fit=crop',\n    url: '/category/men?sale=true',\n    badge: '70% OFF'\n  },\n  {\n    id: 'sale-women',\n    title: 'Women\\'s Sale',\n    subtitle: 'Up to 60% OFF',\n    image: 'https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?q=80&w=1200&auto=format&fit=crop',\n    url: '/category/women?sale=true',\n    badge: '60% OFF'\n  },\n  {\n    id: 'sale-kids',\n    title: 'Kids Sale',\n    subtitle: 'Up to 50% OFF',\n    image: 'https://images.unsplash.com/photo-1514090458221-65bb69cf63e3?q=80&w=1200&auto=format&fit=crop',\n    url: '/category/kids?sale=true',\n    badge: '50% OFF'\n  },\n  {\n    id: 'sale-footwear',\n    title: 'Footwear Sale',\n    subtitle: 'Up to 65% OFF',\n    image: 'https://images.unsplash.com/photo-1549298916-b41d501d3772?q=80&w=1200&auto=format&fit=crop',\n    url: '/category/footwear?sale=true',\n    badge: '65% OFF'\n  }\n];\n\nexport const newArrivals: ShopCard[] = [\n  {\n    id: 'new-streetwear',\n    title: 'Streetwear',\n    subtitle: 'Latest Urban Fashion',\n    image: 'https://images.unsplash.com/photo-1509631179647-0177331693ae?q=80&w=1200&auto=format&fit=crop',\n    url: '/category/streetwear',\n    badge: 'NEW'\n  },\n  {\n    id: 'new-athleisure',\n    title: 'Athleisure',\n    subtitle: 'Sport Meets Style',\n    image: 'https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?q=80&w=1200&auto=format&fit=crop',\n    url: '/category/athleisure',\n    badge: 'NEW'\n  },\n  {\n    id: 'new-formal',\n    title: 'Formal Wear',\n    subtitle: 'Office Ready',\n    image: 'https://images.unsplash.com/photo-1593030761757-71fae45fa0e7?q=80&w=1200&auto=format&fit=crop',\n    url: '/category/formal',\n    badge: 'NEW'\n  },\n  {\n    id: 'new-accessories',\n    title: 'Accessories',\n    subtitle: 'Complete Your Look',\n    image: 'https://images.unsplash.com/photo-1492707892479-7bc8d5a4ee93?q=80&w=1200&auto=format&fit=crop',\n    url: '/category/accessories',\n    badge: 'NEW'\n  }\n];\n","size_bytes":6622},"next js/myntra-clone/src/components/HeroBanner.tsx":{"content":"'use client';\n\nimport { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport Image from 'next/image';\nimport { useRouter } from 'next/navigation';\nimport { heroSlides } from '@/data/categories';\n\nexport default function HeroBanner() {\n  const [currentSlide, setCurrentSlide] = useState(0);\n  const router = useRouter();\n\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setCurrentSlide((prev) => (prev + 1) % heroSlides.length);\n    }, 5000);\n\n    return () => clearInterval(timer);\n  }, []);\n\n  const goToSlide = (index: number) => {\n    setCurrentSlide(index);\n  };\n\n  const nextSlide = () => {\n    setCurrentSlide((prev) => (prev + 1) % heroSlides.length);\n  };\n\n  const prevSlide = () => {\n    setCurrentSlide((prev) => (prev - 1 + heroSlides.length) % heroSlides.length);\n  };\n\n  return (\n    <div className=\"relative h-[500px] md:h-[600px] lg:h-[700px] overflow-hidden\">\n      <AnimatePresence mode=\"wait\">\n        <motion.div\n          key={currentSlide}\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          transition={{ duration: 0.7 }}\n          className=\"absolute inset-0\"\n        >\n          <Image\n            src={heroSlides[currentSlide].image}\n            alt={heroSlides[currentSlide].title}\n            fill\n            className=\"object-cover\"\n            priority\n            sizes=\"100vw\"\n          />\n          <div className=\"absolute inset-0 bg-gradient-to-r from-black/60 via-black/30 to-transparent\"></div>\n        </motion.div>\n      </AnimatePresence>\n\n      <div className=\"relative h-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center\">\n        <motion.div\n          key={`content-${currentSlide}`}\n          initial={{ opacity: 0, x: -50 }}\n          animate={{ opacity: 1, x: 0 }}\n          transition={{ duration: 0.7, delay: 0.3 }}\n          className=\"max-w-2xl\"\n        >\n          <motion.h1\n            className=\"text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-4\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.7, delay: 0.4 }}\n          >\n            {heroSlides[currentSlide].title}\n          </motion.h1>\n          <motion.p\n            className=\"text-lg md:text-xl text-white/90 mb-8\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.7, delay: 0.5 }}\n          >\n            {heroSlides[currentSlide].subtitle}\n          </motion.p>\n          <motion.button\n            onClick={() => router.push(heroSlides[currentSlide].url)}\n            className=\"bg-[#0B7FB3] hover:bg-[#0B7FB3]/90 text-white px-8 py-3 rounded-full font-semibold transition-all duration-300 hover:scale-105\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.7, delay: 0.6 }}\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n          >\n            {heroSlides[currentSlide].cta}\n          </motion.button>\n        </motion.div>\n      </div>\n\n      <button\n        onClick={prevSlide}\n        className=\"absolute left-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white p-3 rounded-full transition-all duration-300\"\n        aria-label=\"Previous slide\"\n      >\n        <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n        </svg>\n      </button>\n\n      <button\n        onClick={nextSlide}\n        className=\"absolute right-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white p-3 rounded-full transition-all duration-300\"\n        aria-label=\"Next slide\"\n      >\n        <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n        </svg>\n      </button>\n\n      <div className=\"absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-3\">\n        {heroSlides.map((_, index) => (\n          <button\n            key={index}\n            onClick={() => goToSlide(index)}\n            className={`h-2 rounded-full transition-all duration-300 ${\n              index === currentSlide ? 'w-8 bg-white' : 'w-2 bg-white/50 hover:bg-white/70'\n            }`}\n            aria-label={`Go to slide ${index + 1}`}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n","size_bytes":4587},"next js/myntra-clone/scripts/check-products.ts":{"content":"import mongoose from 'mongoose';\n\nconst productSchema = new mongoose.Schema({\n  title: String,\n  category: String,\n});\n\nconst Product = mongoose.models.Product || mongoose.model('Product', productSchema);\n\nasync function checkProducts() {\n  try {\n    const MONGODB_URI = process.env.MONGODB_URI;\n    \n    if (!MONGODB_URI) {\n      throw new Error('MONGODB_URI is not defined');\n    }\n\n    await mongoose.connect(MONGODB_URI);\n    const products = await Product.find({}, 'title category').limit(10);\n    console.log(JSON.stringify(products, null, 2));\n    await mongoose.connection.close();\n  } catch (error) {\n    console.error('Error:', error);\n    process.exit(1);\n  }\n}\n\ncheckProducts();\n","size_bytes":691},"next js/myntra-clone/src/components/CategoryCard.tsx":{"content":"'use client';\n\nimport { motion } from 'framer-motion';\nimport Image from 'next/image';\nimport { useRouter } from 'next/navigation';\nimport { Category } from '@/data/categories';\n\ninterface CategoryCardProps {\n  category: Category;\n  index: number;\n}\n\nexport default function CategoryCard({ category, index }: CategoryCardProps) {\n  const router = useRouter();\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      whileInView={{ opacity: 1, y: 0 }}\n      viewport={{ once: true }}\n      transition={{ duration: 0.5, delay: index * 0.1 }}\n      whileHover={{ scale: 1.05 }}\n      onClick={() => router.push(category.url)}\n      className=\"relative overflow-hidden rounded-2xl cursor-pointer group\"\n    >\n      <div className=\"aspect-[3/4] relative\">\n        <Image\n          src={category.image}\n          alt={category.name}\n          fill\n          className=\"object-cover transition-transform duration-500 group-hover:scale-110\"\n          sizes=\"(max-width: 768px) 50vw, (max-width: 1200px) 33vw, 25vw\"\n        />\n        <div className=\"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent\"></div>\n      </div>\n      <div className=\"absolute bottom-0 left-0 right-0 p-6\">\n        <h3 className=\"text-2xl font-bold text-white\">{category.name}</h3>\n        <div className=\"mt-2 flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\n          <span className=\"text-sm text-white/90\">Explore</span>\n          <svg\n            className=\"w-4 h-4 text-white transform group-hover:translate-x-1 transition-transform duration-300\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n          >\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n          </svg>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n","size_bytes":1876},"next js/myntra-clone/scripts/seed.ts":{"content":"import mongoose from 'mongoose';\n\nconst productSchema = new mongoose.Schema({\n  title: String,\n  description: String,\n  price: Number,\n  originalPrice: Number,\n  discount: Number,\n  images: [String],\n  category: String,\n  brand: String,\n  rating: Number,\n  stock: Number,\n  sizes: [String],\n  colors: [String],\n  reviews: [{\n    user: String,\n    rating: Number,\n    comment: String,\n    date: Date\n  }],\n  createdAt: { type: Date, default: Date.now }\n});\n\nconst Product = mongoose.models.Product || mongoose.model('Product', productSchema);\n\nconst products = [\n  // MEN'S CATEGORY\n  {\n    title: \"Classic Fit Polo T-Shirt\",\n    description: \"Premium cotton polo t-shirt with classic fit. Perfect for casual and semi-formal occasions.\",\n    price: 899,\n    originalPrice: 1499,\n    discount: 40,\n    images: [\"https://images.unsplash.com/photo-1586790170083-2f9ceadc732d?q=80&w=800&auto=format&fit=crop\"],\n    category: \"men\",\n    brand: \"Nike\",\n    rating: 4.5,\n    stock: 45,\n    sizes: [\"S\", \"M\", \"L\", \"XL\", \"XXL\"],\n    colors: [\"Black\", \"White\", \"Navy Blue\", \"Grey\"],\n    reviews: []\n  },\n  {\n    title: \"Men's Slim Fit Denim Jeans\",\n    description: \"Comfortable stretch denim with modern slim fit. Five-pocket styling.\",\n    price: 1799,\n    originalPrice: 2999,\n    discount: 40,\n    images: [\"https://images.unsplash.com/photo-1542272454315-7f6d5c8c7c9d?q=80&w=800&auto=format&fit=crop\"],\n    category: \"men\",\n    brand: \"Levis\",\n    rating: 4.3,\n    stock: 30,\n    sizes: [\"30\", \"32\", \"34\", \"36\", \"38\"],\n    colors: [\"Blue\", \"Black\", \"Grey\"],\n    reviews: []\n  },\n  {\n    title: \"Men's Casual Crew Neck T-Shirt\",\n    description: \"Soft cotton blend crew neck t-shirt. Everyday comfort wear.\",\n    price: 599,\n    originalPrice: 999,\n    discount: 40,\n    images: [\"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?q=80&w=800&auto=format&fit=crop\"],\n    category: \"men\",\n    brand: \"H&M\",\n    rating: 4.2,\n    stock: 60,\n    sizes: [\"S\", \"M\", \"L\", \"XL\"],\n    colors: [\"White\", \"Black\", \"Red\", \"Green\"],\n    reviews: []\n  },\n  {\n    title: \"Athletic Performance Tank Top\",\n    description: \"Moisture-wicking fabric for intense workouts. Breathable mesh panels.\",\n    price: 749,\n    originalPrice: 1249,\n    discount: 40,\n    images: [\"https://images.unsplash.com/photo-1618354691373-d851c5c3a990?q=80&w=800&auto=format&fit=crop\"],\n    category: \"men\",\n    brand: \"Puma\",\n    rating: 4.6,\n    stock: 40,\n    sizes: [\"M\", \"L\", \"XL\"],\n    colors: [\"Black\", \"Blue\", \"Red\"],\n    reviews: []\n  },\n  {\n    title: \"Formal Cotton Shirt - Slim Fit\",\n    description: \"Premium formal shirt with wrinkle-resistant fabric. Perfect for office wear.\",\n    price: 1299,\n    originalPrice: 2599,\n    discount: 50,\n    images: [\"https://images.unsplash.com/photo-1602810318383-e386cc2a3ccf?q=80&w=800&auto=format&fit=crop\"],\n    category: \"men\",\n    brand: \"Zara\",\n    rating: 4.4,\n    stock: 25,\n    sizes: [\"38\", \"40\", \"42\", \"44\"],\n    colors: [\"White\", \"Light Blue\", \"Pink\"],\n    reviews: []\n  },\n\n  // WOMEN'S CATEGORY\n  {\n    title: \"Floral Summer Dress\",\n    description: \"Lightweight floral print dress perfect for summer. Comfortable and stylish.\",\n    price: 1499,\n    images: [\"https://images.unsplash.com/photo-1572804013309-59a88b7e92f1?q=80&w=800&auto=format&fit=crop\"],\n    category: \"women\",\n    brand: \"Zara\",\n    rating: 4.7,\n    stock: 35,\n    sizes: [\"XS\", \"S\", \"M\", \"L\"],\n    colors: [\"Blue\", \"Pink\", \"Yellow\"],\n    reviews: []\n  },\n  {\n    title: \"Women's Casual Top\",\n    description: \"Soft cotton blend top with relaxed fit. Perfect for everyday wear.\",\n    price: 799,\n    images: [\"https://images.unsplash.com/photo-1564859228273-274232fdb516?q=80&w=800&auto=format&fit=crop\"],\n    category: \"women\",\n    brand: \"H&M\",\n    rating: 4.3,\n    stock: 50,\n    sizes: [\"S\", \"M\", \"L\", \"XL\"],\n    colors: [\"White\", \"Black\", \"Beige\"],\n    reviews: []\n  },\n  {\n    title: \"High-Waisted Skinny Jeans\",\n    description: \"Stretchy denim with high-rise waist. Flattering skinny fit.\",\n    price: 1899,\n    images: [\"https://images.unsplash.com/photo-1541099649105-f69ad21f3246?q=80&w=800&auto=format&fit=crop\"],\n    category: \"women\",\n    brand: \"Forever 21\",\n    rating: 4.5,\n    stock: 40,\n    sizes: [\"26\", \"28\", \"30\", \"32\"],\n    colors: [\"Blue\", \"Black\"],\n    reviews: []\n  },\n  {\n    title: \"Elegant Evening Gown\",\n    description: \"Stunning floor-length gown for special occasions. Premium fabric.\",\n    price: 3999,\n    images: [\"https://images.unsplash.com/photo-1566174053879-31528523f8ae?q=80&w=800&auto=format&fit=crop\"],\n    category: \"women\",\n    brand: \"Mango\",\n    rating: 4.8,\n    stock: 15,\n    sizes: [\"S\", \"M\", \"L\"],\n    colors: [\"Black\", \"Red\", \"Navy Blue\"],\n    reviews: []\n  },\n  {\n    title: \"Women's Sports Leggings\",\n    description: \"High-performance leggings with compression support. Perfect for yoga and gym.\",\n    price: 1199,\n    images: [\"https://images.unsplash.com/photo-1506629082955-511b1aa562c8?q=80&w=800&auto=format&fit=crop\"],\n    category: \"women\",\n    brand: \"Nike\",\n    rating: 4.6,\n    stock: 45,\n    sizes: [\"XS\", \"S\", \"M\", \"L\"],\n    colors: [\"Black\", \"Grey\", \"Purple\"],\n    reviews: []\n  },\n\n  // KIDS CATEGORY\n  {\n    title: \"Kids Cotton Graphic T-Shirt\",\n    description: \"Fun graphic print t-shirt for kids. 100% soft cotton.\",\n    price: 499,\n    images: [\"https://images.unsplash.com/photo-1519238263530-99bdd11df2ea?q=80&w=800&auto=format&fit=crop\"],\n    category: \"kids\",\n    brand: \"GAP Kids\",\n    rating: 4.4,\n    stock: 55,\n    sizes: [\"2-3Y\", \"4-5Y\", \"6-7Y\", \"8-9Y\"],\n    colors: [\"Blue\", \"Red\", \"Yellow\"],\n    reviews: []\n  },\n  {\n    title: \"Kids Denim Shorts\",\n    description: \"Comfortable denim shorts for active kids. Adjustable waist.\",\n    price: 699,\n    images: [\"https://images.unsplash.com/photo-1503944583220-79d8926ad5e2?q=80&w=800&auto=format&fit=crop\"],\n    category: \"kids\",\n    brand: \"Carters\",\n    rating: 4.3,\n    stock: 40,\n    sizes: [\"2-3Y\", \"4-5Y\", \"6-7Y\"],\n    colors: [\"Blue\", \"Black\"],\n    reviews: []\n  },\n  {\n    title: \"Kids Party Dress\",\n    description: \"Beautiful party dress with frills and bows. Perfect for special occasions.\",\n    price: 1299,\n    images: [\"https://images.unsplash.com/photo-1518831959646-742c3a14ebf7?q=80&w=800&auto=format&fit=crop\"],\n    category: \"kids\",\n    brand: \"H&M Kids\",\n    rating: 4.6,\n    stock: 30,\n    sizes: [\"2-3Y\", \"4-5Y\", \"6-7Y\", \"8-9Y\"],\n    colors: [\"Pink\", \"White\", \"Purple\"],\n    reviews: []\n  },\n\n  // FOOTWEAR CATEGORY\n  {\n    title: \"Men's Running Shoes\",\n    description: \"Lightweight running shoes with superior cushioning. Breathable mesh upper.\",\n    price: 2999,\n    images: [\"https://images.unsplash.com/photo-1542291026-7eec264c27ff?q=80&w=800&auto=format&fit=crop\"],\n    category: \"footwear\",\n    brand: \"Nike\",\n    rating: 4.7,\n    stock: 35,\n    sizes: [\"7\", \"8\", \"9\", \"10\", \"11\"],\n    colors: [\"Black\", \"White\", \"Blue\"],\n    reviews: []\n  },\n  {\n    title: \"Women's Casual Sneakers\",\n    description: \"Trendy casual sneakers with comfortable fit. All-day comfort.\",\n    price: 1899,\n    images: [\"https://images.unsplash.com/photo-1515955656352-a1fa3ffcd111?q=80&w=800&auto=format&fit=crop\"],\n    category: \"footwear\",\n    brand: \"Adidas\",\n    rating: 4.5,\n    stock: 40,\n    sizes: [\"5\", \"6\", \"7\", \"8\", \"9\"],\n    colors: [\"White\", \"Pink\", \"Black\"],\n    reviews: []\n  },\n  {\n    title: \"Men's Formal Leather Shoes\",\n    description: \"Classic leather oxford shoes. Perfect for formal occasions.\",\n    price: 3499,\n    images: [\"https://images.unsplash.com/photo-1614252235316-8c857d38b5f4?q=80&w=800&auto=format&fit=crop\"],\n    category: \"footwear\",\n    brand: \"Clarks\",\n    rating: 4.6,\n    stock: 25,\n    sizes: [\"7\", \"8\", \"9\", \"10\", \"11\"],\n    colors: [\"Black\", \"Brown\"],\n    reviews: []\n  },\n  {\n    title: \"Women's High Heels\",\n    description: \"Elegant high heels for parties and events. Comfortable heel height.\",\n    price: 2499,\n    images: [\"https://images.unsplash.com/photo-1543163521-1bf539c55dd2?q=80&w=800&auto=format&fit=crop\"],\n    category: \"footwear\",\n    brand: \"Steve Madden\",\n    rating: 4.4,\n    stock: 30,\n    sizes: [\"5\", \"6\", \"7\", \"8\"],\n    colors: [\"Black\", \"Red\", \"Nude\"],\n    reviews: []\n  },\n\n  // ACCESSORIES CATEGORY\n  {\n    title: \"Leather Messenger Bag\",\n    description: \"Premium leather messenger bag with multiple compartments. Professional look.\",\n    price: 3999,\n    images: [\"https://images.unsplash.com/photo-1548036328-c9fa89d128fa?q=80&w=800&auto=format&fit=crop\"],\n    category: \"accessories\",\n    brand: \"Fossil\",\n    rating: 4.7,\n    stock: 20,\n    sizes: [\"One Size\"],\n    colors: [\"Brown\", \"Black\"],\n    reviews: []\n  },\n  {\n    title: \"Classic Analog Watch\",\n    description: \"Stainless steel watch with leather strap. Water-resistant.\",\n    price: 4999,\n    images: [\"https://images.unsplash.com/photo-1523170335258-f5ed11844a49?q=80&w=800&auto=format&fit=crop\"],\n    category: \"accessories\",\n    brand: \"Fossil\",\n    rating: 4.8,\n    stock: 25,\n    sizes: [\"One Size\"],\n    colors: [\"Silver\", \"Gold\", \"Black\"],\n    reviews: []\n  },\n  {\n    title: \"Women's Tote Bag\",\n    description: \"Spacious tote bag perfect for daily use. Multiple pockets.\",\n    price: 1999,\n    images: [\"https://images.unsplash.com/photo-1590874103328-eac38a683ce7?q=80&w=800&auto=format&fit=crop\"],\n    category: \"accessories\",\n    brand: \"Michael Kors\",\n    rating: 4.5,\n    stock: 30,\n    sizes: [\"One Size\"],\n    colors: [\"Black\", \"Brown\", \"Beige\"],\n    reviews: []\n  },\n  {\n    title: \"Polarized Sunglasses\",\n    description: \"UV protection sunglasses with polarized lenses. Trendy design.\",\n    price: 1499,\n    images: [\"https://images.unsplash.com/photo-1511499767150-a48a237f0083?q=80&w=800&auto=format&fit=crop\"],\n    category: \"accessories\",\n    brand: \"Ray-Ban\",\n    rating: 4.6,\n    stock: 40,\n    sizes: [\"One Size\"],\n    colors: [\"Black\", \"Brown\", \"Blue\"],\n    reviews: []\n  },\n\n  // BEAUTY CATEGORY\n  {\n    title: \"Matte Lipstick - Ruby Red\",\n    description: \"Long-lasting matte lipstick with rich color payoff. Moisturizing formula.\",\n    price: 499,\n    images: [\"https://images.unsplash.com/photo-1586495777744-4413f21062fa?q=80&w=800&auto=format&fit=crop\"],\n    category: \"beauty\",\n    brand: \"Maybelline\",\n    rating: 4.5,\n    stock: 100,\n    sizes: [\"One Size\"],\n    colors: [\"Red\", \"Pink\", \"Nude\", \"Mauve\"],\n    reviews: []\n  },\n  {\n    title: \"Hydrating Face Wash\",\n    description: \"Gentle face wash with hyaluronic acid. Suitable for all skin types.\",\n    price: 349,\n    images: [\"https://images.unsplash.com/photo-1556228578-8c89e6adf883?q=80&w=800&auto=format&fit=crop\"],\n    category: \"beauty\",\n    brand: \"Neutrogena\",\n    rating: 4.6,\n    stock: 80,\n    sizes: [\"100ml\", \"200ml\"],\n    colors: [],\n    reviews: []\n  },\n  {\n    title: \"Vitamin C Serum\",\n    description: \"Brightening serum with 10% Vitamin C. Reduces dark spots and fine lines.\",\n    price: 899,\n    images: [\"https://images.unsplash.com/photo-1620916566398-39f1143ab7be?q=80&w=800&auto=format&fit=crop\"],\n    category: \"beauty\",\n    brand: \"The Ordinary\",\n    rating: 4.7,\n    stock: 60,\n    sizes: [\"30ml\"],\n    colors: [],\n    reviews: []\n  },\n  {\n    title: \"Kajal - Black\",\n    description: \"Smudge-proof kajal with intense black color. Long-lasting formula.\",\n    price: 199,\n    images: [\"https://images.unsplash.com/photo-1512496015851-a90fb38ba796?q=80&w=800&auto=format&fit=crop\"],\n    category: \"beauty\",\n    brand: \"Lakme\",\n    rating: 4.4,\n    stock: 120,\n    sizes: [\"One Size\"],\n    colors: [\"Black\"],\n    reviews: []\n  },\n  {\n    title: \"Moisturizing Cream - SPF 30\",\n    description: \"Daily moisturizer with sun protection. Non-greasy formula.\",\n    price: 599,\n    images: [\"https://images.unsplash.com/photo-1571875257727-256c39da42af?q=80&w=800&auto=format&fit=crop\"],\n    category: \"beauty\",\n    brand: \"Neutrogena\",\n    rating: 4.5,\n    stock: 70,\n    sizes: [\"50ml\", \"100ml\"],\n    colors: [],\n    reviews: []\n  },\n  {\n    title: \"Nail Polish Set\",\n    description: \"Set of 5 trendy nail polish shades. Quick-dry formula.\",\n    price: 699,\n    images: [\"https://images.unsplash.com/photo-1610992015732-2449b76344bc?q=80&w=800&auto=format&fit=crop\"],\n    category: \"beauty\",\n    brand: \"Maybelline\",\n    rating: 4.3,\n    stock: 50,\n    sizes: [\"One Size\"],\n    colors: [\"Red\", \"Pink\", \"Nude\", \"Black\", \"Blue\"],\n    reviews: []\n  },\n  {\n    title: \"Compact Powder\",\n    description: \"Oil-control compact powder for matte finish. Suitable for all skin tones.\",\n    price: 449,\n    images: [\"https://images.unsplash.com/photo-1596704017254-9b121068ec31?q=80&w=800&auto=format&fit=crop\"],\n    category: \"beauty\",\n    brand: \"Lakme\",\n    rating: 4.4,\n    stock: 90,\n    sizes: [\"One Size\"],\n    colors: [\"Fair\", \"Medium\", \"Deep\"],\n    reviews: []\n  }\n];\n\nasync function seedDatabase() {\n  try {\n    const MONGODB_URI = process.env.MONGODB_URI;\n    \n    if (!MONGODB_URI) {\n      throw new Error('MONGODB_URI is not defined in environment variables');\n    }\n\n    console.log('Connecting to MongoDB...');\n    await mongoose.connect(MONGODB_URI);\n    console.log('Connected to MongoDB successfully');\n\n    console.log('Clearing existing products...');\n    await Product.deleteMany({});\n    console.log('Existing products cleared');\n\n    console.log('Inserting new products...');\n    const inserted = await Product.insertMany(products);\n    console.log(`Successfully inserted ${inserted.length} products`);\n\n    console.log('\\nProducts by category:');\n    const categories = ['men', 'women', 'kids', 'footwear', 'accessories', 'beauty'];\n    for (const category of categories) {\n      const count = await Product.countDocuments({ category });\n      console.log(`  ${category}: ${count} products`);\n    }\n\n    await mongoose.connection.close();\n    console.log('\\nDatabase seeding completed successfully!');\n  } catch (error) {\n    console.error('Error seeding database:', error);\n    process.exit(1);\n  }\n}\n\nseedDatabase();\n","size_bytes":13921},"next js/myntra-clone/src/app/dashboard/page.tsx":{"content":"'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\n\ninterface Address {\n  _id?: string;\n  line1: string;\n  line2?: string;\n  city: string;\n  state: string;\n  zip: string;\n  phone?: string;\n}\n\ninterface PaymentMethod {\n  _id?: string;\n  type: 'card' | 'upi' | 'netbanking';\n  last4: string;\n  brand?: string;\n  expiryMonth?: number;\n  expiryYear?: number;\n  upiId?: string;\n}\n\ninterface Order {\n  _id: string;\n  orderNumber: string;\n  items: any[];\n  totalAmount: number;\n  status: string;\n  createdAt: string;\n}\n\ninterface User {\n  _id: string;\n  name: string;\n  email: string;\n  phone?: string;\n  addresses: Address[];\n  paymentMethods: PaymentMethod[];\n}\n\nexport default function DashboardPage() {\n  const router = useRouter();\n  const [user, setUser] = useState<User | null>(null);\n  const [orders, setOrders] = useState<Order[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState('profile');\n  const [orderFilter, setOrderFilter] = useState('all');\n  \n  const [editingProfile, setEditingProfile] = useState(false);\n  const [profileData, setProfileData] = useState({ name: '', email: '', phone: '' });\n  \n  const [showAddressModal, setShowAddressModal] = useState(false);\n  const [editingAddress, setEditingAddress] = useState<Address | null>(null);\n  const [addressForm, setAddressForm] = useState<Address>({ line1: '', city: '', state: '', zip: '' });\n  \n  const [showPaymentModal, setShowPaymentModal] = useState(false);\n  const [paymentForm, setPaymentForm] = useState<PaymentMethod>({ type: 'card', last4: '', brand: '' });\n\n  const [showCancelModal, setShowCancelModal] = useState(false);\n  const [cancelOrderId, setCancelOrderId] = useState('');\n  const [cancelReason, setCancelReason] = useState('');\n  \n  const [showTrackModal, setShowTrackModal] = useState(false);\n  const [trackingData, setTrackingData] = useState<any>(null);\n\n  useEffect(() => {\n    fetchUserData();\n    fetchOrders();\n  }, []);\n\n  async function fetchUserData() {\n    try {\n      const res = await fetch('/api/user/me');\n      if (!res.ok) {\n        router.push('/login');\n        return;\n      }\n      const data = await res.json();\n      setUser(data);\n      setProfileData({ name: data.name, email: data.email, phone: data.phone || '' });\n    } catch (error) {\n      router.push('/login');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function fetchOrders() {\n    try {\n      const res = await fetch('/api/orders');\n      if (res.ok) {\n        const data = await res.json();\n        setOrders(data);\n      }\n    } catch (error) {\n      console.error('Failed to fetch orders');\n    }\n  }\n\n  async function updateProfile() {\n    try {\n      const res = await fetch('/api/user/update', {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(profileData),\n      });\n      if (res.ok) {\n        const updated = await res.json();\n        setUser(updated);\n        setEditingProfile(false);\n        alert('Profile updated successfully!');\n      }\n    } catch (error) {\n      alert('Failed to update profile');\n    }\n  }\n\n  async function saveAddress() {\n    try {\n      const res = await fetch('/api/user/address', {\n        method: editingAddress ? 'PUT' : 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(editingAddress ? { ...addressForm, _id: editingAddress._id } : addressForm),\n      });\n      if (res.ok) {\n        await fetchUserData();\n        setShowAddressModal(false);\n        setEditingAddress(null);\n        setAddressForm({ line1: '', city: '', state: '', zip: '' });\n        alert(editingAddress ? 'Address updated!' : 'Address added!');\n      }\n    } catch (error) {\n      alert('Failed to save address');\n    }\n  }\n\n  async function deleteAddress(id: string) {\n    if (!confirm('Delete this address?')) return;\n    try {\n      const res = await fetch(`/api/user/address?id=${id}`, { method: 'DELETE' });\n      if (res.ok) {\n        await fetchUserData();\n        alert('Address deleted');\n      }\n    } catch (error) {\n      alert('Failed to delete address');\n    }\n  }\n\n  async function savePaymentMethod() {\n    try {\n      const res = await fetch('/api/user/payment', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(paymentForm),\n      });\n      if (res.ok) {\n        await fetchUserData();\n        setShowPaymentModal(false);\n        setPaymentForm({ type: 'card', last4: '', brand: '' });\n        alert('Payment method added!');\n      }\n    } catch (error) {\n      alert('Failed to save payment method');\n    }\n  }\n\n  async function deletePaymentMethod(id: string) {\n    if (!confirm('Delete this payment method?')) return;\n    try {\n      const res = await fetch(`/api/user/payment?id=${id}`, { method: 'DELETE' });\n      if (res.ok) {\n        await fetchUserData();\n        alert('Payment method deleted');\n      }\n    } catch (error) {\n      alert('Failed to delete payment method');\n    }\n  }\n\n  async function handleCancelOrder() {\n    if (!cancelReason) {\n      alert('Please select a cancellation reason');\n      return;\n    }\n    try {\n      const res = await fetch('/api/orders/cancel', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ orderId: cancelOrderId, reason: cancelReason }),\n      });\n      if (res.ok) {\n        await fetchOrders();\n        setShowCancelModal(false);\n        setCancelOrderId('');\n        setCancelReason('');\n        alert('Order cancelled successfully');\n      } else {\n        alert('Failed to cancel order');\n      }\n    } catch (error) {\n      alert('Failed to cancel order');\n    }\n  }\n\n  async function handleTrackOrder(orderId: string) {\n    try {\n      const res = await fetch(`/api/orders/track?orderId=${orderId}`);\n      if (res.ok) {\n        const data = await res.json();\n        setTrackingData(data);\n        setShowTrackModal(true);\n      } else {\n        alert('Failed to fetch tracking information');\n      }\n    } catch (error) {\n      alert('Failed to fetch tracking information');\n    }\n  }\n\n  if (loading) {\n    return <div className=\"container py-20 text-center\">Loading...</div>;\n  }\n\n  if (!user) {\n    return null;\n  }\n\n  return (\n    <div className=\"container py-8\">\n      <h1 className=\"text-3xl font-bold mb-6\" style={{ color: '#0B7FB3' }}>My Dashboard</h1>\n      \n      <div className=\"grid md:grid-cols-4 gap-6\">\n        <aside className=\"md:col-span-1\">\n          <nav className=\"card p-4 space-y-2\">\n            <button\n              onClick={() => setActiveTab('profile')}\n              className={`w-full text-left px-4 py-2 rounded-lg transition-colors ${activeTab === 'profile' ? 'bg-[#0B7FB3] text-white' : 'hover:bg-neutral-900'}`}\n            >\n              Profile\n            </button>\n            <button\n              onClick={() => setActiveTab('addresses')}\n              className={`w-full text-left px-4 py-2 rounded-lg transition-colors ${activeTab === 'addresses' ? 'bg-[#0B7FB3] text-white' : 'hover:bg-neutral-900'}`}\n            >\n              Addresses\n            </button>\n            <button\n              onClick={() => setActiveTab('payments')}\n              className={`w-full text-left px-4 py-2 rounded-lg transition-colors ${activeTab === 'payments' ? 'bg-[#0B7FB3] text-white' : 'hover:bg-neutral-900'}`}\n            >\n              Payment Methods\n            </button>\n            <button\n              onClick={() => setActiveTab('orders')}\n              className={`w-full text-left px-4 py-2 rounded-lg transition-colors ${activeTab === 'orders' ? 'bg-[#0B7FB3] text-white' : 'hover:bg-neutral-900'}`}\n            >\n              Order History\n            </button>\n          </nav>\n        </aside>\n\n        <main className=\"md:col-span-3\">\n          {activeTab === 'profile' && (\n            <div className=\"card p-6\">\n              <div className=\"flex justify-between items-center mb-6\">\n                <h2 className=\"text-2xl font-semibold\">Profile Information</h2>\n                {!editingProfile && (\n                  <button onClick={() => setEditingProfile(true)} className=\"btn btn-outline\">Edit Profile</button>\n                )}\n              </div>\n\n              {editingProfile ? (\n                <div className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-sm mb-1 text-white/80\">Name</label>\n                    <input\n                      className=\"w-full px-4 py-2 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#0B7FB3] focus:outline-none\"\n                      value={profileData.name}\n                      onChange={(e) => setProfileData({ ...profileData, name: e.target.value })}\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm mb-1 text-white/80\">Email</label>\n                    <input\n                      className=\"w-full px-4 py-2 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#0B7FB3] focus:outline-none\"\n                      value={profileData.email}\n                      onChange={(e) => setProfileData({ ...profileData, email: e.target.value })}\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm mb-1 text-white/80\">Phone Number</label>\n                    <input\n                      className=\"w-full px-4 py-2 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#0B7FB3] focus:outline-none\"\n                      value={profileData.phone}\n                      onChange={(e) => setProfileData({ ...profileData, phone: e.target.value })}\n                    />\n                  </div>\n                  <div className=\"flex gap-3\">\n                    <button onClick={updateProfile} className=\"btn btn-primary\">Save Changes</button>\n                    <button onClick={() => setEditingProfile(false)} className=\"btn btn-outline\">Cancel</button>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  <div>\n                    <p className=\"text-sm text-white/60\">Name</p>\n                    <p className=\"text-lg\">{user.name}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-white/60\">Email</p>\n                    <p className=\"text-lg\">{user.email}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-white/60\">Phone Number</p>\n                    <p className=\"text-lg\">{user.phone || 'Not provided'}</p>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          {activeTab === 'addresses' && (\n            <div className=\"card p-6\">\n              <div className=\"flex justify-between items-center mb-6\">\n                <h2 className=\"text-2xl font-semibold\">Saved Addresses</h2>\n                <button\n                  onClick={() => {\n                    setEditingAddress(null);\n                    setAddressForm({ line1: '', city: '', state: '', zip: '' });\n                    setShowAddressModal(true);\n                  }}\n                  className=\"btn btn-primary\"\n                >\n                  Add New Address\n                </button>\n              </div>\n\n              <div className=\"space-y-4\">\n                {user.addresses?.length === 0 && <p className=\"text-white/60\">No saved addresses</p>}\n                {user.addresses?.map((addr: any, idx: number) => (\n                  <div key={idx} className=\"bg-neutral-900 p-4 rounded-lg\">\n                    <p className=\"font-medium\">{addr.line1}</p>\n                    {addr.line2 && <p className=\"text-sm text-white/70\">{addr.line2}</p>}\n                    <p className=\"text-sm text-white/70\">{addr.city}, {addr.state} - {addr.zip}</p>\n                    {addr.phone && <p className=\"text-sm text-white/70\">Phone: {addr.phone}</p>}\n                    <div className=\"flex gap-3 mt-3\">\n                      <button\n                        onClick={() => {\n                          setEditingAddress(addr);\n                          setAddressForm(addr);\n                          setShowAddressModal(true);\n                        }}\n                        className=\"text-sm text-[#0B7FB3] hover:underline\"\n                      >\n                        Edit\n                      </button>\n                      <button\n                        onClick={() => deleteAddress(addr._id)}\n                        className=\"text-sm text-red-400 hover:underline\"\n                      >\n                        Delete\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'payments' && (\n            <div className=\"card p-6\">\n              <div className=\"flex justify-between items-center mb-6\">\n                <h2 className=\"text-2xl font-semibold\">Payment Methods</h2>\n                <button onClick={() => setShowPaymentModal(true)} className=\"btn btn-primary\">\n                  Add Payment Method\n                </button>\n              </div>\n\n              <div className=\"space-y-4\">\n                {user.paymentMethods?.length === 0 && <p className=\"text-white/60\">No saved payment methods</p>}\n                {user.paymentMethods?.map((pm: any, idx: number) => (\n                  <div key={idx} className=\"bg-neutral-900 p-4 rounded-lg flex justify-between items-center\">\n                    <div>\n                      {pm.type === 'card' && (\n                        <>\n                          <p className=\"font-medium\">{pm.brand} •••• {pm.last4}</p>\n                          <p className=\"text-sm text-white/70\">Expires {pm.expiryMonth}/{pm.expiryYear}</p>\n                        </>\n                      )}\n                      {pm.type === 'upi' && (\n                        <p className=\"font-medium\">UPI: {pm.upiId}</p>\n                      )}\n                      {pm.type === 'netbanking' && (\n                        <p className=\"font-medium\">Net Banking - {pm.brand}</p>\n                      )}\n                    </div>\n                    <button\n                      onClick={() => deletePaymentMethod(pm._id)}\n                      className=\"text-sm text-red-400 hover:underline\"\n                    >\n                      Delete\n                    </button>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'orders' && (\n            <div className=\"card p-6\">\n              <div className=\"flex justify-between items-center mb-6\">\n                <h2 className=\"text-2xl font-semibold\">Order History</h2>\n                <select\n                  value={orderFilter}\n                  onChange={(e) => setOrderFilter(e.target.value)}\n                  className=\"px-4 py-2 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#0B7FB3] focus:outline-none\"\n                >\n                  <option value=\"all\">All Orders</option>\n                  <option value=\"processing\">In Progress</option>\n                  <option value=\"shipped\">Shipped</option>\n                  <option value=\"delivered\">Delivered</option>\n                  <option value=\"cancelled\">Cancelled</option>\n                </select>\n              </div>\n\n              <div className=\"space-y-4\">\n                {orders.length === 0 && <p className=\"text-white/60\">No orders yet</p>}\n                {orders\n                  .filter((order) => {\n                    if (orderFilter === 'all') return true;\n                    if (orderFilter === 'processing') return order.status === 'processing' || order.status === 'paid';\n                    return order.status === orderFilter;\n                  })\n                  .map((order) => (\n                    <div key={order._id} className=\"bg-neutral-900 p-4 rounded-lg\">\n                      <div className=\"flex justify-between items-start mb-3\">\n                        <div>\n                          <p className=\"font-medium\">Order #{order.orderNumber}</p>\n                          <p className=\"text-sm text-white/70\">{new Date(order.createdAt).toLocaleDateString()}</p>\n                        </div>\n                        <span\n                          className=\"px-3 py-1 rounded-full text-sm font-medium\"\n                          style={{\n                            backgroundColor: \n                              order.status === 'delivered' ? '#26a541' : \n                              order.status === 'cancelled' ? '#ff3f6c' :\n                              order.status === 'shipped' ? '#0B7FB3' :\n                              '#fbbf24',\n                            color: 'white',\n                          }}\n                        >\n                          {order.status === 'processing' ? 'In Progress' : \n                           order.status.charAt(0).toUpperCase() + order.status.slice(1)}\n                        </span>\n                      </div>\n\n                      {/* Product Images */}\n                      <div className=\"flex gap-2 mb-3 overflow-x-auto\">\n                        {order.items.slice(0, 4).map((item: any, idx: number) => (\n                          <img\n                            key={idx}\n                            src={item.image || 'https://images.unsplash.com/photo-1520975922284-5f573fb8c642?q=80&w=800&auto=format&fit=crop'}\n                            alt={item.title}\n                            className=\"w-16 h-16 object-cover rounded-md\"\n                          />\n                        ))}\n                        {order.items.length > 4 && (\n                          <div className=\"w-16 h-16 bg-neutral-800 rounded-md flex items-center justify-center text-xs text-white/70\">\n                            +{order.items.length - 4}\n                          </div>\n                        )}\n                      </div>\n\n                      <p className=\"text-lg font-semibold mb-2\">₹ {order.totalAmount}</p>\n                      <p className=\"text-sm text-white/70 mb-3\">{order.items.length} items</p>\n\n                      <div className=\"flex gap-2 flex-wrap\">\n                        <button\n                          onClick={() => router.push('/orders')}\n                          className=\"px-4 py-1.5 text-sm font-semibold rounded-md border border-[#0B7FB3] hover:bg-[#0B7FB3]/10\"\n                          style={{ color: '#0B7FB3' }}\n                        >\n                          View Details\n                        </button>\n                        {order.status !== 'cancelled' && order.status !== 'delivered' && (\n                          <button\n                            onClick={() => {\n                              setCancelOrderId(order._id);\n                              setShowCancelModal(true);\n                            }}\n                            className=\"px-4 py-1.5 text-sm font-semibold rounded-md border border-red-500 text-red-500 hover:bg-red-500/10\"\n                          >\n                            Cancel\n                          </button>\n                        )}\n                        {(order.status === 'shipped' || order.status === 'processing') && (\n                          <button\n                            onClick={() => handleTrackOrder(order._id)}\n                            className=\"px-4 py-1.5 text-sm font-semibold rounded-md border border-[#0B7FB3] hover:bg-[#0B7FB3]/10\"\n                            style={{ color: '#0B7FB3' }}\n                          >\n                            Track\n                          </button>\n                        )}\n                      </div>\n                    </div>\n                  ))\n                }\n                {orders.filter((order) => {\n                  if (orderFilter === 'all') return true;\n                  if (orderFilter === 'processing') return order.status === 'processing' || order.status === 'paid';\n                  return order.status === orderFilter;\n                }).length === 0 && orders.length > 0 && (\n                  <p className=\"text-white/60 text-center py-8\">\n                    No {orderFilter === 'all' ? '' : orderFilter} orders found\n                  </p>\n                )}\n              </div>\n            </div>\n          )}\n        </main>\n      </div>\n\n      {showAddressModal && (\n        <div className=\"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-neutral-950 rounded-lg p-6 max-w-md w-full border border-white/10\">\n            <h3 className=\"text-xl font-semibold mb-4\">{editingAddress ? 'Edit Address' : 'Add New Address'}</h3>\n            <div className=\"space-y-3\">\n              <input\n                className=\"w-full px-4 py-2 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#ff3f6c] focus:outline-none\"\n                placeholder=\"Address Line 1\"\n                value={addressForm.line1}\n                onChange={(e) => setAddressForm({ ...addressForm, line1: e.target.value })}\n              />\n              <input\n                className=\"w-full px-4 py-2 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#ff3f6c] focus:outline-none\"\n                placeholder=\"Address Line 2 (Optional)\"\n                value={addressForm.line2 || ''}\n                onChange={(e) => setAddressForm({ ...addressForm, line2: e.target.value })}\n              />\n              <div className=\"grid grid-cols-2 gap-3\">\n                <input\n                  className=\"px-4 py-2 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#ff3f6c] focus:outline-none\"\n                  placeholder=\"City\"\n                  value={addressForm.city}\n                  onChange={(e) => setAddressForm({ ...addressForm, city: e.target.value })}\n                />\n                <input\n                  className=\"px-4 py-2 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#ff3f6c] focus:outline-none\"\n                  placeholder=\"State\"\n                  value={addressForm.state}\n                  onChange={(e) => setAddressForm({ ...addressForm, state: e.target.value })}\n                />\n              </div>\n              <input\n                className=\"w-full px-4 py-2 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#ff3f6c] focus:outline-none\"\n                placeholder=\"ZIP Code\"\n                value={addressForm.zip}\n                onChange={(e) => setAddressForm({ ...addressForm, zip: e.target.value })}\n              />\n              <input\n                className=\"w-full px-4 py-2 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#ff3f6c] focus:outline-none\"\n                placeholder=\"Phone (Optional)\"\n                value={addressForm.phone || ''}\n                onChange={(e) => setAddressForm({ ...addressForm, phone: e.target.value })}\n              />\n              <div className=\"flex gap-3 pt-3\">\n                <button onClick={saveAddress} className=\"btn btn-primary flex-1\">\n                  {editingAddress ? 'Update' : 'Add'} Address\n                </button>\n                <button\n                  onClick={() => {\n                    setShowAddressModal(false);\n                    setEditingAddress(null);\n                    setAddressForm({ line1: '', city: '', state: '', zip: '' });\n                  }}\n                  className=\"btn btn-outline flex-1\"\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {showPaymentModal && (\n        <div className=\"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-neutral-950 rounded-lg p-6 max-w-md w-full border border-white/10\">\n            <h3 className=\"text-xl font-semibold mb-4\">Add Payment Method</h3>\n            <div className=\"space-y-3\">\n              <select\n                className=\"w-full px-4 py-2 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#ff3f6c] focus:outline-none\"\n                value={paymentForm.type}\n                onChange={(e) => setPaymentForm({ ...paymentForm, type: e.target.value as any })}\n              >\n                <option value=\"card\">Credit/Debit Card</option>\n                <option value=\"upi\">UPI</option>\n                <option value=\"netbanking\">Net Banking</option>\n              </select>\n\n              {paymentForm.type === 'card' && (\n                <>\n                  <input\n                    className=\"w-full px-4 py-2 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#ff3f6c] focus:outline-none\"\n                    placeholder=\"Card Brand (e.g., Visa, Mastercard)\"\n                    value={paymentForm.brand || ''}\n                    onChange={(e) => setPaymentForm({ ...paymentForm, brand: e.target.value })}\n                  />\n                  <input\n                    className=\"w-full px-4 py-2 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#ff3f6c] focus:outline-none\"\n                    placeholder=\"Last 4 digits\"\n                    maxLength={4}\n                    value={paymentForm.last4}\n                    onChange={(e) => setPaymentForm({ ...paymentForm, last4: e.target.value })}\n                  />\n                  <div className=\"grid grid-cols-2 gap-3\">\n                    <input\n                      className=\"px-4 py-2 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#ff3f6c] focus:outline-none\"\n                      placeholder=\"Expiry Month (MM)\"\n                      type=\"number\"\n                      value={paymentForm.expiryMonth || ''}\n                      onChange={(e) => setPaymentForm({ ...paymentForm, expiryMonth: parseInt(e.target.value) })}\n                    />\n                    <input\n                      className=\"px-4 py-2 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#ff3f6c] focus:outline-none\"\n                      placeholder=\"Expiry Year (YYYY)\"\n                      type=\"number\"\n                      value={paymentForm.expiryYear || ''}\n                      onChange={(e) => setPaymentForm({ ...paymentForm, expiryYear: parseInt(e.target.value) })}\n                    />\n                  </div>\n                </>\n              )}\n\n              {paymentForm.type === 'upi' && (\n                <input\n                  className=\"w-full px-4 py-2 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#ff3f6c] focus:outline-none\"\n                  placeholder=\"UPI ID (e.g., yourname@paytm)\"\n                  value={paymentForm.upiId || ''}\n                  onChange={(e) => setPaymentForm({ ...paymentForm, upiId: e.target.value, last4: e.target.value.slice(-4) })}\n                />\n              )}\n\n              {paymentForm.type === 'netbanking' && (\n                <input\n                  className=\"w-full px-4 py-2 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#ff3f6c] focus:outline-none\"\n                  placeholder=\"Bank Name\"\n                  value={paymentForm.brand || ''}\n                  onChange={(e) => setPaymentForm({ ...paymentForm, brand: e.target.value, last4: 'BANK' })}\n                />\n              )}\n\n              <div className=\"flex gap-3 pt-3\">\n                <button onClick={savePaymentMethod} className=\"btn btn-primary flex-1\">Add Payment Method</button>\n                <button\n                  onClick={() => {\n                    setShowPaymentModal(false);\n                    setPaymentForm({ type: 'card', last4: '', brand: '' });\n                  }}\n                  className=\"btn btn-outline flex-1\"\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {showCancelModal && (\n        <div className=\"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-neutral-950 rounded-lg p-6 max-w-md w-full border border-white/10\">\n            <h3 className=\"text-xl font-semibold mb-4\">Cancel Order</h3>\n            <p className=\"text-white/70 mb-4\">Please select a reason for cancellation:</p>\n            <select\n              value={cancelReason}\n              onChange={(e) => setCancelReason(e.target.value)}\n              className=\"w-full px-4 py-2 rounded-lg bg-neutral-900 border border-white/10 focus:border-[#0B7FB3] focus:outline-none mb-4\"\n            >\n              <option value=\"\">-- Select Reason --</option>\n              <option value=\"Changed my mind\">Changed my mind</option>\n              <option value=\"Found a better price\">Found a better price</option>\n              <option value=\"Ordered by mistake\">Ordered by mistake</option>\n              <option value=\"Delivery time too long\">Delivery time too long</option>\n              <option value=\"Other\">Other</option>\n            </select>\n            <div className=\"flex gap-3\">\n              <button\n                onClick={handleCancelOrder}\n                className=\"flex-1 px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors\"\n              >\n                Confirm Cancellation\n              </button>\n              <button\n                onClick={() => {\n                  setShowCancelModal(false);\n                  setCancelOrderId('');\n                  setCancelReason('');\n                }}\n                className=\"flex-1 px-4 py-2 rounded-lg border border-white/10 hover:bg-neutral-900 transition-colors\"\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {showTrackModal && trackingData && (\n        <div className=\"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-neutral-950 rounded-lg p-6 max-w-md w-full border border-white/10\">\n            <h3 className=\"text-xl font-semibold mb-4\">Track Order</h3>\n            <div className=\"space-y-4\">\n              <div>\n                <p className=\"text-sm text-white/70\">Order Number</p>\n                <p className=\"font-semibold\">{trackingData.orderNumber}</p>\n              </div>\n              <div>\n                <p className=\"text-sm text-white/70\">Current Status</p>\n                <p className=\"font-semibold capitalize\">{trackingData.currentStatus}</p>\n              </div>\n              {trackingData.estimatedDelivery && (\n                <div>\n                  <p className=\"text-sm text-white/70\">Estimated Delivery</p>\n                  <p className=\"font-semibold\">{new Date(trackingData.estimatedDelivery).toLocaleDateString()}</p>\n                </div>\n              )}\n              {trackingData.trackingUpdates && trackingData.trackingUpdates.length > 0 && (\n                <div>\n                  <p className=\"text-sm text-white/70 mb-2\">Tracking History</p>\n                  <div className=\"space-y-2\">\n                    {trackingData.trackingUpdates.map((update: any, idx: number) => (\n                      <div key={idx} className=\"bg-neutral-900 p-3 rounded-lg\">\n                        <p className=\"text-sm font-medium\">{update.status}</p>\n                        <p className=\"text-xs text-white/60\">{new Date(update.timestamp).toLocaleString()}</p>\n                        {update.location && <p className=\"text-xs text-white/60\">{update.location}</p>}\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n            <button\n              onClick={() => {\n                setShowTrackModal(false);\n                setTrackingData(null);\n              }}\n              className=\"w-full mt-4 px-4 py-2 rounded-lg border border-white/10 hover:bg-neutral-900 transition-colors\"\n            >\n              Close\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":32194},"next js/myntra-clone/src/app/api/user/payment/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { User } from '@/models/User';\nimport { getSession } from '@/lib/session';\n\nexport async function POST(req: NextRequest) {\n  try {\n    const session = await getSession(req);\n    if (!session) {\n      return NextResponse.json({ message: 'Unauthorized' }, { status: 401 });\n    }\n\n    await connectToDatabase();\n    const paymentMethod = await req.json();\n\n    const user = await User.findById(session.userId);\n    if (!user) {\n      return NextResponse.json({ message: 'User not found' }, { status: 404 });\n    }\n\n    user.paymentMethods.push(paymentMethod);\n    await user.save();\n\n    return NextResponse.json({ message: 'Payment method added', paymentMethods: user.paymentMethods });\n  } catch (e: any) {\n    return NextResponse.json({ message: e.message || 'Server error' }, { status: 500 });\n  }\n}\n\nexport async function DELETE(req: NextRequest) {\n  try {\n    const session = await getSession(req);\n    if (!session) {\n      return NextResponse.json({ message: 'Unauthorized' }, { status: 401 });\n    }\n\n    const { searchParams } = new URL(req.url);\n    const id = searchParams.get('id');\n\n    if (!id) {\n      return NextResponse.json({ message: 'Payment method ID required' }, { status: 400 });\n    }\n\n    await connectToDatabase();\n    const user = await User.findById(session.userId);\n    if (!user) {\n      return NextResponse.json({ message: 'User not found' }, { status: 404 });\n    }\n\n    user.paymentMethods = user.paymentMethods.filter((pm: any) => pm._id.toString() !== id);\n    await user.save();\n\n    return NextResponse.json({ message: 'Payment method deleted', paymentMethods: user.paymentMethods });\n  } catch (e: any) {\n    return NextResponse.json({ message: e.message || 'Server error' }, { status: 500 });\n  }\n}\n","size_bytes":1852},"next js/myntra-clone/src/components/Footer.tsx":{"content":"'use client';\n\nimport { motion } from 'framer-motion';\nimport Link from 'next/link';\n\nexport default function Footer() {\n  const currentYear = new Date().getFullYear();\n\n  const footerLinks = {\n    Shop: [\n      { name: 'Men', url: '/category/men' },\n      { name: 'Women', url: '/category/women' },\n      { name: 'Kids', url: '/category/kids' },\n      { name: 'Footwear', url: '/category/footwear' },\n      { name: 'Accessories', url: '/category/accessories' },\n      { name: 'Beauty', url: '/category/beauty' },\n    ],\n    'Customer Service': [\n      { name: 'Contact Us', url: '/contact' },\n      { name: 'Track Order', url: '/track-order' },\n      { name: 'Returns & Exchanges', url: '/returns' },\n      { name: 'Shipping Info', url: '/shipping' },\n      { name: 'FAQs', url: '/faqs' },\n    ],\n    'About Us': [\n      { name: 'Our Story', url: '/about' },\n      { name: 'Careers', url: '/careers' },\n      { name: 'Press', url: '/press' },\n      { name: 'Sustainability', url: '/sustainability' },\n    ],\n    Legal: [\n      { name: 'Privacy Policy', url: '/privacy' },\n      { name: 'Terms of Service', url: '/terms' },\n      { name: 'Cookie Policy', url: '/cookies' },\n    ],\n  };\n\n  const socialLinks = [\n    { name: 'Facebook', icon: 'M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z', url: 'https://facebook.com' },\n    { name: 'Instagram', icon: 'M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z', url: 'https://instagram.com' },\n    { name: 'Twitter', icon: 'M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z', url: 'https://twitter.com' },\n    { name: 'YouTube', icon: 'M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z', url: 'https://youtube.com' },\n  ];\n\n  return (\n    <footer className=\"bg-gradient-to-br from-neutral-950 to-black border-t border-white/10 mt-20\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-8 mb-8\">\n          <div className=\"lg:col-span-1\">\n            <Link href=\"/\" className=\"text-2xl font-bold text-[#0B7FB3] mb-4 inline-block\">\n              Myntra\n            </Link>\n            <p className=\"text-white/60 text-sm mb-4\">\n              Your ultimate destination for fashion and lifestyle. Discover the latest trends and shop with confidence.\n            </p>\n            <div className=\"flex gap-4\">\n              {socialLinks.map((social) => (\n                <motion.a\n                  key={social.name}\n                  href={social.url}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"w-10 h-10 rounded-full bg-white/5 hover:bg-[#0B7FB3] transition-colors flex items-center justify-center group\"\n                  whileHover={{ scale: 1.1 }}\n                  whileTap={{ scale: 0.95 }}\n                  aria-label={social.name}\n                >\n                  <svg className=\"w-5 h-5 text-white/60 group-hover:text-white transition-colors\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                    <path d={social.icon} />\n                  </svg>\n                </motion.a>\n              ))}\n            </div>\n          </div>\n\n          {Object.entries(footerLinks).map(([category, links]) => (\n            <div key={category}>\n              <h3 className=\"font-semibold text-white mb-4\">{category}</h3>\n              <ul className=\"space-y-2\">\n                {links.map((link) => (\n                  <li key={link.name}>\n                    <Link\n                      href={link.url}\n                      className=\"text-white/60 hover:text-[#0B7FB3] transition-colors text-sm\"\n                    >\n                      {link.name}\n                    </Link>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"border-t border-white/10 pt-8\">\n          <div className=\"flex flex-col md:flex-row justify-between items-center gap-4\">\n            <p className=\"text-white/40 text-sm text-center md:text-left\">\n              © {currentYear} Myntra. All rights reserved. Built with Next.js\n            </p>\n            <div className=\"flex gap-6 text-sm\">\n              <Link href=\"/privacy\" className=\"text-white/40 hover:text-white/60 transition-colors\">\n                Privacy\n              </Link>\n              <Link href=\"/terms\" className=\"text-white/40 hover:text-white/60 transition-colors\">\n                Terms\n              </Link>\n              <Link href=\"/cookies\" className=\"text-white/40 hover:text-white/60 transition-colors\">\n                Cookies\n              </Link>\n            </div>\n          </div>\n        </div>\n      </div>\n    </footer>\n  );\n}\n","size_bytes":6686},"next js/myntra-clone/src/app/category/[slug]/page.tsx":{"content":"'use client';\n\nimport { motion } from 'framer-motion';\nimport { useParams, useSearchParams } from 'next/navigation';\nimport Image from 'next/image';\nimport Link from 'next/link';\nimport { useEffect, useState, useMemo } from 'react';\n\nconst categoryFilters: Record<string, { brands?: string[]; types?: string[] }> = {\n  men: {\n    brands: ['Nike', 'Puma', 'Adidas', 'H&M', 'Zara', 'Levis', 'Roadster', 'Tommy Hilfiger'],\n  },\n  women: {\n    brands: ['Zara', 'H&M', 'Forever 21', 'Mango', 'Nike', 'Vero Moda'],\n  },\n  kids: {\n    brands: ['GAP Kids', 'Carters', 'H&M Kids', 'Mothercare', 'UCB Kids'],\n  },\n  footwear: {\n    brands: ['Nike', 'Adidas', 'Puma', 'Clarks', 'Steve Madden', 'Bata'],\n  },\n  accessories: {\n    brands: ['Fossil', 'Michael Kors', 'Ray-Ban', 'Titan', 'Fastrack'],\n  },\n  beauty: {\n    types: ['Lipstick', 'Face Wash', 'Serum', 'Kajal', 'Moisturizer', 'Nail Polish', 'Compact Powder', 'Foundation'],\n  },\n};\n\nexport default function CategoryPage() {\n  const params = useParams();\n  const searchParams = useSearchParams();\n  const slug = params.slug as string;\n  const [allProducts, setAllProducts] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showFilters, setShowFilters] = useState(false);\n  const [selectedSort, setSelectedSort] = useState('recommended');\n  const [priceRange, setPriceRange] = useState([0, 10000]);\n  const [selectedColors, setSelectedColors] = useState<string[]>([]);\n  const [selectedFilters, setSelectedFilters] = useState<string[]>([]);\n  const [selectedDiscount, setSelectedDiscount] = useState<number>(0);\n  const [wishlistItems, setWishlistItems] = useState<string[]>([]);\n\n  const categoryName = slug\n    .split('-')\n    .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n    .join(' ');\n\n  const isSale = searchParams.get('sale') === 'true';\n  const filterConfig = categoryFilters[slug] || categoryFilters.men;\n  const isBeautyCategory = slug === 'beauty';\n\n  const colors = ['Black', 'White', 'Blue', 'Red', 'Green', 'Grey', 'Navy Blue', 'Pink'];\n  const sortOptions = [\n    { id: 'recommended', label: 'Recommended' },\n    { id: 'new', label: \"What's New\" },\n    { id: 'popular', label: 'Popularity' },\n    { id: 'discount', label: 'Better Discount' },\n    { id: 'price-high', label: 'Price: High to Low' },\n    { id: 'price-low', label: 'Price: Low to High' },\n    { id: 'rating', label: 'Customer Rating' },\n  ];\n\n  // Calculate consistent discount and originalPrice\n  const productsWithDiscounts = useMemo(() => {\n    return allProducts.map((product) => {\n      let discount = product.discount || 0;\n      let originalPrice = product.originalPrice || 0;\n      \n      // If no discount data, calculate based on product ID hash\n      if (!discount || !originalPrice) {\n        const hash = product._id ? product._id.charCodeAt(product._id.length - 1) : 0;\n        discount = 15 + (hash % 56); // 15-70% discount range\n        originalPrice = Math.round(product.price / (1 - discount / 100));\n      }\n      \n      return {\n        ...product,\n        discount,\n        originalPrice,\n      };\n    });\n  }, [allProducts]);\n\n  useEffect(() => {\n    async function fetchProducts() {\n      try {\n        const res = await fetch('/api/products');\n        if (res.ok) {\n          const data = await res.json();\n          const filtered = data.filter((p: any) => p.category === slug || slug === 'all');\n          setAllProducts(filtered);\n        }\n      } catch (error) {\n        console.error('Failed to fetch products:', error);\n      } finally {\n        setLoading(false);\n      }\n    }\n    fetchProducts();\n  }, [slug]);\n\n  useEffect(() => {\n    loadWishlist();\n    window.addEventListener('storage', loadWishlist);\n    return () => window.removeEventListener('storage', loadWishlist);\n  }, []);\n\n  function loadWishlist() {\n    const wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');\n    setWishlistItems(wishlist);\n  }\n\n  const toggleFilter = (filter: string) => {\n    setSelectedFilters((prev) =>\n      prev.includes(filter) ? prev.filter((f) => f !== filter) : [...prev, filter]\n    );\n  };\n\n  const toggleColor = (color: string) => {\n    setSelectedColors((prev) =>\n      prev.includes(color) ? prev.filter((c) => c !== color) : [...prev, color]\n    );\n  };\n\n  const clearAllFilters = () => {\n    setSelectedColors([]);\n    setSelectedFilters([]);\n    setPriceRange([0, 10000]);\n    setSelectedDiscount(0);\n  };\n\n  const addToWishlist = (productId: string, e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    const wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');\n    if (wishlist.includes(productId)) {\n      const updated = wishlist.filter((id: string) => id !== productId);\n      localStorage.setItem('wishlist', JSON.stringify(updated));\n    } else {\n      wishlist.push(productId);\n      localStorage.setItem('wishlist', JSON.stringify(wishlist));\n    }\n    window.dispatchEvent(new Event('storage'));\n  };\n\n  const isInWishlist = (productId: string) => {\n    return wishlistItems.includes(productId);\n  };\n\n  const filteredProducts = productsWithDiscounts.filter((product) => {\n    if (selectedFilters.length > 0) {\n      if (isBeautyCategory) {\n        if (!selectedFilters.includes(product.type)) return false;\n      } else {\n        if (!selectedFilters.includes(product.brand)) return false;\n      }\n    }\n\n    if (product.price < priceRange[0] || product.price > priceRange[1]) {\n      return false;\n    }\n\n    if (selectedColors.length > 0) {\n      if (!product.colors || !product.colors.some((c: string) => selectedColors.includes(c))) {\n        return false;\n      }\n    }\n\n    if (selectedDiscount > 0) {\n      if (product.discount < selectedDiscount) {\n        return false;\n      }\n    }\n\n    return true;\n  });\n\n  const sortedProducts = [...filteredProducts].sort((a, b) => {\n    switch (selectedSort) {\n      case 'price-high':\n        return b.price - a.price;\n      case 'price-low':\n        return a.price - b.price;\n      case 'rating':\n        return (b.rating || 0) - (a.rating || 0);\n      case 'discount':\n        return b.discount - a.discount;\n      default:\n        return 0;\n    }\n  });\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-black via-gray-900 to-black\">\n      <div className=\"relative h-[200px] bg-gradient-to-br from-[#0B7FB3] to-[#0969A0]\">\n        <div className=\"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS1vcGFjaXR5PSIwLjEiIHN0cm9rZS13aWR0aD0iMSIvPjwvcGF0dGVybj48L2RlZnM+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNncmlkKSIvPjwvc3ZnPg==')] opacity-30\"></div>\n        <div className=\"relative h-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between\">\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.6 }}\n          >\n            <h1 className=\"text-3xl md:text-4xl font-bold text-white mb-2\">\n              {categoryName}\n            </h1>\n            <p className=\"text-lg text-white/90\">\n              {sortedProducts.length} {isSale ? 'Sale Items' : 'Products'}\n            </p>\n          </motion.div>\n          \n          <button\n            onClick={() => setShowFilters(!showFilters)}\n            className=\"lg:hidden bg-white/20 backdrop-blur-sm text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-white/30 transition-colors\"\n          >\n            <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z\" />\n            </svg>\n            Filters\n          </button>\n        </div>\n      </div>\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"flex gap-8\">\n          <div className={`${showFilters ? 'block' : 'hidden'} lg:block w-full lg:w-64 flex-shrink-0`}>\n            <div className=\"bg-white rounded-2xl p-6 shadow-lg sticky top-24\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h2 className=\"text-xl font-bold text-gray-800\">Filters</h2>\n                <button\n                  onClick={clearAllFilters}\n                  className=\"text-sm text-[#0B7FB3] hover:underline font-semibold\"\n                >\n                  Clear All\n                </button>\n              </div>\n\n              <div className=\"space-y-6\">\n                <div>\n                  <h3 className=\"font-semibold text-gray-800 mb-3\">\n                    {isBeautyCategory ? 'Product Type' : 'Brands'}\n                  </h3>\n                  <div className=\"space-y-2 max-h-48 overflow-y-auto\">\n                    {(isBeautyCategory ? filterConfig.types : filterConfig.brands)?.map((item) => (\n                      <label key={item} className=\"flex items-center gap-2 cursor-pointer group\">\n                        <input\n                          type=\"checkbox\"\n                          checked={selectedFilters.includes(item)}\n                          onChange={() => toggleFilter(item)}\n                          className=\"w-4 h-4 rounded border-gray-300 text-[#0B7FB3] focus:ring-[#0B7FB3]\"\n                        />\n                        <span className=\"text-gray-600 group-hover:text-gray-900 transition-colors text-sm\">\n                          {item}\n                        </span>\n                      </label>\n                    ))}\n                  </div>\n                </div>\n\n                <div className=\"border-t pt-6\">\n                  <h3 className=\"font-semibold text-gray-800 mb-3\">Price Range</h3>\n                  <div className=\"space-y-3\">\n                    <input\n                      type=\"range\"\n                      min=\"0\"\n                      max=\"10000\"\n                      value={priceRange[1]}\n                      onChange={(e) => setPriceRange([0, parseInt(e.target.value)])}\n                      className=\"w-full accent-[#0B7FB3]\"\n                    />\n                    <div className=\"flex justify-between text-sm text-gray-600\">\n                      <span>₹{priceRange[0]}</span>\n                      <span>₹{priceRange[1]}</span>\n                    </div>\n                  </div>\n                </div>\n\n                {!isBeautyCategory && (\n                  <div className=\"border-t pt-6\">\n                    <h3 className=\"font-semibold text-gray-800 mb-3\">Colors</h3>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {colors.map((color) => (\n                        <button\n                          key={color}\n                          onClick={() => toggleColor(color)}\n                          className={`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${\n                            selectedColors.includes(color)\n                              ? 'bg-[#0B7FB3] text-white shadow-md'\n                              : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n                          }`}\n                        >\n                          {color}\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                <div className=\"border-t pt-6\">\n                  <h3 className=\"font-semibold text-gray-800 mb-3\">Discount</h3>\n                  <div className=\"space-y-2\">\n                    {[0, 10, 20, 30, 40, 50, 60, 70].map((discount) => (\n                      <label key={discount} className=\"flex items-center gap-2 cursor-pointer group\">\n                        <input\n                          type=\"radio\"\n                          name=\"discount\"\n                          checked={selectedDiscount === discount}\n                          onChange={() => setSelectedDiscount(discount)}\n                          className=\"w-4 h-4 text-[#0B7FB3] focus:ring-[#0B7FB3]\"\n                        />\n                        <span className=\"text-gray-600 group-hover:text-gray-900 transition-colors text-sm\">\n                          {discount === 0 ? 'All' : `${discount}% and above`}\n                        </span>\n                      </label>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"flex-1\">\n            <div className=\"flex items-center justify-between mb-6 bg-white rounded-lg p-4 shadow-sm\">\n              <p className=\"text-gray-600 font-medium\">\n                Showing {sortedProducts.length} products\n              </p>\n              <div className=\"relative\">\n                <select\n                  value={selectedSort}\n                  onChange={(e) => setSelectedSort(e.target.value)}\n                  className=\"bg-white border border-gray-300 text-gray-700 rounded-lg px-4 py-2 pr-10 appearance-none cursor-pointer focus:outline-none focus:ring-2 focus:ring-[#0B7FB3] focus:border-transparent\"\n                >\n                  {sortOptions.map((option) => (\n                    <option key={option.id} value={option.id}>\n                      Sort by: {option.label}\n                    </option>\n                  ))}\n                </select>\n                <svg className=\"w-5 h-5 text-gray-400 absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                </svg>\n              </div>\n            </div>\n\n            {loading ? (\n              <div className=\"flex justify-center items-center h-64\">\n                <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#0B7FB3]\"></div>\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n                {sortedProducts.map((product, index) => (\n                  <motion.div\n                    key={product._id}\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ duration: 0.5, delay: index * 0.05 }}\n                    className=\"group bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 relative\"\n                  >\n                    <Link href={`/product/${product._id}`}>\n                      <div className=\"relative aspect-[3/4] overflow-hidden bg-gray-100\">\n                        <Image\n                          src={product.images?.[0] || 'https://images.unsplash.com/photo-1520975922284-5f573fb8c642?q=80&w=800&auto=format&fit=crop'}\n                          alt={product.title}\n                          fill\n                          className=\"object-cover group-hover:scale-110 transition-transform duration-500\"\n                          sizes=\"(max-width: 768px) 50vw, (max-width: 1200px) 33vw, 25vw\"\n                        />\n                      </div>\n                      <div className=\"p-3 space-y-1\">\n                        <p className=\"text-sm font-bold text-gray-800\">{product.brand || 'Brand'}</p>\n                        <h3 className=\"text-sm text-gray-600 line-clamp-1\">\n                          {product.title}\n                        </h3>\n                        <div className=\"flex items-center gap-2 pt-1\">\n                          <span className=\"text-base font-bold text-gray-900\">₹{product.price}</span>\n                          <span className=\"text-xs text-gray-400 line-through\">\n                            ₹{product.originalPrice}\n                          </span>\n                          <span className=\"text-xs text-[#26a541] font-semibold\">\n                            {product.discount}% OFF\n                          </span>\n                        </div>\n                        {product.rating && (\n                          <div className=\"flex items-center gap-1 pt-1\">\n                            <span className=\"text-xs bg-[#26a541] text-white px-2 py-0.5 rounded font-medium\">\n                              {product.rating} ★\n                            </span>\n                            <span className=\"text-xs text-gray-400\">({Math.floor(Math.random() * 1000)})</span>\n                          </div>\n                        )}\n                      </div>\n                    </Link>\n                    <button\n                      onClick={(e) => addToWishlist(product._id, e)}\n                      className=\"absolute top-3 right-3 bg-white p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity shadow-md hover:scale-110 z-10\"\n                    >\n                      <svg\n                        className={`w-5 h-5 transition-colors ${\n                          isInWishlist(product._id)\n                            ? 'fill-red-500 text-red-500'\n                            : 'text-gray-700 hover:text-red-500'\n                        }`}\n                        fill={isInWishlist(product._id) ? 'currentColor' : 'none'}\n                        viewBox=\"0 0 24 24\"\n                        stroke=\"currentColor\"\n                      >\n                        <path\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                          strokeWidth={2}\n                          d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\n                        />\n                      </svg>\n                    </button>\n                  </motion.div>\n                ))}\n              </div>\n            )}\n\n            {!loading && sortedProducts.length === 0 && (\n              <div className=\"text-center py-16 bg-white rounded-xl\">\n                <h2 className=\"text-2xl font-semibold text-gray-800 mb-4\">\n                  No products found\n                </h2>\n                <p className=\"text-gray-600 mb-6\">Try adjusting your filters</p>\n                <button\n                  onClick={clearAllFilters}\n                  className=\"inline-block px-6 py-3 bg-[#0B7FB3] text-white rounded-full hover:bg-[#0969A0] transition-colors font-semibold\"\n                >\n                  Clear Filters\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":18811},"next js/myntra-clone/src/app/api/user/update/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { User } from '@/models/User';\nimport { getSession } from '@/lib/session';\n\nexport async function PUT(req: NextRequest) {\n  try {\n    const session = await getSession(req);\n    if (!session) {\n      return NextResponse.json({ message: 'Unauthorized' }, { status: 401 });\n    }\n\n    await connectToDatabase();\n    const { name, email, phone } = await req.json();\n\n    const user = await User.findById(session.userId);\n    if (!user) {\n      return NextResponse.json({ message: 'User not found' }, { status: 404 });\n    }\n\n    if (email && email !== user.email) {\n      const emailExists = await User.findOne({ email });\n      if (emailExists) {\n        return NextResponse.json({ message: 'Email already in use' }, { status: 409 });\n      }\n      user.email = email;\n    }\n\n    if (phone && phone !== user.phone) {\n      const phoneExists = await User.findOne({ phone });\n      if (phoneExists) {\n        return NextResponse.json({ message: 'Phone number already in use' }, { status: 409 });\n      }\n      user.phone = phone;\n    }\n\n    if (name) user.name = name;\n\n    await user.save();\n\n    return NextResponse.json({\n      _id: user._id,\n      name: user.name,\n      email: user.email,\n      phone: user.phone,\n      addresses: user.addresses,\n      paymentMethods: user.paymentMethods,\n    });\n  } catch (e: any) {\n    return NextResponse.json({ message: e.message || 'Server error' }, { status: 500 });\n  }\n}\n","size_bytes":1529},"next js/myntra-clone/src/lib/otpStore.ts":{"content":"const otpStore = new Map<string, { otp: string; expires: number }>();\n\nexport default otpStore;\n","size_bytes":96},"next js/myntra-clone/src/app/api/auth/callback/google/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport { getServerSession } from 'next-auth';\nimport { signAuthToken } from '@/lib/auth';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { User } from '@/models/User';\n\nexport async function GET(req: NextRequest) {\n  try {\n    const session = await getServerSession();\n    \n    if (session?.user?.email) {\n      await connectToDatabase();\n      const dbUser = await User.findOne({ email: session.user.email });\n      \n      if (dbUser) {\n        const token = signAuthToken({\n          userId: dbUser._id.toString(),\n          email: dbUser.email,\n        });\n        \n        const response = NextResponse.redirect(new URL('/', req.url));\n        response.cookies.set('token', token, {\n          httpOnly: true,\n          secure: process.env.NODE_ENV === 'production',\n          sameSite: 'lax',\n          maxAge: 60 * 60 * 24 * 7,\n          path: '/',\n        });\n        \n        return response;\n      }\n    }\n    \n    return NextResponse.redirect(new URL('/', req.url));\n  } catch (error) {\n    console.error('Google callback error:', error);\n    return NextResponse.redirect(new URL('/login', req.url));\n  }\n}\n","size_bytes":1184},"next js/myntra-clone/src/app/api/orders/rating/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { Order } from '@/models/Order';\nimport { getSession } from '@/lib/auth';\n\nexport async function POST(req: NextRequest) {\n        try {\n                const session = await getSession(req);\n                if (!session) {\n                        return NextResponse.json({ message: 'Unauthorized' }, { status: 401 });\n                }\n\n                const { orderId, stars, review } = await req.json();\n                \n                if (!orderId || !stars) {\n                        return NextResponse.json({ message: 'Order ID and rating are required' }, { status: 400 });\n                }\n\n                if (stars < 1 || stars > 5) {\n                        return NextResponse.json({ message: 'Rating must be between 1 and 5' }, { status: 400 });\n                }\n\n                await connectToDatabase();\n                const order = await Order.findOne({ _id: orderId, user: session.userId });\n                \n                if (!order) {\n                        return NextResponse.json({ message: 'Order not found' }, { status: 404 });\n                }\n\n                if (order.status !== 'delivered') {\n                        return NextResponse.json({ \n                                message: 'Can only rate delivered orders' \n                        }, { status: 400 });\n                }\n\n                order.rating = {\n                        stars,\n                        review: review || '',\n                        createdAt: new Date(),\n                };\n                await order.save();\n\n                return NextResponse.json({ \n                        message: 'Rating added successfully', \n                        rating: order.rating \n                });\n        } catch (error: any) {\n                console.error('Add rating error:', error);\n                return NextResponse.json({ message: error.message || 'Failed to add rating' }, { status: 500 });\n        }\n}\n","size_bytes":2038},"next js/myntra-clone/src/app/api/orders/cancel/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { Order } from '@/models/Order';\nimport { getSession } from '@/lib/auth';\n\nexport async function POST(req: NextRequest) {\n        try {\n                const session = await getSession(req);\n                if (!session) {\n                        return NextResponse.json({ message: 'Unauthorized' }, { status: 401 });\n                }\n\n                const { orderId, reason } = await req.json();\n                \n                if (!orderId || !reason) {\n                        return NextResponse.json({ message: 'Order ID and reason are required' }, { status: 400 });\n                }\n\n                await connectToDatabase();\n                const order = await Order.findOne({ _id: orderId, user: session.userId });\n                \n                if (!order) {\n                        return NextResponse.json({ message: 'Order not found' }, { status: 404 });\n                }\n\n                if (order.status === 'delivered' || order.status === 'cancelled') {\n                        return NextResponse.json({ \n                                message: `Cannot cancel ${order.status} order` \n                        }, { status: 400 });\n                }\n\n                order.status = 'cancelled';\n                order.cancellationReason = reason;\n                await order.save();\n\n                return NextResponse.json({ \n                        message: 'Order cancelled successfully', \n                        order \n                });\n        } catch (error: any) {\n                console.error('Cancel order error:', error);\n                return NextResponse.json({ message: error.message || 'Failed to cancel order' }, { status: 500 });\n        }\n}\n","size_bytes":1801},"next js/myntra-clone/src/app/api/orders/track/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { Order } from '@/models/Order';\nimport { getSession } from '@/lib/auth';\n\nexport async function GET(req: NextRequest) {\n        try {\n                const session = await getSession(req);\n                if (!session) {\n                        return NextResponse.json({ message: 'Unauthorized' }, { status: 401 });\n                }\n\n                const { searchParams } = new URL(req.url);\n                const orderId = searchParams.get('orderId');\n\n                if (!orderId) {\n                        return NextResponse.json({ message: 'Order ID is required' }, { status: 400 });\n                }\n\n                await connectToDatabase();\n                const order = await Order.findOne({ _id: orderId, user: session.userId });\n\n                if (!order) {\n                        return NextResponse.json({ message: 'Order not found' }, { status: 404 });\n                }\n\n                // Auto-update tracking based on days elapsed (dummy for testing)\n                const daysSinceOrder = Math.floor(\n                        (Date.now() - new Date(order.createdAt).getTime()) / (1000 * 60 * 60 * 24)\n                );\n\n                // Update tracking status based on days\n                if (order.status === 'processing' || order.status === 'shipped') {\n                        const trackingUpdates: any[] = [\n                                {\n                                        stage: 'processing',\n                                        message: 'Order confirmed and being processed',\n                                        updatedAt: order.createdAt,\n                                }\n                        ];\n\n                        if (daysSinceOrder >= 1) {\n                                trackingUpdates.push({\n                                        stage: 'shipped',\n                                        message: 'Order has been shipped',\n                                        updatedAt: new Date(new Date(order.createdAt).getTime() + 1 * 24 * 60 * 60 * 1000),\n                                });\n                        }\n\n                        if (daysSinceOrder >= 3) {\n                                trackingUpdates.push({\n                                        stage: 'in_transit',\n                                        message: 'Package is in transit to your location',\n                                        updatedAt: new Date(new Date(order.createdAt).getTime() + 3 * 24 * 60 * 60 * 1000),\n                                });\n                        }\n\n                        if (daysSinceOrder >= 5) {\n                                trackingUpdates.push({\n                                        stage: 'out_for_delivery',\n                                        message: 'Out for delivery',\n                                        updatedAt: new Date(new Date(order.createdAt).getTime() + 5 * 24 * 60 * 60 * 1000),\n                                });\n                        }\n\n                        if (daysSinceOrder >= 7) {\n                                trackingUpdates.push({\n                                        stage: 'delivered',\n                                        message: 'Delivered successfully',\n                                        updatedAt: order.deliveryDate || new Date(),\n                                });\n                                order.status = 'delivered';\n                        } else if (daysSinceOrder >= 1) {\n                                order.status = 'shipped';\n                        }\n\n                        order.trackingStatus = trackingUpdates;\n                        await order.save();\n                }\n\n                return NextResponse.json({ \n                        order,\n                        tracking: order.trackingStatus || []\n                });\n        } catch (error: any) {\n                console.error('Track order error:', error);\n                return NextResponse.json({ message: error.message || 'Failed to track order' }, { status: 500 });\n        }\n}\n","size_bytes":4137},"next js/myntra-clone/src/app/api/products/[id]/ratings/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport { connectToDatabase } from '@/lib/mongodb';\nimport { Order } from '@/models/Order';\n\nexport async function GET(\n  req: NextRequest,\n  context: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id: productId } = await context.params;\n    \n    await connectToDatabase();\n    \n    // Find all delivered orders that contain this product and have ratings\n    const orders = await Order.find({\n      'items.product': productId,\n      status: 'delivered',\n      'rating.stars': { $exists: true }\n    }).populate('user', 'name').sort({ 'rating.createdAt': -1 });\n\n    // Extract ratings\n    const ratings = orders\n      .filter(order => order.rating)\n      .map(order => ({\n        stars: order.rating!.stars,\n        review: order.rating!.review || '',\n        createdAt: order.rating!.createdAt,\n        userName: (order as any).user?.name || 'Anonymous User',\n      }));\n\n    return NextResponse.json(ratings);\n  } catch (error: any) {\n    console.error('Fetch ratings error:', error);\n    return NextResponse.json({ message: error.message || 'Failed to fetch ratings' }, { status: 500 });\n  }\n}\n","size_bytes":1165},"next js/myntra-mobile/src/api/product.service.ts":{"content":"import api from './client';\n\nexport const productService = {\n  async getAllProducts(params?: {\n    category?: string;\n    search?: string;\n    minPrice?: number;\n    maxPrice?: number;\n    sort?: string;\n  }) {\n    const response = await api.get('/api/products', { params });\n    return response.data;\n  },\n\n  async getProductById(id: string) {\n    const response = await api.get(`/api/products/${id}`);\n    return response.data;\n  },\n\n  async getProductReviews(id: string) {\n    const response = await api.get(`/api/products/${id}/reviews`);\n    return response.data;\n  },\n\n  async addProductReview(id: string, data: { rating: number; comment: string }) {\n    const response = await api.post(`/api/products/${id}/reviews`, data);\n    return response.data;\n  },\n\n  async getProductRatings(id: string) {\n    const response = await api.get(`/api/products/${id}/ratings`);\n    return response.data;\n  },\n};\n","size_bytes":904},"next js/myntra-mobile/tailwind.config.js":{"content":"/** @type {import('tailwindcss').Config} */\nmodule.exports = {\n  content: [\n    \"./app/**/*.{js,jsx,ts,tsx}\",\n    \"./components/**/*.{js,jsx,ts,tsx}\",\n    \"./src/**/*.{js,jsx,ts,tsx}\"\n  ],\n  presets: [require(\"nativewind/preset\")],\n  theme: {\n    extend: {\n      colors: {\n        primary: '#FF3E6C',\n        secondary: '#282C3F',\n        accent: '#FBAF03',\n      },\n    },\n  },\n  plugins: [],\n}\n","size_bytes":396},"next js/myntra-mobile/src/api/order.service.ts":{"content":"import api from './client';\n\nexport const orderService = {\n  async createOrder(data: {\n    items: Array<{ productId: string; quantity: number; size: string; price: number }>;\n    shippingAddress: any;\n    paymentMethod: string;\n    totalAmount: number;\n  }) {\n    const response = await api.post('/api/checkout/create-order', data);\n    return response.data;\n  },\n\n  async verifyPayment(data: {\n    orderId: string;\n    paymentId: string;\n    signature: string;\n  }) {\n    const response = await api.post('/api/checkout/verify', data);\n    return response.data;\n  },\n\n  async getOrders() {\n    const response = await api.get('/api/orders');\n    return response.data;\n  },\n\n  async getOrderById(id: string) {\n    const response = await api.get(`/api/orders/${id}`);\n    return response.data;\n  },\n\n  async trackOrder(orderId: string) {\n    const response = await api.post('/api/orders/track', { orderId });\n    return response.data;\n  },\n\n  async cancelOrder(orderId: string, reason: string) {\n    const response = await api.post('/api/orders/cancel', { orderId, reason });\n    return response.data;\n  },\n\n  async rateOrder(orderId: string, rating: number, comment?: string) {\n    const response = await api.post('/api/orders/rating', { orderId, rating, comment });\n    return response.data;\n  },\n};\n","size_bytes":1299},"next js/myntra-mobile/src/api/auth.service.ts":{"content":"import api from './client';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nexport interface LoginData {\n  email: string;\n  password: string;\n}\n\nexport interface SignupData {\n  name: string;\n  email: string;\n  password: string;\n  phone: string;\n}\n\nexport interface OTPData {\n  phone: string;\n  otp?: string;\n  name?: string;\n}\n\nexport const authService = {\n  async login(data: LoginData) {\n    const response = await api.post('/api/auth/login', data);\n    if (response.data && response.headers['x-auth-token']) {\n      await AsyncStorage.setItem('authToken', response.headers['x-auth-token']);\n      await AsyncStorage.setItem('user', JSON.stringify(response.data));\n    }\n    return response.data;\n  },\n\n  async signup(data: SignupData) {\n    const response = await api.post('/api/auth/signup', data);\n    if (response.data && response.headers['x-auth-token']) {\n      await AsyncStorage.setItem('authToken', response.headers['x-auth-token']);\n      await AsyncStorage.setItem('user', JSON.stringify(response.data));\n    }\n    return response.data;\n  },\n\n  async sendOTP(phone: string) {\n    const response = await api.post('/api/auth/send-otp', { phone });\n    return response.data;\n  },\n\n  async verifyOTP(data: OTPData) {\n    const response = await api.post('/api/auth/verify-otp', data);\n    if (response.data?.user) {\n      const token = response.headers['x-auth-token'];\n      if (token) {\n        await AsyncStorage.setItem('authToken', token);\n        await AsyncStorage.setItem('user', JSON.stringify(response.data.user));\n      }\n    }\n    return response.data;\n  },\n\n  async forgotPassword(email: string) {\n    const response = await api.post('/api/auth/forgot-password', { email });\n    return response.data;\n  },\n\n  async resetPassword(token: string, password: string) {\n    const response = await api.post('/api/auth/reset-password', { token, password });\n    return response.data;\n  },\n\n  async logout() {\n    try {\n      await api.post('/api/auth/logout');\n    } catch (error) {\n      console.error('Logout error:', error);\n    } finally {\n      await AsyncStorage.removeItem('authToken');\n      await AsyncStorage.removeItem('user');\n      await AsyncStorage.removeItem('cart');\n      await AsyncStorage.removeItem('wishlist');\n    }\n  },\n\n  async getCurrentUser() {\n    const userStr = await AsyncStorage.getItem('user');\n    return userStr ? JSON.parse(userStr) : null;\n  },\n\n  async isAuthenticated() {\n    const token = await AsyncStorage.getItem('authToken');\n    return !!token;\n  },\n};\n","size_bytes":2534},"next js/myntra-mobile/src/api/user.service.ts":{"content":"import api from './client';\n\nexport const userService = {\n  async getProfile() {\n    const response = await api.get('/api/user/me');\n    return response.data;\n  },\n\n  async updateProfile(data: {\n    name?: string;\n    email?: string;\n    phone?: string;\n    avatar?: string;\n  }) {\n    const response = await api.put('/api/user/update', data);\n    return response.data;\n  },\n\n  async getAddresses() {\n    const response = await api.get('/api/user/address');\n    return response.data;\n  },\n\n  async addAddress(data: {\n    fullName: string;\n    phone: string;\n    address: string;\n    city: string;\n    state: string;\n    pincode: string;\n    type?: string;\n  }) {\n    const response = await api.post('/api/user/address', data);\n    return response.data;\n  },\n\n  async updateAddress(addressData: any) {\n    const response = await api.put('/api/user/address', addressData);\n    return response.data;\n  },\n\n  async deleteAddress(id: string) {\n    const response = await api.delete('/api/user/address', {\n      params: { id }\n    });\n    return response.data;\n  },\n\n  async getPaymentMethods() {\n    const response = await api.get('/api/user/payment');\n    return response.data;\n  },\n\n  async addPaymentMethod(data: any) {\n    const response = await api.post('/api/user/payment', data);\n    return response.data;\n  },\n\n  async deletePaymentMethod(id: string) {\n    const response = await api.delete('/api/user/payment', {\n      params: { id }\n    });\n    return response.data;\n  },\n};\n","size_bytes":1480},"next js/myntra-mobile/src/contexts/AuthContext.tsx":{"content":"import React, { createContext, useState, useContext, useEffect } from 'react';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { authService } from '../api/auth.service';\n\ninterface User {\n  id: string;\n  name: string;\n  email: string;\n  phone?: string;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  loading: boolean;\n  login: (email: string, password: string) => Promise<void>;\n  signup: (name: string, email: string, password: string, phone: string) => Promise<void>;\n  loginWithOTP: (phone: string, otp: string, name?: string) => Promise<void>;\n  sendOTP: (phone: string) => Promise<void>;\n  logout: () => Promise<void>;\n  isAuthenticated: boolean;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadUser();\n  }, []);\n\n  const loadUser = async () => {\n    try {\n      const savedUser = await AsyncStorage.getItem('user');\n      const token = await AsyncStorage.getItem('authToken');\n      if (savedUser && token) {\n        setUser(JSON.parse(savedUser));\n      }\n    } catch (error) {\n      console.error('Error loading user:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const login = async (email: string, password: string) => {\n    const userData = await authService.login({ email, password });\n    setUser(userData);\n  };\n\n  const signup = async (name: string, email: string, password: string, phone: string) => {\n    const userData = await authService.signup({ name, email, password, phone });\n    setUser(userData);\n  };\n\n  const sendOTP = async (phone: string) => {\n    await authService.sendOTP(phone);\n  };\n\n  const loginWithOTP = async (phone: string, otp: string, name?: string) => {\n    const response = await authService.verifyOTP({ phone, otp, name });\n    if (response.user) {\n      setUser(response.user);\n    }\n  };\n\n  const logout = async () => {\n    await authService.logout();\n    setUser(null);\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        loading,\n        login,\n        signup,\n        loginWithOTP,\n        sendOTP,\n        logout,\n        isAuthenticated: !!user,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n","size_bytes":2586},"next js/myntra-mobile/global.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n","size_bytes":59}},"version":1}